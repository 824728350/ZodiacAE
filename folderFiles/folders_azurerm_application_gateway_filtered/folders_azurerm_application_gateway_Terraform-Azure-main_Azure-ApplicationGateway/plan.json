{"format_version":"1.2","terraform_version":"1.9.4","variables":{"backend_address_pool_name":{"value":"myBackendPool"},"frontend_ip_configuration_name":{"value":"myAGIPConfig"},"frontend_port_name":{"value":"myFrontendPort"},"http_setting_name":{"value":"myHTTPsetting"},"listener_name":{"value":"myListener"},"request_routing_rule_name":{"value":"myRoutingRule"}},"planned_values":{"outputs":{"gateway_frontend_ip":{"sensitive":false}},"root_module":{"resources":[{"address":"azurerm_application_gateway.main","mode":"managed","type":"azurerm_application_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[],"name":"myBackendPool"}],"backend_http_settings":[{"affinity_cookie_name":"","authentication_certificate":[],"connection_draining":[],"cookie_based_affinity":"Disabled","host_name":"","name":"myHTTPsetting","path":"","pick_host_name_from_backend_address":false,"port":80,"probe_name":"","protocol":"Http","request_timeout":60,"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"enable_http2":null,"fips_enabled":null,"firewall_policy_id":null,"force_firewall_policy_association":null,"frontend_ip_configuration":[{"name":"myAGIPConfig","private_ip_address_allocation":"Dynamic","private_link_configuration_name":null,"subnet_id":null}],"frontend_port":[{"name":"myFrontendPort","port":80}],"gateway_ip_configuration":[{"name":"my-gateway-ip-configuration"}],"global":[],"http_listener":[{"custom_error_configuration":[],"firewall_policy_id":"","frontend_ip_configuration_name":"myAGIPConfig","frontend_port_name":"myFrontendPort","host_name":"","host_names":[],"name":"myListener","protocol":"Http","require_sni":null,"ssl_certificate_name":"","ssl_profile_name":""}],"identity":[],"location":"eastus","name":"myAppGateway","private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{"backend_address_pool_name":"myBackendPool","backend_http_settings_name":"myHTTPsetting","http_listener_name":"myListener","name":"myRoutingRule","priority":1,"redirect_configuration_name":"","rewrite_rule_set_name":"","rule_type":"Basic","url_path_map_name":""}],"rewrite_rule_set":[],"sku":[{"capacity":2,"name":"Standard_v2","tier":"Standard_v2"}],"ssl_certificate":[],"ssl_profile":[],"tags":null,"timeouts":null,"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[],"zones":null},"sensitive_values":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[]}],"backend_http_settings":[{"authentication_certificate":[],"connection_draining":[],"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"frontend_ip_configuration":[{}],"frontend_port":[{}],"gateway_ip_configuration":[{}],"global":[],"http_listener":[{"custom_error_configuration":[],"host_names":[]}],"identity":[],"private_endpoint_connection":[],"private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{}],"rewrite_rule_set":[],"sku":[{}],"ssl_certificate":[],"ssl_policy":[],"ssl_profile":[],"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[]}},{"address":"azurerm_network_interface.nic[0]","mode":"managed","type":"azurerm_network_interface","name":"nic","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"nic-ipconfig-1","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"eastus","name":"nic-1","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"azurerm_network_interface.nic[1]","mode":"managed","type":"azurerm_network_interface","name":"nic","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"nic-ipconfig-2","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"eastus","name":"nic-2","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"azurerm_network_interface_application_gateway_backend_address_pool_association.nic-assoc[0]","mode":"managed","type":"azurerm_network_interface_application_gateway_backend_address_pool_association","name":"nic-assoc","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"ip_configuration_name":"nic-ipconfig-1","timeouts":null},"sensitive_values":{}},{"address":"azurerm_network_interface_application_gateway_backend_address_pool_association.nic-assoc[1]","mode":"managed","type":"azurerm_network_interface_application_gateway_backend_address_pool_association","name":"nic-assoc","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"ip_configuration_name":"nic-ipconfig-2","timeouts":null},"sensitive_values":{}},{"address":"azurerm_public_ip.pip","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"eastus","name":"myAGPublicIPAddress","public_ip_prefix_id":null,"reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","managed_by":null,"tags":null,"timeouts":null},"sensitive_values":{}},{"address":"azurerm_subnet.backend","mode":"managed","type":"azurerm_subnet","name":"backend","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.21.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"myBackendSubnet","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"myVNet"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.frontend","mode":"managed","type":"azurerm_subnet","name":"frontend","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.21.0.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"myAGSubnet","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"myVNet"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_virtual_machine_extension.vm-extensions[0]","mode":"managed","type":"azurerm_virtual_machine_extension","name":"vm-extensions","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auto_upgrade_minor_version":null,"automatic_upgrade_enabled":null,"failure_suppression_enabled":false,"name":"vm1-ext","protected_settings":null,"protected_settings_from_key_vault":[],"provision_after_extensions":null,"publisher":"Microsoft.Compute","settings":"    {\n        \"commandToExecute\": \"powershell Add-WindowsFeature Web-Server; powershell Add-Content -Path \\\"C:\\\\inetpub\\\\wwwroot\\\\Default.htm\\\" -Value $($env:computername)\"\n    }\n","tags":null,"timeouts":null,"type":"CustomScriptExtension","type_handler_version":"1.10"},"sensitive_values":{"protected_settings":true,"protected_settings_from_key_vault":[]}},{"address":"azurerm_virtual_machine_extension.vm-extensions[1]","mode":"managed","type":"azurerm_virtual_machine_extension","name":"vm-extensions","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auto_upgrade_minor_version":null,"automatic_upgrade_enabled":null,"failure_suppression_enabled":false,"name":"vm2-ext","protected_settings":null,"protected_settings_from_key_vault":[],"provision_after_extensions":null,"publisher":"Microsoft.Compute","settings":"    {\n        \"commandToExecute\": \"powershell Add-WindowsFeature Web-Server; powershell Add-Content -Path \\\"C:\\\\inetpub\\\\wwwroot\\\\Default.htm\\\" -Value $($env:computername)\"\n    }\n","tags":null,"timeouts":null,"type":"CustomScriptExtension","type_handler_version":"1.10"},"sensitive_values":{"protected_settings":true,"protected_settings_from_key_vault":[]}},{"address":"azurerm_virtual_network.vnet","mode":"managed","type":"azurerm_virtual_network","name":"vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.21.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"eastus","name":"myVNet","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}},{"address":"azurerm_windows_virtual_machine.vm[0]","mode":"managed","type":"azurerm_windows_virtual_machine","name":"vm","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"additional_unattend_content":[],"admin_username":"azureadmin","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"edge_zone":null,"enable_automatic_updates":true,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"hotpatching_enabled":false,"identity":[],"license_type":null,"location":"eastus","max_bid_price":-1,"name":"myVM1","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"AutomaticByOS","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"secret":[],"secure_boot_enabled":null,"size":"Standard_DS1_v2","source_image_id":null,"source_image_reference":[{"offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"tags":null,"timeouts":null,"timezone":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"winrm_listener":[],"zone":null},"sensitive_values":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[],"winrm_listener":[]}},{"address":"azurerm_windows_virtual_machine.vm[1]","mode":"managed","type":"azurerm_windows_virtual_machine","name":"vm","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"additional_unattend_content":[],"admin_username":"azureadmin","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"edge_zone":null,"enable_automatic_updates":true,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"hotpatching_enabled":false,"identity":[],"license_type":null,"location":"eastus","max_bid_price":-1,"name":"myVM2","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"AutomaticByOS","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"secret":[],"secure_boot_enabled":null,"size":"Standard_DS1_v2","source_image_id":null,"source_image_reference":[{"offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"tags":null,"timeouts":null,"timezone":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"winrm_listener":[],"zone":null},"sensitive_values":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[],"winrm_listener":[]}},{"address":"random_password.password","mode":"managed","type":"random_password","name":"password","provider_name":"registry.terraform.io/hashicorp/random","schema_version":3,"values":{"keepers":null,"length":16,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":true,"upper":true},"sensitive_values":{"bcrypt_hash":true,"result":true}},{"address":"random_string.rg","mode":"managed","type":"random_string","name":"rg","provider_name":"registry.terraform.io/hashicorp/random","schema_version":2,"values":{"keepers":null,"length":8,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"sensitive_values":{}}]}},"resource_changes":[{"address":"azurerm_application_gateway.main","mode":"managed","type":"azurerm_application_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[],"name":"myBackendPool"}],"backend_http_settings":[{"affinity_cookie_name":"","authentication_certificate":[],"connection_draining":[],"cookie_based_affinity":"Disabled","host_name":"","name":"myHTTPsetting","path":"","pick_host_name_from_backend_address":false,"port":80,"probe_name":"","protocol":"Http","request_timeout":60,"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"enable_http2":null,"fips_enabled":null,"firewall_policy_id":null,"force_firewall_policy_association":null,"frontend_ip_configuration":[{"name":"myAGIPConfig","private_ip_address_allocation":"Dynamic","private_link_configuration_name":null,"subnet_id":null}],"frontend_port":[{"name":"myFrontendPort","port":80}],"gateway_ip_configuration":[{"name":"my-gateway-ip-configuration"}],"global":[],"http_listener":[{"custom_error_configuration":[],"firewall_policy_id":"","frontend_ip_configuration_name":"myAGIPConfig","frontend_port_name":"myFrontendPort","host_name":"","host_names":[],"name":"myListener","protocol":"Http","require_sni":null,"ssl_certificate_name":"","ssl_profile_name":""}],"identity":[],"location":"eastus","name":"myAppGateway","private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{"backend_address_pool_name":"myBackendPool","backend_http_settings_name":"myHTTPsetting","http_listener_name":"myListener","name":"myRoutingRule","priority":1,"redirect_configuration_name":"","rewrite_rule_set_name":"","rule_type":"Basic","url_path_map_name":""}],"rewrite_rule_set":[],"sku":[{"capacity":2,"name":"Standard_v2","tier":"Standard_v2"}],"ssl_certificate":[],"ssl_profile":[],"tags":null,"timeouts":null,"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[],"zones":null},"after_unknown":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"id":true,"ip_addresses":[]}],"backend_http_settings":[{"authentication_certificate":[],"connection_draining":[],"id":true,"probe_id":true,"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"frontend_ip_configuration":[{"id":true,"private_ip_address":true,"private_link_configuration_id":true,"public_ip_address_id":true}],"frontend_port":[{"id":true}],"gateway_ip_configuration":[{"id":true,"subnet_id":true}],"global":[],"http_listener":[{"custom_error_configuration":[],"frontend_ip_configuration_id":true,"frontend_port_id":true,"host_names":[],"id":true,"ssl_certificate_id":true,"ssl_profile_id":true}],"id":true,"identity":[],"private_endpoint_connection":true,"private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{"backend_address_pool_id":true,"backend_http_settings_id":true,"http_listener_id":true,"id":true,"redirect_configuration_id":true,"rewrite_rule_set_id":true,"url_path_map_id":true}],"resource_group_name":true,"rewrite_rule_set":[],"sku":[{}],"ssl_certificate":[],"ssl_policy":true,"ssl_profile":[],"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[]},"before_sensitive":false,"after_sensitive":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[]}],"backend_http_settings":[{"authentication_certificate":[],"connection_draining":[],"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"frontend_ip_configuration":[{}],"frontend_port":[{}],"gateway_ip_configuration":[{}],"global":[],"http_listener":[{"custom_error_configuration":[],"host_names":[]}],"identity":[],"private_endpoint_connection":[],"private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{}],"rewrite_rule_set":[],"sku":[{}],"ssl_certificate":[],"ssl_policy":[],"ssl_profile":[],"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[]}}},{"address":"azurerm_network_interface.nic[0]","mode":"managed","type":"azurerm_network_interface","name":"nic","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"nic-ipconfig-1","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"eastus","name":"nic-1","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_accelerated_networking":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"resource_group_name":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"azurerm_network_interface.nic[1]","mode":"managed","type":"azurerm_network_interface","name":"nic","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"nic-ipconfig-2","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"eastus","name":"nic-2","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_accelerated_networking":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"resource_group_name":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"azurerm_network_interface_application_gateway_backend_address_pool_association.nic-assoc[0]","mode":"managed","type":"azurerm_network_interface_application_gateway_backend_address_pool_association","name":"nic-assoc","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"ip_configuration_name":"nic-ipconfig-1","timeouts":null},"after_unknown":{"backend_address_pool_id":true,"id":true,"network_interface_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_network_interface_application_gateway_backend_address_pool_association.nic-assoc[1]","mode":"managed","type":"azurerm_network_interface_application_gateway_backend_address_pool_association","name":"nic-assoc","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"ip_configuration_name":"nic-ipconfig-2","timeouts":null},"after_unknown":{"backend_address_pool_id":true,"id":true,"network_interface_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_public_ip.pip","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"eastus","name":"myAGPublicIPAddress","public_ip_prefix_id":null,"reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true,"resource_group_name":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","managed_by":null,"tags":null,"timeouts":null},"after_unknown":{"id":true,"name":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_subnet.backend","mode":"managed","type":"azurerm_subnet","name":"backend","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.21.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"myBackendSubnet","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"myVNet"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true,"resource_group_name":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.frontend","mode":"managed","type":"azurerm_subnet","name":"frontend","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.21.0.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"myAGSubnet","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"myVNet"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true,"resource_group_name":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_virtual_machine_extension.vm-extensions[0]","mode":"managed","type":"azurerm_virtual_machine_extension","name":"vm-extensions","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auto_upgrade_minor_version":null,"automatic_upgrade_enabled":null,"failure_suppression_enabled":false,"name":"vm1-ext","protected_settings":null,"protected_settings_from_key_vault":[],"provision_after_extensions":null,"publisher":"Microsoft.Compute","settings":"    {\n        \"commandToExecute\": \"powershell Add-WindowsFeature Web-Server; powershell Add-Content -Path \\\"C:\\\\inetpub\\\\wwwroot\\\\Default.htm\\\" -Value $($env:computername)\"\n    }\n","tags":null,"timeouts":null,"type":"CustomScriptExtension","type_handler_version":"1.10"},"after_unknown":{"id":true,"protected_settings_from_key_vault":[],"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"protected_settings":true,"protected_settings_from_key_vault":[]}}},{"address":"azurerm_virtual_machine_extension.vm-extensions[1]","mode":"managed","type":"azurerm_virtual_machine_extension","name":"vm-extensions","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auto_upgrade_minor_version":null,"automatic_upgrade_enabled":null,"failure_suppression_enabled":false,"name":"vm2-ext","protected_settings":null,"protected_settings_from_key_vault":[],"provision_after_extensions":null,"publisher":"Microsoft.Compute","settings":"    {\n        \"commandToExecute\": \"powershell Add-WindowsFeature Web-Server; powershell Add-Content -Path \\\"C:\\\\inetpub\\\\wwwroot\\\\Default.htm\\\" -Value $($env:computername)\"\n    }\n","tags":null,"timeouts":null,"type":"CustomScriptExtension","type_handler_version":"1.10"},"after_unknown":{"id":true,"protected_settings_from_key_vault":[],"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"protected_settings":true,"protected_settings_from_key_vault":[]}}},{"address":"azurerm_virtual_network.vnet","mode":"managed","type":"azurerm_virtual_network","name":"vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.21.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"eastus","name":"myVNet","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"encryption":[],"guid":true,"id":true,"resource_group_name":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}},{"address":"azurerm_windows_virtual_machine.vm[0]","mode":"managed","type":"azurerm_windows_virtual_machine","name":"vm","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"additional_unattend_content":[],"admin_username":"azureadmin","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"edge_zone":null,"enable_automatic_updates":true,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"hotpatching_enabled":false,"identity":[],"license_type":null,"location":"eastus","max_bid_price":-1,"name":"myVM1","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"AutomaticByOS","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"secret":[],"secure_boot_enabled":null,"size":"Standard_DS1_v2","source_image_id":null,"source_image_reference":[{"offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"tags":null,"timeouts":null,"timezone":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"winrm_listener":[],"zone":null},"after_unknown":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":true,"boot_diagnostics":[],"computer_name":true,"disk_controller_type":true,"gallery_application":[],"id":true,"identity":[],"network_interface_ids":true,"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true,"name":true}],"os_image_notification":[],"plan":[],"private_ip_address":true,"private_ip_addresses":true,"public_ip_address":true,"public_ip_addresses":true,"resource_group_name":true,"secret":[],"source_image_reference":[{}],"termination_notification":true,"virtual_machine_id":true,"winrm_listener":[]},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[],"winrm_listener":[]}}},{"address":"azurerm_windows_virtual_machine.vm[1]","mode":"managed","type":"azurerm_windows_virtual_machine","name":"vm","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"additional_unattend_content":[],"admin_username":"azureadmin","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"edge_zone":null,"enable_automatic_updates":true,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"hotpatching_enabled":false,"identity":[],"license_type":null,"location":"eastus","max_bid_price":-1,"name":"myVM2","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"AutomaticByOS","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"secret":[],"secure_boot_enabled":null,"size":"Standard_DS1_v2","source_image_id":null,"source_image_reference":[{"offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"tags":null,"timeouts":null,"timezone":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"winrm_listener":[],"zone":null},"after_unknown":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":true,"boot_diagnostics":[],"computer_name":true,"disk_controller_type":true,"gallery_application":[],"id":true,"identity":[],"network_interface_ids":true,"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true,"name":true}],"os_image_notification":[],"plan":[],"private_ip_address":true,"private_ip_addresses":true,"public_ip_address":true,"public_ip_addresses":true,"resource_group_name":true,"secret":[],"source_image_reference":[{}],"termination_notification":true,"virtual_machine_id":true,"winrm_listener":[]},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[],"winrm_listener":[]}}},{"address":"random_password.password","mode":"managed","type":"random_password","name":"password","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":16,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":true,"upper":true},"after_unknown":{"bcrypt_hash":true,"id":true,"result":true},"before_sensitive":false,"after_sensitive":{"bcrypt_hash":true,"result":true}}},{"address":"random_string.rg","mode":"managed","type":"random_string","name":"rg","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":8,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"result":true},"before_sensitive":false,"after_sensitive":{}}}],"output_changes":{"gateway_frontend_ip":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","expressions":{"features":[{}]}},"random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random"}},"root_module":{"outputs":{"gateway_frontend_ip":{"expression":{"references":["azurerm_public_ip.pip.ip_address","azurerm_public_ip.pip"]}}},"resources":[{"address":"azurerm_application_gateway.main","mode":"managed","type":"azurerm_application_gateway","name":"main","provider_config_key":"azurerm","expressions":{"backend_address_pool":[{"name":{"references":["var.backend_address_pool_name"]}}],"backend_http_settings":[{"cookie_based_affinity":{"constant_value":"Disabled"},"name":{"references":["var.http_setting_name"]},"port":{"constant_value":80},"protocol":{"constant_value":"Http"},"request_timeout":{"constant_value":60}}],"frontend_ip_configuration":[{"name":{"references":["var.frontend_ip_configuration_name"]},"public_ip_address_id":{"references":["azurerm_public_ip.pip.id","azurerm_public_ip.pip"]}}],"frontend_port":[{"name":{"references":["var.frontend_port_name"]},"port":{"constant_value":80}}],"gateway_ip_configuration":[{"name":{"constant_value":"my-gateway-ip-configuration"},"subnet_id":{"references":["azurerm_subnet.frontend.id","azurerm_subnet.frontend"]}}],"http_listener":[{"frontend_ip_configuration_name":{"references":["var.frontend_ip_configuration_name"]},"frontend_port_name":{"references":["var.frontend_port_name"]},"name":{"references":["var.listener_name"]},"protocol":{"constant_value":"Http"}}],"location":{"references":["azurerm_resource_group.rg.location","azurerm_resource_group.rg"]},"name":{"constant_value":"myAppGateway"},"request_routing_rule":[{"backend_address_pool_name":{"references":["var.backend_address_pool_name"]},"backend_http_settings_name":{"references":["var.http_setting_name"]},"http_listener_name":{"references":["var.listener_name"]},"name":{"references":["var.request_routing_rule_name"]},"priority":{"constant_value":1},"rule_type":{"constant_value":"Basic"}}],"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]},"sku":[{"capacity":{"constant_value":2},"name":{"constant_value":"Standard_v2"},"tier":{"constant_value":"Standard_v2"}}]},"schema_version":0},{"address":"azurerm_network_interface.nic","mode":"managed","type":"azurerm_network_interface","name":"nic","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"references":["count.index"]},"private_ip_address_allocation":{"constant_value":"Dynamic"},"subnet_id":{"references":["azurerm_subnet.backend.id","azurerm_subnet.backend"]}}],"location":{"references":["azurerm_resource_group.rg.location","azurerm_resource_group.rg"]},"name":{"references":["count.index"]},"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]}},"schema_version":0,"count_expression":{"constant_value":2}},{"address":"azurerm_network_interface_application_gateway_backend_address_pool_association.nic-assoc","mode":"managed","type":"azurerm_network_interface_application_gateway_backend_address_pool_association","name":"nic-assoc","provider_config_key":"azurerm","expressions":{"backend_address_pool_id":{"references":["azurerm_application_gateway.main.backend_address_pool","azurerm_application_gateway.main"]},"ip_configuration_name":{"references":["count.index"]},"network_interface_id":{"references":["azurerm_network_interface.nic","count.index"]}},"schema_version":0,"count_expression":{"constant_value":2}},{"address":"azurerm_public_ip.pip","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["azurerm_resource_group.rg.location","azurerm_resource_group.rg"]},"name":{"constant_value":"myAGPublicIPAddress"},"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]},"sku":{"constant_value":"Standard"}},"schema_version":0},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_config_key":"azurerm","expressions":{"location":{"constant_value":"eastus"},"name":{"references":["random_string.rg.result","random_string.rg"]}},"schema_version":0},{"address":"azurerm_subnet.backend","mode":"managed","type":"azurerm_subnet","name":"backend","provider_config_key":"azurerm","expressions":{"address_prefixes":{"constant_value":["10.21.1.0/24"]},"name":{"constant_value":"myBackendSubnet"},"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]},"virtual_network_name":{"references":["azurerm_virtual_network.vnet.name","azurerm_virtual_network.vnet"]}},"schema_version":0},{"address":"azurerm_subnet.frontend","mode":"managed","type":"azurerm_subnet","name":"frontend","provider_config_key":"azurerm","expressions":{"address_prefixes":{"constant_value":["10.21.0.0/24"]},"name":{"constant_value":"myAGSubnet"},"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]},"virtual_network_name":{"references":["azurerm_virtual_network.vnet.name","azurerm_virtual_network.vnet"]}},"schema_version":0},{"address":"azurerm_virtual_machine_extension.vm-extensions","mode":"managed","type":"azurerm_virtual_machine_extension","name":"vm-extensions","provider_config_key":"azurerm","expressions":{"name":{"references":["count.index"]},"publisher":{"constant_value":"Microsoft.Compute"},"settings":{"constant_value":"    {\n        \"commandToExecute\": \"powershell Add-WindowsFeature Web-Server; powershell Add-Content -Path \\\"C:\\\\inetpub\\\\wwwroot\\\\Default.htm\\\" -Value $($env:computername)\"\n    }\n"},"type":{"constant_value":"CustomScriptExtension"},"type_handler_version":{"constant_value":"1.10"},"virtual_machine_id":{"references":["azurerm_windows_virtual_machine.vm","count.index"]}},"schema_version":0,"count_expression":{"constant_value":2}},{"address":"azurerm_virtual_network.vnet","mode":"managed","type":"azurerm_virtual_network","name":"vnet","provider_config_key":"azurerm","expressions":{"address_space":{"constant_value":["10.21.0.0/16"]},"location":{"references":["azurerm_resource_group.rg.location","azurerm_resource_group.rg"]},"name":{"constant_value":"myVNet"},"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]}},"schema_version":0},{"address":"azurerm_windows_virtual_machine.vm","mode":"managed","type":"azurerm_windows_virtual_machine","name":"vm","provider_config_key":"azurerm","expressions":{"admin_password":{"references":["random_password.password.result","random_password.password"]},"admin_username":{"constant_value":"azureadmin"},"location":{"references":["azurerm_resource_group.rg.location","azurerm_resource_group.rg"]},"name":{"references":["count.index"]},"network_interface_ids":{"references":["azurerm_network_interface.nic","count.index"]},"os_disk":[{"caching":{"constant_value":"ReadWrite"},"storage_account_type":{"constant_value":"Standard_LRS"}}],"resource_group_name":{"references":["azurerm_resource_group.rg.name","azurerm_resource_group.rg"]},"size":{"constant_value":"Standard_DS1_v2"},"source_image_reference":[{"offer":{"constant_value":"WindowsServer"},"publisher":{"constant_value":"MicrosoftWindowsServer"},"sku":{"constant_value":"2019-Datacenter"},"version":{"constant_value":"latest"}}]},"schema_version":0,"count_expression":{"constant_value":2}},{"address":"random_password.password","mode":"managed","type":"random_password","name":"password","provider_config_key":"random","expressions":{"length":{"constant_value":16},"lower":{"constant_value":true},"numeric":{"constant_value":true},"special":{"constant_value":true},"upper":{"constant_value":true}},"schema_version":3},{"address":"random_string.rg","mode":"managed","type":"random_string","name":"rg","provider_config_key":"random","expressions":{"length":{"constant_value":8},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":2}],"variables":{"backend_address_pool_name":{"default":"myBackendPool"},"frontend_ip_configuration_name":{"default":"myAGIPConfig"},"frontend_port_name":{"default":"myFrontendPort"},"http_setting_name":{"default":"myHTTPsetting"},"listener_name":{"default":"myListener"},"request_routing_rule_name":{"default":"myRoutingRule"}}}},"relevant_attributes":[{"resource":"azurerm_resource_group.rg","attribute":["name"]},{"resource":"azurerm_subnet.backend","attribute":["id"]},{"resource":"azurerm_windows_virtual_machine.vm","attribute":[]},{"resource":"azurerm_subnet.frontend","attribute":["id"]},{"resource":"azurerm_application_gateway.main","attribute":["backend_address_pool"]},{"resource":"azurerm_public_ip.pip","attribute":["ip_address"]},{"resource":"random_string.rg","attribute":["result"]},{"resource":"azurerm_virtual_network.vnet","attribute":["name"]},{"resource":"random_password.password","attribute":["result"]},{"resource":"azurerm_network_interface.nic","attribute":[]},{"resource":"azurerm_public_ip.pip","attribute":["id"]},{"resource":"azurerm_resource_group.rg","attribute":["location"]}],"timestamp":"2024-08-17T00:14:54Z","applyable":true,"complete":true,"errored":false}
