{"format_version":"1.2","terraform_version":"1.9.4","variables":{"backend_base_cidr_block":{"value":"172.16.0.0/16"},"frontend_base_cidr_block":{"value":"10.254.0.0/16"},"numberOfVMs":{"value":2},"pattern":{"value":"AppGW-with-PLS-and-WAF-and-FrontAzFW"},"rg":{"value":{"location":"japaneast","name":"rg-idps-appgw-azfw-0511"}},"ssh_public_key":{"value":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCythmaDMBX8Eatx5mqlF0JJ1pNGXePUreGuuAe3yQb+bWbxQJRFuMpYBpKZjZesIUfA86qwaK+c+mD2Sw5GKKIOca6Jj228gYBEBaEzFYZy5Pc3IyZL/3q41OS4kQD27+xIneDGmUnZBXCiuqsXdrw8cSMY6/Cj1tn6UsB4eN1ZZ3AJsTjoZwJSqSmApvavlYl+nPaHlN3fZFF0vwomeLKF3KWahcgIhqxpK5hnjDHWHb0S3bcBwO7NeBIeZqdDAP3Zc17jbgBWKdKy73AZrSRKJh/f8Hvx6qBTRD/IomD+jYOLBPb/gDUYACOyKxB9szwmG/8wQY1dzZNGURCpL3v"}},"planned_values":{"root_module":{"resources":[{"address":"azurerm_application_gateway.network","mode":"managed","type":"azurerm_application_gateway","name":"network","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"ip_addresses":[],"name":"vnet-example-beap-vm"}],"backend_http_settings":[{"affinity_cookie_name":"","authentication_certificate":[],"connection_draining":[],"cookie_based_affinity":"Disabled","host_name":"","name":"vnet-example-be-htst-2","path":"/","pick_host_name_from_backend_address":true,"port":80,"probe_name":"","protocol":"Http","request_timeout":60,"trusted_root_certificate_names":[]},{"affinity_cookie_name":"","authentication_certificate":[],"connection_draining":[],"cookie_based_affinity":"Enabled","host_name":"","name":"vnet-example-be-htst","path":"","pick_host_name_from_backend_address":true,"port":80,"probe_name":"","protocol":"Http","request_timeout":60,"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"enable_http2":null,"fips_enabled":null,"firewall_policy_id":null,"force_firewall_policy_association":null,"frontend_ip_configuration":[{"name":"vnet-example-feip","private_ip_address_allocation":"Dynamic","private_link_configuration_name":null,"subnet_id":null},{"name":"vnet-example-feip-private","private_ip_address":"172.16.4.4","private_ip_address_allocation":"Static","private_link_configuration_name":"my-private-link-config","public_ip_address_id":null}],"frontend_port":[{"name":"vnet-example-8080-feport","port":8080},{"name":"vnet-example-feport","port":80}],"gateway_ip_configuration":[{"name":"my-gateway-ip-configuration"}],"global":[],"http_listener":[{"custom_error_configuration":[],"firewall_policy_id":"","frontend_ip_configuration_name":"vnet-example-feip","frontend_port_name":"vnet-example-feport","host_name":"","host_names":[],"name":"vnet-example-httplstn","protocol":"Http","require_sni":null,"ssl_certificate_name":"","ssl_profile_name":""},{"custom_error_configuration":[],"firewall_policy_id":"","frontend_ip_configuration_name":"vnet-example-feip-private","frontend_port_name":"vnet-example-8080-feport","host_name":"","host_names":[],"name":"vnet-example-httplstn-private","protocol":"Http","require_sni":null,"ssl_certificate_name":"","ssl_profile_name":""}],"identity":[],"location":"japaneast","name":"appgw-example","private_link_configuration":[{"ip_configuration":[{"name":"my-private-link-config-ip-config","primary":true,"private_ip_address_allocation":"Dynamic"}],"name":"my-private-link-config"}],"probe":[],"redirect_configuration":[],"request_routing_rule":[{"backend_address_pool_name":"","backend_http_settings_name":"","http_listener_name":"vnet-example-httplstn-private","name":"vnet-example-private-rqrt","priority":1000,"redirect_configuration_name":"","rewrite_rule_set_name":"","rule_type":"PathBasedRouting","url_path_map_name":"my-url-path-map"}],"resource_group_name":"rg-idps-appgw-azfw-0511","rewrite_rule_set":[{"name":"add-x-forwarded-for-to-url","rewrite_rule":[{"condition":[{"ignore_case":true,"negate":false,"pattern":"(\\d+\\.\\d+\\.\\d+\\.\\d+)","variable":"http_req_X-Forwarded-For"}],"name":"NewRewrite","request_header_configuration":[],"response_header_configuration":[],"rule_sequence":100,"url":[{"components":"query_string_only","path":null,"query_string":"{var_query_string}\u0026c={http_req_X-Forwarded-For_1}","reroute":false}]}]}],"sku":[{"capacity":2,"name":"WAF_v2","tier":"WAF_v2"}],"ssl_certificate":[],"ssl_profile":[],"tags":null,"timeouts":null,"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[{"default_backend_address_pool_name":"vnet-example-beap-vm","default_backend_http_settings_name":"vnet-example-be-htst","default_redirect_configuration_name":null,"default_rewrite_rule_set_name":"add-x-forwarded-for-to-url","name":"my-url-path-map","path_rule":[{"backend_address_pool_name":"vnet-example-beap-vm","backend_http_settings_name":"vnet-example-be-htst-2","firewall_policy_id":null,"name":"my-path-rule","paths":["/staging/*"],"redirect_configuration_name":null,"rewrite_rule_set_name":null}]}],"waf_configuration":[{"disabled_rule_group":[],"enabled":true,"exclusion":[],"file_upload_limit_mb":100,"firewall_mode":"Detection","max_request_body_size_kb":128,"request_body_check":true,"rule_set_type":"OWASP","rule_set_version":"3.2"}],"zones":null},"sensitive_values":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[]}],"backend_http_settings":[{"authentication_certificate":[],"connection_draining":[],"trusted_root_certificate_names":[]},{"authentication_certificate":[],"connection_draining":[],"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"frontend_ip_configuration":[{},{}],"frontend_port":[{},{}],"gateway_ip_configuration":[{}],"global":[],"http_listener":[{"custom_error_configuration":[],"host_names":[]},{"custom_error_configuration":[],"host_names":[]}],"identity":[],"private_endpoint_connection":[],"private_link_configuration":[{"ip_configuration":[{}]}],"probe":[],"redirect_configuration":[],"request_routing_rule":[{}],"rewrite_rule_set":[{"rewrite_rule":[{"condition":[{}],"request_header_configuration":[],"response_header_configuration":[],"url":[{}]}]}],"sku":[{}],"ssl_certificate":[],"ssl_policy":[],"ssl_profile":[],"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[{"path_rule":[{"paths":[false]}]}],"waf_configuration":[{"disabled_rule_group":[],"exclusion":[]}]}},{"address":"azurerm_private_endpoint.example","mode":"managed","type":"azurerm_private_endpoint","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"custom_network_interface_name":null,"ip_configuration":[],"location":"japaneast","name":"pe-to-backend-appgw","private_dns_zone_group":[],"private_service_connection":[{"is_manual_connection":false,"name":"example-privateserviceconnection","private_connection_resource_alias":null,"request_message":null,"subresource_names":["vnet-example-feip-private"]}],"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"sensitive_values":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[],"private_service_connection":[{"subresource_names":[false]}]}},{"address":"azurerm_public_ip.appgw","mode":"managed","type":"azurerm_public_ip","name":"appgw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-appgw","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":["1","2","3"]},"sensitive_values":{"zones":[false,false,false]}},{"address":"azurerm_resource_group.example","mode":"managed","type":"azurerm_resource_group","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"japaneast","managed_by":null,"name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"sensitive_values":{}},{"address":"azurerm_resource_group.frontend","mode":"managed","type":"azurerm_resource_group","name":"frontend","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"japaneast","managed_by":null,"name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"sensitive_values":{}},{"address":"azurerm_route_table.appgw","mode":"managed","type":"azurerm_route_table","name":"appgw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"disable_bgp_route_propagation":true,"location":"japaneast","name":"rt-appgw","resource_group_name":"rg-idps-appgw-azfw-0511","route":[{"address_prefix":"172.16.0.0/24","name":"to-default","next_hop_type":"VirtualAppliance"}],"tags":null,"timeouts":null},"sensitive_values":{"route":[{}],"subnets":[]}},{"address":"azurerm_route_table.azfw","mode":"managed","type":"azurerm_route_table","name":"azfw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"japaneast","name":"route-azfw","resource_group_name":"rg-idps-appgw-azfw-0511","route":[{"address_prefix":"0.0.0.0/0","name":"default","next_hop_in_ip_address":"","next_hop_type":"Internet"}],"tags":null,"timeouts":null},"sensitive_values":{"route":[{}],"subnets":[]}},{"address":"azurerm_route_table.default","mode":"managed","type":"azurerm_route_table","name":"default","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"disable_bgp_route_propagation":true,"location":"japaneast","name":"rt-default","resource_group_name":"rg-idps-appgw-azfw-0511","route":[{"address_prefix":"0.0.0.0/0","name":"default","next_hop_type":"VirtualAppliance"},{"address_prefix":"172.16.4.0/24","name":"to-appgw","next_hop_type":"VirtualAppliance"}],"tags":null,"timeouts":null},"sensitive_values":{"route":[{},{}],"subnets":[]}},{"address":"azurerm_route_table.vm","mode":"managed","type":"azurerm_route_table","name":"vm","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"disable_bgp_route_propagation":false,"location":"japaneast","name":"rt-fe-vm","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","route":[{"address_prefix":"0.0.0.0/0","name":"default","next_hop_type":"VirtualAppliance"},{"address_prefix":"10.254.2.0/24","name":"backend","next_hop_type":"VirtualAppliance"}],"tags":null,"timeouts":null},"sensitive_values":{"route":[{},{}],"subnets":[]}},{"address":"azurerm_subnet.appgw","mode":"managed","type":"azurerm_subnet","name":"appgw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["172.16.4.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-appgw","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.azfw","mode":"managed","type":"azurerm_subnet","name":"azfw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["172.16.3.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureFirewallSubnet","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.bastion","mode":"managed","type":"azurerm_subnet","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["172.16.2.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureBastionSubnet","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.default","mode":"managed","type":"azurerm_subnet","name":"default","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["172.16.0.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-default","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.default2","mode":"managed","type":"azurerm_subnet","name":"default2","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["172.16.5.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-default-backend-appgw","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.fe_azfw","mode":"managed","type":"azurerm_subnet","name":"fe_azfw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.254.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureFirewallSubnet","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-azfwprem"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.fe_bastion","mode":"managed","type":"azurerm_subnet","name":"fe_bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.254.3.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureBastionSubnet","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-azfwprem"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.fe_vm","mode":"managed","type":"azurerm_subnet","name":"fe_vm","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.254.0.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-vm","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-azfwprem"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.pe","mode":"managed","type":"azurerm_subnet","name":"pe","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.254.2.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-pe","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-azfwprem"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet.pls","mode":"managed","type":"azurerm_subnet","name":"pls","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["172.16.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-pls","private_endpoint_network_policies_enabled":false,"private_link_service_network_policies_enabled":false,"resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_subnet_route_table_association.azfw","mode":"managed","type":"azurerm_subnet_route_table_association","name":"azfw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"azurerm_subnet_route_table_association.fe_vm[0]","mode":"managed","type":"azurerm_subnet_route_table_association","name":"fe_vm","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"azurerm_virtual_network.example","mode":"managed","type":"azurerm_virtual_network","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["172.16.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"japaneast","name":"vnet-example","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}},{"address":"azurerm_virtual_network.frontend","mode":"managed","type":"azurerm_virtual_network","name":"frontend","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.254.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"japaneast","name":"vnet-azfwprem","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}},{"address":"data.azurerm_monitor_diagnostic_categories.appgw_diag_category","mode":"data","type":"azurerm_monitor_diagnostic_categories","name":"appgw_diag_category","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{"log_category_groups":[],"log_category_types":[],"logs":[],"metrics":[]}},{"address":"data.azurerm_monitor_diagnostic_categories.azfw_diag_category","mode":"data","type":"azurerm_monitor_diagnostic_categories","name":"azfw_diag_category","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{"log_category_groups":[],"log_category_types":[],"logs":[],"metrics":[]}},{"address":"random_string.uniqstr","mode":"managed","type":"random_string","name":"uniqstr","provider_name":"registry.terraform.io/hashicorp/random","schema_version":2,"values":{"keepers":{"resource_group_name":"rg-idps-appgw-azfw-0511"},"length":6,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"sensitive_values":{"keepers":{}}}],"child_modules":[{"resources":[{"address":"module.afw_diag.azurerm_monitor_diagnostic_setting.diagnostic_logs","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"diagnostic_logs","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"eventhub_authorization_rule_id":null,"eventhub_name":null,"metric":[{"category":"AllMetrics","enabled":false,"retention_policy":[]}],"name":"diag","partner_solution_id":null,"storage_account_id":null,"timeouts":null},"sensitive_values":{"enabled_log":[],"log":[],"metric":[{"retention_policy":[]}]}}],"address":"module.afw_diag"},{"resources":[{"address":"module.appgw_diag.azurerm_monitor_diagnostic_setting.diagnostic_logs","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"diagnostic_logs","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"eventhub_authorization_rule_id":null,"eventhub_name":null,"metric":[{"category":"AllMetrics","enabled":false,"retention_policy":[]}],"name":"diag","partner_solution_id":null,"storage_account_id":null,"timeouts":null},"sensitive_values":{"enabled_log":[],"log":[],"metric":[{"retention_policy":[]}]}}],"address":"module.appgw_diag"},{"resources":[{"address":"module.azfw.azurerm_firewall.example","mode":"managed","type":"azurerm_firewall","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"dns_servers":null,"ip_configuration":[{"name":"configuration"}],"location":"japaneast","management_ip_configuration":[],"name":"afw-example","private_ip_ranges":null,"resource_group_name":"rg-idps-appgw-azfw-0511","sku_name":"AZFW_VNet","sku_tier":"Premium","tags":null,"timeouts":null,"virtual_hub":[],"zones":["1","2","3"]},"sensitive_values":{"ip_configuration":[{}],"management_ip_configuration":[],"virtual_hub":[],"zones":[false,false,false]}},{"address":"module.azfw.azurerm_firewall_policy.example","mode":"managed","type":"azurerm_firewall_policy","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auto_learn_private_ranges_enabled":null,"base_policy_id":null,"dns":[],"explicit_proxy":[],"identity":[],"insights":[],"intrusion_detection":[],"location":"japaneast","name":"afwp-example","private_ip_ranges":null,"resource_group_name":"rg-idps-appgw-azfw-0511","sku":"Premium","sql_redirect_allowed":null,"tags":null,"threat_intelligence_allowlist":[],"threat_intelligence_mode":"Alert","timeouts":null,"tls_certificate":[]},"sensitive_values":{"child_policies":[],"dns":[],"explicit_proxy":[],"firewalls":[],"identity":[],"insights":[],"intrusion_detection":[],"rule_collection_groups":[],"threat_intelligence_allowlist":[],"tls_certificate":[]}},{"address":"module.azfw.azurerm_firewall_policy_rule_collection_group.example","mode":"managed","type":"azurerm_firewall_policy_rule_collection_group","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"application_rule_collection":[{"action":"Allow","name":"AllowApplicationRuleCollection","priority":2000,"rule":[{"description":null,"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":["*"],"destination_urls":[],"http_headers":[],"name":"All","protocols":[{"port":80,"type":"Http"},{"port":443,"type":"Https"}],"source_addresses":["*"],"source_ip_groups":[],"terminate_tls":false,"web_categories":[]}]}],"name":"RuleCollectionGroup","nat_rule_collection":[{"action":"Dnat","name":"TestDnatRule_SSH-SpokeVM","priority":500,"rule":[{"description":null,"destination_ports":["22"],"name":"SSH","protocols":["TCP"],"source_addresses":["*"],"source_ip_groups":null,"translated_address":"1.1.1.1","translated_fqdn":null,"translated_port":22}]}],"network_rule_collection":[{"action":"Allow","name":"AllowNetworkRuleCollection","priority":1000,"rule":[{"description":null,"destination_addresses":["*"],"destination_fqdns":[],"destination_ip_groups":null,"destination_ports":["*"],"name":"All","protocols":["Any"],"source_addresses":["*"],"source_ip_groups":null}]}],"priority":1000,"timeouts":null},"sensitive_values":{"application_rule_collection":[{"rule":[{"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":[false],"destination_urls":[],"http_headers":[],"protocols":[{},{}],"source_addresses":[false],"source_ip_groups":[],"web_categories":[]}]}],"nat_rule_collection":[{"rule":[{"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}],"network_rule_collection":[{"rule":[{"destination_addresses":[false],"destination_fqdns":[],"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}]}},{"address":"module.azfw.azurerm_public_ip.example","mode":"managed","type":"azurerm_public_ip","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-fw-example","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":["1","2","3"]},"sensitive_values":{"zones":[false,false,false]}}],"address":"module.azfw"},{"resources":[{"address":"module.azfw_diag.azurerm_monitor_diagnostic_setting.diagnostic_logs","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"diagnostic_logs","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"eventhub_authorization_rule_id":null,"eventhub_name":null,"metric":[{"category":"AllMetrics","enabled":false,"retention_policy":[]}],"name":"diag","partner_solution_id":null,"storage_account_id":null,"timeouts":null},"sensitive_values":{"enabled_log":[],"log":[],"metric":[{"retention_policy":[]}]}}],"address":"module.azfw_diag"},{"resources":[{"address":"module.bastion.azurerm_bastion_host.bastion","mode":"managed","type":"azurerm_bastion_host","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"copy_paste_enabled":true,"file_copy_enabled":false,"ip_configuration":[{"name":"configuration"}],"ip_connect_enabled":true,"kerberos_enabled":false,"location":"japaneast","name":"bastion","resource_group_name":"rg-idps-appgw-azfw-0511","scale_units":2,"shareable_link_enabled":true,"sku":"Standard","tags":null,"timeouts":null,"tunneling_enabled":true,"virtual_network_id":null},"sensitive_values":{"ip_configuration":[{}]}},{"address":"module.bastion.azurerm_network_security_group.bastion","mode":"managed","type":"azurerm_network_security_group","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"japaneast","name":"nsg-bastion","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"sensitive_values":{"security_rule":[]}},{"address":"module.bastion.azurerm_network_security_rule.bastion-azurecloud-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-azurecloud-out","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"AzureCloud","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["443"],"direction":"Outbound","name":"AllowAzureCloudOutbound","network_security_group_name":"nsg-bastion","priority":130,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false]}},{"address":"module.bastion.azurerm_network_security_rule.bastion-bastioncommunication-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-bastioncommunication-out","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["5701","8080"],"direction":"Outbound","name":"AllowBastionCommunication","network_security_group_name":"nsg-bastion","priority":140,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false,false]}},{"address":"module.bastion.azurerm_network_security_rule.bastion-gsi-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gsi-out","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"Internet","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["80"],"direction":"Outbound","name":"AllowGetSesssionInformation","network_security_group_name":"nsg-bastion","priority":150,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false]}},{"address":"module.bastion.azurerm_network_security_rule.bastion-gwm","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gwm","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowGatewayManagerInbound","network_security_group_name":"nsg-bastion","priority":130,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"GatewayManager","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}},{"address":"module.bastion.azurerm_network_security_rule.bastion-hc","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-hc","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["5701","8080"],"direction":"Inbound","name":"AllowBastionHostCommunication","network_security_group_name":"nsg-bastion","priority":150,"protocol":"*","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false,false]}},{"address":"module.bastion.azurerm_network_security_rule.bastion-https","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-https","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowHttpsInbound","network_security_group_name":"nsg-bastion","priority":120,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"Internet","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}},{"address":"module.bastion.azurerm_network_security_rule.bastion-lb","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-lb","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowAzureLoadBalancerInbound","network_security_group_name":"nsg-bastion","priority":140,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"AzureLoadBalancer","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}},{"address":"module.bastion.azurerm_network_security_rule.bastion-sshrdp-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-sshrdp-out","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","3389"],"direction":"Outbound","name":"AllowSshRdpOutbound","network_security_group_name":"nsg-bastion","priority":120,"protocol":"*","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false,false]}},{"address":"module.bastion.azurerm_public_ip.bastion","mode":"managed","type":"azurerm_public_ip","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-bastion","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}},{"address":"module.bastion.azurerm_subnet_network_security_group_association.hub-bastion","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"hub-bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}}],"address":"module.bastion"},{"resources":[{"address":"module.fe_azfw.azurerm_firewall.example","mode":"managed","type":"azurerm_firewall","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"dns_servers":null,"ip_configuration":[{"name":"configuration"}],"location":"japaneast","management_ip_configuration":[],"private_ip_ranges":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","sku_name":"AZFW_VNet","sku_tier":"Premium","tags":null,"timeouts":null,"virtual_hub":[],"zones":["1","2","3"]},"sensitive_values":{"ip_configuration":[{}],"management_ip_configuration":[],"virtual_hub":[],"zones":[false,false,false]}},{"address":"module.fe_azfw.azurerm_firewall_policy.example","mode":"managed","type":"azurerm_firewall_policy","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auto_learn_private_ranges_enabled":null,"base_policy_id":null,"dns":[],"explicit_proxy":[],"identity":[],"insights":[],"intrusion_detection":[],"location":"japaneast","private_ip_ranges":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","sku":"Premium","sql_redirect_allowed":null,"tags":null,"threat_intelligence_allowlist":[],"threat_intelligence_mode":"Alert","timeouts":null,"tls_certificate":[]},"sensitive_values":{"child_policies":[],"dns":[],"explicit_proxy":[],"firewalls":[],"identity":[],"insights":[],"intrusion_detection":[],"rule_collection_groups":[],"threat_intelligence_allowlist":[],"tls_certificate":[]}},{"address":"module.fe_azfw.azurerm_firewall_policy_rule_collection_group.example","mode":"managed","type":"azurerm_firewall_policy_rule_collection_group","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"application_rule_collection":[{"action":"Allow","name":"AllowApplicationRuleCollection","priority":2000,"rule":[{"description":null,"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":["*"],"destination_urls":[],"http_headers":[],"name":"All","protocols":[{"port":80,"type":"Http"},{"port":8080,"type":"Http"},{"port":443,"type":"Https"}],"source_addresses":["*"],"source_ip_groups":[],"terminate_tls":false,"web_categories":[]}]}],"name":"RuleCollectionGroup","nat_rule_collection":[{"action":"Dnat","name":"TestDnatRule_SSH-SpokeVM","priority":500,"rule":[{"description":null,"destination_ports":["22"],"name":"SSH","protocols":["TCP"],"source_addresses":["*"],"source_ip_groups":null,"translated_address":"1.1.1.1","translated_fqdn":null,"translated_port":22}]}],"network_rule_collection":[{"action":"Allow","name":"AllowNetworkRuleCollection","priority":1000,"rule":[{"description":null,"destination_addresses":["*"],"destination_fqdns":[],"destination_ip_groups":null,"destination_ports":["*"],"name":"All","protocols":["TCP"],"source_addresses":["1.2.3.4"],"source_ip_groups":null}]}],"priority":1000,"timeouts":null},"sensitive_values":{"application_rule_collection":[{"rule":[{"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":[false],"destination_urls":[],"http_headers":[],"protocols":[{},{},{}],"source_addresses":[false],"source_ip_groups":[],"web_categories":[]}]}],"nat_rule_collection":[{"rule":[{"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}],"network_rule_collection":[{"rule":[{"destination_addresses":[false],"destination_fqdns":[],"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}]}},{"address":"module.fe_azfw.azurerm_public_ip.example","mode":"managed","type":"azurerm_public_ip","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":["1","2","3"]},"sensitive_values":{"zones":[false,false,false]}}],"address":"module.fe_azfw"},{"resources":[{"address":"module.fe_bastion.azurerm_bastion_host.bastion","mode":"managed","type":"azurerm_bastion_host","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"copy_paste_enabled":true,"file_copy_enabled":false,"ip_configuration":[{"name":"configuration"}],"ip_connect_enabled":true,"kerberos_enabled":false,"location":"japaneast","name":"bastion-frontend","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","scale_units":2,"shareable_link_enabled":true,"sku":"Standard","tags":null,"timeouts":null,"tunneling_enabled":true,"virtual_network_id":null},"sensitive_values":{"ip_configuration":[{}]}},{"address":"module.fe_bastion.azurerm_network_security_group.bastion","mode":"managed","type":"azurerm_network_security_group","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"japaneast","name":"nsg-bastion-frontend","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"sensitive_values":{"security_rule":[]}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-azurecloud-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-azurecloud-out","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"AzureCloud","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["443"],"direction":"Outbound","name":"AllowAzureCloudOutbound","network_security_group_name":"nsg-bastion-frontend","priority":130,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false]}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-bastioncommunication-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-bastioncommunication-out","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["5701","8080"],"direction":"Outbound","name":"AllowBastionCommunication","network_security_group_name":"nsg-bastion-frontend","priority":140,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false,false]}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-gsi-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gsi-out","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"Internet","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["80"],"direction":"Outbound","name":"AllowGetSesssionInformation","network_security_group_name":"nsg-bastion-frontend","priority":150,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false]}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-gwm","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gwm","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowGatewayManagerInbound","network_security_group_name":"nsg-bastion-frontend","priority":130,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"GatewayManager","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-hc","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-hc","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["5701","8080"],"direction":"Inbound","name":"AllowBastionHostCommunication","network_security_group_name":"nsg-bastion-frontend","priority":150,"protocol":"*","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false,false]}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-https","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-https","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowHttpsInbound","network_security_group_name":"nsg-bastion-frontend","priority":120,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"Internet","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-lb","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-lb","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowAzureLoadBalancerInbound","network_security_group_name":"nsg-bastion-frontend","priority":140,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"AzureLoadBalancer","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-sshrdp-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-sshrdp-out","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","3389"],"direction":"Outbound","name":"AllowSshRdpOutbound","network_security_group_name":"nsg-bastion-frontend","priority":120,"protocol":"*","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false,false]}},{"address":"module.fe_bastion.azurerm_public_ip.bastion","mode":"managed","type":"azurerm_public_ip","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-bastion-frontend","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}},{"address":"module.fe_bastion.azurerm_subnet_network_security_group_association.hub-bastion","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"hub-bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}}],"address":"module.fe_bastion"},{"resources":[{"address":"module.la.azurerm_log_analytics_solution.container","mode":"managed","type":"azurerm_log_analytics_solution","name":"container","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"location":"japaneast","plan":[{"product":"OMSGallery/ContainerInsights","promotion_code":null,"publisher":"Microsoft"}],"resource_group_name":"rg-idps-appgw-azfw-0511","solution_name":"ContainerInsights","tags":null,"timeouts":null},"sensitive_values":{"plan":[{}]}},{"address":"module.la.azurerm_log_analytics_solution.vms","mode":"managed","type":"azurerm_log_analytics_solution","name":"vms","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"location":"japaneast","plan":[{"product":"OMSGallery/VMInsights","promotion_code":null,"publisher":"Microsoft"}],"resource_group_name":"rg-idps-appgw-azfw-0511","solution_name":"VMInsights","tags":null,"timeouts":null},"sensitive_values":{"plan":[{}]}},{"address":"module.la.azurerm_log_analytics_workspace.log_analytics","mode":"managed","type":"azurerm_log_analytics_workspace","name":"log_analytics","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":3,"values":{"allow_resource_only_permissions":true,"cmk_for_query_forced":null,"daily_quota_gb":-1,"data_collection_rule_id":null,"identity":[],"immediate_data_purge_on_30_days_enabled":null,"internet_ingestion_enabled":true,"internet_query_enabled":true,"local_authentication_disabled":false,"location":"japaneast","reservation_capacity_in_gb_per_day":null,"resource_group_name":"rg-idps-appgw-azfw-0511","retention_in_days":30,"tags":null,"timeouts":null},"sensitive_values":{"identity":[],"primary_shared_key":true,"secondary_shared_key":true}}],"address":"module.la"},{"resources":[{"address":"module.vm_appgw[0].azurerm_dev_test_global_vm_shutdown_schedule.autoshutdown","mode":"managed","type":"azurerm_dev_test_global_vm_shutdown_schedule","name":"autoshutdown","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"daily_recurrence_time":"0200","enabled":true,"location":"japaneast","notification_settings":[{"email":null,"enabled":false,"time_in_minutes":30,"webhook_url":null}],"tags":null,"timeouts":null,"timezone":"Tokyo Standard Time"},"sensitive_values":{"notification_settings":[{}]}},{"address":"module.vm_appgw[0].azurerm_linux_virtual_machine.linux","mode":"managed","type":"azurerm_linux_virtual_machine","name":"linux","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"admin_password":"Password1!","admin_ssh_key":[{"public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCythmaDMBX8Eatx5mqlF0JJ1pNGXePUreGuuAe3yQb+bWbxQJRFuMpYBpKZjZesIUfA86qwaK+c+mD2Sw5GKKIOca6Jj228gYBEBaEzFYZy5Pc3IyZL/3q41OS4kQD27+xIneDGmUnZBXCiuqsXdrw8cSMY6/Cj1tn6UsB4eN1ZZ3AJsTjoZwJSqSmApvavlYl+nPaHlN3fZFF0vwomeLKF3KWahcgIhqxpK5hnjDHWHb0S3bcBwO7NeBIeZqdDAP3Zc17jbgBWKdKy73AZrSRKJh/f8Hvx6qBTRD/IomD+jYOLBPb/gDUYACOyKxB9szwmG/8wQY1dzZNGURCpL3v","username":"adminuser"}],"admin_username":"adminuser","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[{"storage_account_uri":null}],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":"I2Nsb3VkLWNvbmZpZwpwYWNrYWdlc191cGRhdGU6IHRydWUKcGFja2FnZXNfdXBncmFkZTogdHJ1ZQpwYWNrYWdlczoKICAtIG5naW54CiAgLSBub2RlanMKICAtIG5wbQpydW5jbWQ6CiAgLSBlY2hvICI8aDE+dm1hcHBndzA8L2gxPiIgfCB0ZWUgL3Zhci93d3cvaHRtbC9pbmRleC5uZ2lueC1kZWJpYW4uaHRtbAo=","dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":false,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"japaneast","max_bid_price":-1,"name":"vmappgw0","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Premium_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"rg-idps-appgw-azfw-0511","secret":[],"secure_boot_enabled":null,"size":"Standard_B2ms","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-focal","publisher":"Canonical","sku":"20_04-lts-gen2","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"sensitive_values":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":[{}],"boot_diagnostics":[{}],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}},{"address":"module.vm_appgw[0].azurerm_network_interface.nic","mode":"managed","type":"azurerm_network_interface","name":"nic","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"enable_accelerated_networking":false,"internal_dns_name_label":null,"ip_configuration":[{"name":"configuration","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"japaneast","name":"nic-vmappgw0","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.vm_appgw[0].azurerm_network_interface_security_group_association.example","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.vm_appgw[0].azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"japaneast","name":"nsg-vmappgw0","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"sensitive_values":{"security_rule":[]}},{"address":"module.vm_appgw[0].azurerm_network_security_rule.nsg-rule","mode":"managed","type":"azurerm_network_security_rule","name":"nsg-rule","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","80"],"direction":"Inbound","name":"remote_access","network_security_group_name":"nsg-vmappgw0","priority":100,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false,false]}},{"address":"module.vm_appgw[0].azurerm_public_ip.pip","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-vmappgw0","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}}],"address":"module.vm_appgw[0]"},{"resources":[{"address":"module.vm_appgw[1].azurerm_dev_test_global_vm_shutdown_schedule.autoshutdown","mode":"managed","type":"azurerm_dev_test_global_vm_shutdown_schedule","name":"autoshutdown","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"daily_recurrence_time":"0200","enabled":true,"location":"japaneast","notification_settings":[{"email":null,"enabled":false,"time_in_minutes":30,"webhook_url":null}],"tags":null,"timeouts":null,"timezone":"Tokyo Standard Time"},"sensitive_values":{"notification_settings":[{}]}},{"address":"module.vm_appgw[1].azurerm_linux_virtual_machine.linux","mode":"managed","type":"azurerm_linux_virtual_machine","name":"linux","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"admin_password":"Password1!","admin_ssh_key":[{"public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCythmaDMBX8Eatx5mqlF0JJ1pNGXePUreGuuAe3yQb+bWbxQJRFuMpYBpKZjZesIUfA86qwaK+c+mD2Sw5GKKIOca6Jj228gYBEBaEzFYZy5Pc3IyZL/3q41OS4kQD27+xIneDGmUnZBXCiuqsXdrw8cSMY6/Cj1tn6UsB4eN1ZZ3AJsTjoZwJSqSmApvavlYl+nPaHlN3fZFF0vwomeLKF3KWahcgIhqxpK5hnjDHWHb0S3bcBwO7NeBIeZqdDAP3Zc17jbgBWKdKy73AZrSRKJh/f8Hvx6qBTRD/IomD+jYOLBPb/gDUYACOyKxB9szwmG/8wQY1dzZNGURCpL3v","username":"adminuser"}],"admin_username":"adminuser","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[{"storage_account_uri":null}],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":"I2Nsb3VkLWNvbmZpZwpwYWNrYWdlc191cGRhdGU6IHRydWUKcGFja2FnZXNfdXBncmFkZTogdHJ1ZQpwYWNrYWdlczoKICAtIG5naW54CiAgLSBub2RlanMKICAtIG5wbQpydW5jbWQ6CiAgLSBlY2hvICI8aDE+dm1hcHBndzE8L2gxPiIgfCB0ZWUgL3Zhci93d3cvaHRtbC9pbmRleC5uZ2lueC1kZWJpYW4uaHRtbAo=","dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":false,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"japaneast","max_bid_price":-1,"name":"vmappgw1","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Premium_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"rg-idps-appgw-azfw-0511","secret":[],"secure_boot_enabled":null,"size":"Standard_B2ms","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-focal","publisher":"Canonical","sku":"20_04-lts-gen2","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"sensitive_values":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":[{}],"boot_diagnostics":[{}],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}},{"address":"module.vm_appgw[1].azurerm_network_interface.nic","mode":"managed","type":"azurerm_network_interface","name":"nic","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"enable_accelerated_networking":false,"internal_dns_name_label":null,"ip_configuration":[{"name":"configuration","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"japaneast","name":"nic-vmappgw1","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.vm_appgw[1].azurerm_network_interface_security_group_association.example","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.vm_appgw[1].azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"japaneast","name":"nsg-vmappgw1","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"sensitive_values":{"security_rule":[]}},{"address":"module.vm_appgw[1].azurerm_network_security_rule.nsg-rule","mode":"managed","type":"azurerm_network_security_rule","name":"nsg-rule","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","80"],"direction":"Inbound","name":"remote_access","network_security_group_name":"nsg-vmappgw1","priority":100,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false,false]}},{"address":"module.vm_appgw[1].azurerm_public_ip.pip","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-vmappgw1","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}}],"address":"module.vm_appgw[1]"},{"resources":[{"address":"module.webserver.azurerm_dev_test_global_vm_shutdown_schedule.autoshutdown","mode":"managed","type":"azurerm_dev_test_global_vm_shutdown_schedule","name":"autoshutdown","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"daily_recurrence_time":"0200","enabled":true,"location":"japaneast","notification_settings":[{"email":null,"enabled":false,"time_in_minutes":30,"webhook_url":null}],"tags":null,"timeouts":null,"timezone":"Tokyo Standard Time"},"sensitive_values":{"notification_settings":[{}]}},{"address":"module.webserver.azurerm_linux_virtual_machine.linux","mode":"managed","type":"azurerm_linux_virtual_machine","name":"linux","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"admin_password":"Password1!","admin_ssh_key":[{"public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCythmaDMBX8Eatx5mqlF0JJ1pNGXePUreGuuAe3yQb+bWbxQJRFuMpYBpKZjZesIUfA86qwaK+c+mD2Sw5GKKIOca6Jj228gYBEBaEzFYZy5Pc3IyZL/3q41OS4kQD27+xIneDGmUnZBXCiuqsXdrw8cSMY6/Cj1tn6UsB4eN1ZZ3AJsTjoZwJSqSmApvavlYl+nPaHlN3fZFF0vwomeLKF3KWahcgIhqxpK5hnjDHWHb0S3bcBwO7NeBIeZqdDAP3Zc17jbgBWKdKy73AZrSRKJh/f8Hvx6qBTRD/IomD+jYOLBPb/gDUYACOyKxB9szwmG/8wQY1dzZNGURCpL3v","username":"adminuser"}],"admin_username":"adminuser","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[{"storage_account_uri":null}],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":"I2Nsb3VkLWNvbmZpZwogIHBhY2thZ2VfdXBncmFkZTogdHJ1ZQogIHBhY2thZ2VzOgogICAgLSBuZ2lueAo=","dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":false,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"japaneast","max_bid_price":-1,"name":"vmfrontend","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Premium_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","secret":[],"secure_boot_enabled":null,"size":"Standard_B2ms","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-focal","publisher":"Canonical","sku":"20_04-lts-gen2","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"sensitive_values":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":[{}],"boot_diagnostics":[{}],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}},{"address":"module.webserver.azurerm_network_interface.nic","mode":"managed","type":"azurerm_network_interface","name":"nic","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"enable_accelerated_networking":false,"internal_dns_name_label":null,"ip_configuration":[{"name":"configuration","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"japaneast","name":"nic-vmfrontend","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.webserver.azurerm_network_interface_security_group_association.example","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.webserver.azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"japaneast","name":"nsg-vmfrontend","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"sensitive_values":{"security_rule":[]}},{"address":"module.webserver.azurerm_network_security_rule.nsg-rule","mode":"managed","type":"azurerm_network_security_rule","name":"nsg-rule","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","80"],"direction":"Inbound","name":"remote_access","network_security_group_name":"nsg-vmfrontend","priority":100,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"destination_port_ranges":[false,false]}},{"address":"module.webserver.azurerm_public_ip.pip","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-vmfrontend","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}}],"address":"module.webserver"}]}},"resource_changes":[{"address":"data.azurerm_monitor_diagnostic_categories.appgw_diag_category","mode":"data","type":"azurerm_monitor_diagnostic_categories","name":"appgw_diag_category","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["read"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"log_category_groups":true,"log_category_types":true,"logs":true,"metrics":true,"resource_id":true},"before_sensitive":false,"after_sensitive":{"log_category_groups":[],"log_category_types":[],"logs":[],"metrics":[]}},"action_reason":"read_because_config_unknown"},{"address":"data.azurerm_monitor_diagnostic_categories.azfw_diag_category","mode":"data","type":"azurerm_monitor_diagnostic_categories","name":"azfw_diag_category","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["read"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"log_category_groups":true,"log_category_types":true,"logs":true,"metrics":true,"resource_id":true},"before_sensitive":false,"after_sensitive":{"log_category_groups":[],"log_category_types":[],"logs":[],"metrics":[]}},"action_reason":"read_because_config_unknown"},{"address":"azurerm_application_gateway.network","mode":"managed","type":"azurerm_application_gateway","name":"network","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"ip_addresses":[],"name":"vnet-example-beap-vm"}],"backend_http_settings":[{"affinity_cookie_name":"","authentication_certificate":[],"connection_draining":[],"cookie_based_affinity":"Disabled","host_name":"","name":"vnet-example-be-htst-2","path":"/","pick_host_name_from_backend_address":true,"port":80,"probe_name":"","protocol":"Http","request_timeout":60,"trusted_root_certificate_names":[]},{"affinity_cookie_name":"","authentication_certificate":[],"connection_draining":[],"cookie_based_affinity":"Enabled","host_name":"","name":"vnet-example-be-htst","path":"","pick_host_name_from_backend_address":true,"port":80,"probe_name":"","protocol":"Http","request_timeout":60,"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"enable_http2":null,"fips_enabled":null,"firewall_policy_id":null,"force_firewall_policy_association":null,"frontend_ip_configuration":[{"name":"vnet-example-feip","private_ip_address_allocation":"Dynamic","private_link_configuration_name":null,"subnet_id":null},{"name":"vnet-example-feip-private","private_ip_address":"172.16.4.4","private_ip_address_allocation":"Static","private_link_configuration_name":"my-private-link-config","public_ip_address_id":null}],"frontend_port":[{"name":"vnet-example-8080-feport","port":8080},{"name":"vnet-example-feport","port":80}],"gateway_ip_configuration":[{"name":"my-gateway-ip-configuration"}],"global":[],"http_listener":[{"custom_error_configuration":[],"firewall_policy_id":"","frontend_ip_configuration_name":"vnet-example-feip","frontend_port_name":"vnet-example-feport","host_name":"","host_names":[],"name":"vnet-example-httplstn","protocol":"Http","require_sni":null,"ssl_certificate_name":"","ssl_profile_name":""},{"custom_error_configuration":[],"firewall_policy_id":"","frontend_ip_configuration_name":"vnet-example-feip-private","frontend_port_name":"vnet-example-8080-feport","host_name":"","host_names":[],"name":"vnet-example-httplstn-private","protocol":"Http","require_sni":null,"ssl_certificate_name":"","ssl_profile_name":""}],"identity":[],"location":"japaneast","name":"appgw-example","private_link_configuration":[{"ip_configuration":[{"name":"my-private-link-config-ip-config","primary":true,"private_ip_address_allocation":"Dynamic"}],"name":"my-private-link-config"}],"probe":[],"redirect_configuration":[],"request_routing_rule":[{"backend_address_pool_name":"","backend_http_settings_name":"","http_listener_name":"vnet-example-httplstn-private","name":"vnet-example-private-rqrt","priority":1000,"redirect_configuration_name":"","rewrite_rule_set_name":"","rule_type":"PathBasedRouting","url_path_map_name":"my-url-path-map"}],"resource_group_name":"rg-idps-appgw-azfw-0511","rewrite_rule_set":[{"name":"add-x-forwarded-for-to-url","rewrite_rule":[{"condition":[{"ignore_case":true,"negate":false,"pattern":"(\\d+\\.\\d+\\.\\d+\\.\\d+)","variable":"http_req_X-Forwarded-For"}],"name":"NewRewrite","request_header_configuration":[],"response_header_configuration":[],"rule_sequence":100,"url":[{"components":"query_string_only","path":null,"query_string":"{var_query_string}\u0026c={http_req_X-Forwarded-For_1}","reroute":false}]}]}],"sku":[{"capacity":2,"name":"WAF_v2","tier":"WAF_v2"}],"ssl_certificate":[],"ssl_profile":[],"tags":null,"timeouts":null,"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[{"default_backend_address_pool_name":"vnet-example-beap-vm","default_backend_http_settings_name":"vnet-example-be-htst","default_redirect_configuration_name":null,"default_rewrite_rule_set_name":"add-x-forwarded-for-to-url","name":"my-url-path-map","path_rule":[{"backend_address_pool_name":"vnet-example-beap-vm","backend_http_settings_name":"vnet-example-be-htst-2","firewall_policy_id":null,"name":"my-path-rule","paths":["/staging/*"],"redirect_configuration_name":null,"rewrite_rule_set_name":null}]}],"waf_configuration":[{"disabled_rule_group":[],"enabled":true,"exclusion":[],"file_upload_limit_mb":100,"firewall_mode":"Detection","max_request_body_size_kb":128,"request_body_check":true,"rule_set_type":"OWASP","rule_set_version":"3.2"}],"zones":null},"after_unknown":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":true,"id":true,"ip_addresses":[]}],"backend_http_settings":[{"authentication_certificate":[],"connection_draining":[],"id":true,"probe_id":true,"trusted_root_certificate_names":[]},{"authentication_certificate":[],"connection_draining":[],"id":true,"probe_id":true,"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"frontend_ip_configuration":[{"id":true,"private_ip_address":true,"private_link_configuration_id":true,"public_ip_address_id":true},{"id":true,"private_link_configuration_id":true,"subnet_id":true}],"frontend_port":[{"id":true},{"id":true}],"gateway_ip_configuration":[{"id":true,"subnet_id":true}],"global":[],"http_listener":[{"custom_error_configuration":[],"frontend_ip_configuration_id":true,"frontend_port_id":true,"host_names":[],"id":true,"ssl_certificate_id":true,"ssl_profile_id":true},{"custom_error_configuration":[],"frontend_ip_configuration_id":true,"frontend_port_id":true,"host_names":[],"id":true,"ssl_certificate_id":true,"ssl_profile_id":true}],"id":true,"identity":[],"private_endpoint_connection":true,"private_link_configuration":[{"id":true,"ip_configuration":[{"private_ip_address":true,"subnet_id":true}]}],"probe":[],"redirect_configuration":[],"request_routing_rule":[{"backend_address_pool_id":true,"backend_http_settings_id":true,"http_listener_id":true,"id":true,"redirect_configuration_id":true,"rewrite_rule_set_id":true,"url_path_map_id":true}],"rewrite_rule_set":[{"id":true,"rewrite_rule":[{"condition":[{}],"request_header_configuration":[],"response_header_configuration":[],"url":[{}]}]}],"sku":[{}],"ssl_certificate":[],"ssl_policy":true,"ssl_profile":[],"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[{"default_backend_address_pool_id":true,"default_backend_http_settings_id":true,"default_redirect_configuration_id":true,"default_rewrite_rule_set_id":true,"id":true,"path_rule":[{"backend_address_pool_id":true,"backend_http_settings_id":true,"id":true,"paths":[false],"redirect_configuration_id":true,"rewrite_rule_set_id":true}]}],"waf_configuration":[{"disabled_rule_group":[],"exclusion":[]}]},"before_sensitive":false,"after_sensitive":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[]}],"backend_http_settings":[{"authentication_certificate":[],"connection_draining":[],"trusted_root_certificate_names":[]},{"authentication_certificate":[],"connection_draining":[],"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"frontend_ip_configuration":[{},{}],"frontend_port":[{},{}],"gateway_ip_configuration":[{}],"global":[],"http_listener":[{"custom_error_configuration":[],"host_names":[]},{"custom_error_configuration":[],"host_names":[]}],"identity":[],"private_endpoint_connection":[],"private_link_configuration":[{"ip_configuration":[{}]}],"probe":[],"redirect_configuration":[],"request_routing_rule":[{}],"rewrite_rule_set":[{"rewrite_rule":[{"condition":[{}],"request_header_configuration":[],"response_header_configuration":[],"url":[{}]}]}],"sku":[{}],"ssl_certificate":[],"ssl_policy":[],"ssl_profile":[],"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[{"path_rule":[{"paths":[false]}]}],"waf_configuration":[{"disabled_rule_group":[],"exclusion":[]}]}}},{"address":"azurerm_private_endpoint.example","mode":"managed","type":"azurerm_private_endpoint","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"custom_network_interface_name":null,"ip_configuration":[],"location":"japaneast","name":"pe-to-backend-appgw","private_dns_zone_group":[],"private_service_connection":[{"is_manual_connection":false,"name":"example-privateserviceconnection","private_connection_resource_alias":null,"request_message":null,"subresource_names":["vnet-example-feip-private"]}],"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"after_unknown":{"custom_dns_configs":true,"id":true,"ip_configuration":[],"network_interface":true,"private_dns_zone_configs":true,"private_dns_zone_group":[],"private_service_connection":[{"private_connection_resource_id":true,"private_ip_address":true,"subresource_names":[false]}],"subnet_id":true},"before_sensitive":false,"after_sensitive":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[],"private_service_connection":[{"subresource_names":[false]}]}}},{"address":"azurerm_public_ip.appgw","mode":"managed","type":"azurerm_public_ip","name":"appgw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-appgw","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":["1","2","3"]},"after_unknown":{"fqdn":true,"id":true,"ip_address":true,"zones":[false,false,false]},"before_sensitive":false,"after_sensitive":{"zones":[false,false,false]}}},{"address":"azurerm_resource_group.example","mode":"managed","type":"azurerm_resource_group","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","managed_by":null,"name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_resource_group.frontend","mode":"managed","type":"azurerm_resource_group","name":"frontend","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","managed_by":null,"name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_route_table.appgw","mode":"managed","type":"azurerm_route_table","name":"appgw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"disable_bgp_route_propagation":true,"location":"japaneast","name":"rt-appgw","resource_group_name":"rg-idps-appgw-azfw-0511","route":[{"address_prefix":"172.16.0.0/24","name":"to-default","next_hop_type":"VirtualAppliance"}],"tags":null,"timeouts":null},"after_unknown":{"bgp_route_propagation_enabled":true,"id":true,"route":[{"next_hop_in_ip_address":true}],"subnets":true},"before_sensitive":false,"after_sensitive":{"route":[{}],"subnets":[]}}},{"address":"azurerm_route_table.azfw","mode":"managed","type":"azurerm_route_table","name":"azfw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","name":"route-azfw","resource_group_name":"rg-idps-appgw-azfw-0511","route":[{"address_prefix":"0.0.0.0/0","name":"default","next_hop_in_ip_address":"","next_hop_type":"Internet"}],"tags":null,"timeouts":null},"after_unknown":{"bgp_route_propagation_enabled":true,"disable_bgp_route_propagation":true,"id":true,"route":[{}],"subnets":true},"before_sensitive":false,"after_sensitive":{"route":[{}],"subnets":[]}}},{"address":"azurerm_route_table.default","mode":"managed","type":"azurerm_route_table","name":"default","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"disable_bgp_route_propagation":true,"location":"japaneast","name":"rt-default","resource_group_name":"rg-idps-appgw-azfw-0511","route":[{"address_prefix":"0.0.0.0/0","name":"default","next_hop_type":"VirtualAppliance"},{"address_prefix":"172.16.4.0/24","name":"to-appgw","next_hop_type":"VirtualAppliance"}],"tags":null,"timeouts":null},"after_unknown":{"bgp_route_propagation_enabled":true,"id":true,"route":[{"next_hop_in_ip_address":true},{"next_hop_in_ip_address":true}],"subnets":true},"before_sensitive":false,"after_sensitive":{"route":[{},{}],"subnets":[]}}},{"address":"azurerm_route_table.vm","mode":"managed","type":"azurerm_route_table","name":"vm","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"disable_bgp_route_propagation":false,"location":"japaneast","name":"rt-fe-vm","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","route":[{"address_prefix":"0.0.0.0/0","name":"default","next_hop_type":"VirtualAppliance"},{"address_prefix":"10.254.2.0/24","name":"backend","next_hop_type":"VirtualAppliance"}],"tags":null,"timeouts":null},"after_unknown":{"bgp_route_propagation_enabled":true,"id":true,"route":[{"next_hop_in_ip_address":true},{"next_hop_in_ip_address":true}],"subnets":true},"before_sensitive":false,"after_sensitive":{"route":[{},{}],"subnets":[]}}},{"address":"azurerm_subnet.appgw","mode":"managed","type":"azurerm_subnet","name":"appgw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["172.16.4.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-appgw","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.azfw","mode":"managed","type":"azurerm_subnet","name":"azfw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["172.16.3.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureFirewallSubnet","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.bastion","mode":"managed","type":"azurerm_subnet","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["172.16.2.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureBastionSubnet","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.default","mode":"managed","type":"azurerm_subnet","name":"default","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["172.16.0.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-default","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.default2","mode":"managed","type":"azurerm_subnet","name":"default2","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["172.16.5.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-default-backend-appgw","resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.fe_azfw","mode":"managed","type":"azurerm_subnet","name":"fe_azfw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.254.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureFirewallSubnet","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-azfwprem"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.fe_bastion","mode":"managed","type":"azurerm_subnet","name":"fe_bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.254.3.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureBastionSubnet","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-azfwprem"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.fe_vm","mode":"managed","type":"azurerm_subnet","name":"fe_vm","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.254.0.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-vm","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-azfwprem"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.pe","mode":"managed","type":"azurerm_subnet","name":"pe","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.254.2.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-pe","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-azfwprem"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet.pls","mode":"managed","type":"azurerm_subnet","name":"pls","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["172.16.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"snet-pls","private_endpoint_network_policies_enabled":false,"private_link_service_network_policies_enabled":false,"resource_group_name":"rg-idps-appgw-azfw-0511","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vnet-example"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_subnet_route_table_association.azfw","mode":"managed","type":"azurerm_subnet_route_table_association","name":"azfw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_subnet_route_table_association.fe_vm[0]","mode":"managed","type":"azurerm_subnet_route_table_association","name":"fe_vm","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_virtual_network.example","mode":"managed","type":"azurerm_virtual_network","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["172.16.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"japaneast","name":"vnet-example","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"encryption":[],"guid":true,"id":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}},{"address":"azurerm_virtual_network.frontend","mode":"managed","type":"azurerm_virtual_network","name":"frontend","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.254.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"japaneast","name":"vnet-azfwprem","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"encryption":[],"guid":true,"id":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}},{"address":"random_string.uniqstr","mode":"managed","type":"random_string","name":"uniqstr","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":{"resource_group_name":"rg-idps-appgw-azfw-0511"},"length":6,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"keepers":{},"result":true},"before_sensitive":false,"after_sensitive":{"keepers":{}}}},{"address":"module.afw_diag.azurerm_monitor_diagnostic_setting.diagnostic_logs","module_address":"module.afw_diag","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"diagnostic_logs","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"eventhub_authorization_rule_id":null,"eventhub_name":null,"metric":[{"category":"AllMetrics","enabled":false,"retention_policy":[]}],"name":"diag","partner_solution_id":null,"storage_account_id":null,"timeouts":null},"after_unknown":{"enabled_log":true,"id":true,"log":true,"log_analytics_destination_type":true,"log_analytics_workspace_id":true,"metric":[{"retention_policy":[]}],"target_resource_id":true},"before_sensitive":false,"after_sensitive":{"enabled_log":[],"log":[],"metric":[{"retention_policy":[]}]}}},{"address":"module.appgw_diag.azurerm_monitor_diagnostic_setting.diagnostic_logs","module_address":"module.appgw_diag","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"diagnostic_logs","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"eventhub_authorization_rule_id":null,"eventhub_name":null,"metric":[{"category":"AllMetrics","enabled":false,"retention_policy":[]}],"name":"diag","partner_solution_id":null,"storage_account_id":null,"timeouts":null},"after_unknown":{"enabled_log":true,"id":true,"log":true,"log_analytics_destination_type":true,"log_analytics_workspace_id":true,"metric":[{"retention_policy":[]}],"target_resource_id":true},"before_sensitive":false,"after_sensitive":{"enabled_log":[],"log":[],"metric":[{"retention_policy":[]}]}}},{"address":"module.azfw.azurerm_firewall.example","module_address":"module.azfw","mode":"managed","type":"azurerm_firewall","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"dns_servers":null,"ip_configuration":[{"name":"configuration"}],"location":"japaneast","management_ip_configuration":[],"name":"afw-example","private_ip_ranges":null,"resource_group_name":"rg-idps-appgw-azfw-0511","sku_name":"AZFW_VNet","sku_tier":"Premium","tags":null,"timeouts":null,"virtual_hub":[],"zones":["1","2","3"]},"after_unknown":{"dns_proxy_enabled":true,"firewall_policy_id":true,"id":true,"ip_configuration":[{"private_ip_address":true,"public_ip_address_id":true,"subnet_id":true}],"management_ip_configuration":[],"threat_intel_mode":true,"virtual_hub":[],"zones":[false,false,false]},"before_sensitive":false,"after_sensitive":{"ip_configuration":[{}],"management_ip_configuration":[],"virtual_hub":[],"zones":[false,false,false]}}},{"address":"module.azfw.azurerm_firewall_policy.example","module_address":"module.azfw","mode":"managed","type":"azurerm_firewall_policy","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auto_learn_private_ranges_enabled":null,"base_policy_id":null,"dns":[],"explicit_proxy":[],"identity":[],"insights":[],"intrusion_detection":[],"location":"japaneast","name":"afwp-example","private_ip_ranges":null,"resource_group_name":"rg-idps-appgw-azfw-0511","sku":"Premium","sql_redirect_allowed":null,"tags":null,"threat_intelligence_allowlist":[],"threat_intelligence_mode":"Alert","timeouts":null,"tls_certificate":[]},"after_unknown":{"child_policies":true,"dns":[],"explicit_proxy":[],"firewalls":true,"id":true,"identity":[],"insights":[],"intrusion_detection":[],"rule_collection_groups":true,"threat_intelligence_allowlist":[],"tls_certificate":[]},"before_sensitive":false,"after_sensitive":{"child_policies":[],"dns":[],"explicit_proxy":[],"firewalls":[],"identity":[],"insights":[],"intrusion_detection":[],"rule_collection_groups":[],"threat_intelligence_allowlist":[],"tls_certificate":[]}}},{"address":"module.azfw.azurerm_firewall_policy_rule_collection_group.example","module_address":"module.azfw","mode":"managed","type":"azurerm_firewall_policy_rule_collection_group","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"application_rule_collection":[{"action":"Allow","name":"AllowApplicationRuleCollection","priority":2000,"rule":[{"description":null,"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":["*"],"destination_urls":[],"http_headers":[],"name":"All","protocols":[{"port":80,"type":"Http"},{"port":443,"type":"Https"}],"source_addresses":["*"],"source_ip_groups":[],"terminate_tls":false,"web_categories":[]}]}],"name":"RuleCollectionGroup","nat_rule_collection":[{"action":"Dnat","name":"TestDnatRule_SSH-SpokeVM","priority":500,"rule":[{"description":null,"destination_ports":["22"],"name":"SSH","protocols":["TCP"],"source_addresses":["*"],"source_ip_groups":null,"translated_address":"1.1.1.1","translated_fqdn":null,"translated_port":22}]}],"network_rule_collection":[{"action":"Allow","name":"AllowNetworkRuleCollection","priority":1000,"rule":[{"description":null,"destination_addresses":["*"],"destination_fqdns":[],"destination_ip_groups":null,"destination_ports":["*"],"name":"All","protocols":["Any"],"source_addresses":["*"],"source_ip_groups":null}]}],"priority":1000,"timeouts":null},"after_unknown":{"application_rule_collection":[{"rule":[{"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":[false],"destination_urls":[],"http_headers":[],"protocols":[{},{}],"source_addresses":[false],"source_ip_groups":[],"web_categories":[]}]}],"firewall_policy_id":true,"id":true,"nat_rule_collection":[{"rule":[{"destination_address":true,"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}],"network_rule_collection":[{"rule":[{"destination_addresses":[false],"destination_fqdns":[],"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}]},"before_sensitive":false,"after_sensitive":{"application_rule_collection":[{"rule":[{"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":[false],"destination_urls":[],"http_headers":[],"protocols":[{},{}],"source_addresses":[false],"source_ip_groups":[],"web_categories":[]}]}],"nat_rule_collection":[{"rule":[{"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}],"network_rule_collection":[{"rule":[{"destination_addresses":[false],"destination_fqdns":[],"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}]}}},{"address":"module.azfw.azurerm_public_ip.example","module_address":"module.azfw","mode":"managed","type":"azurerm_public_ip","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-fw-example","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":["1","2","3"]},"after_unknown":{"fqdn":true,"id":true,"ip_address":true,"zones":[false,false,false]},"before_sensitive":false,"after_sensitive":{"zones":[false,false,false]}}},{"address":"module.azfw_diag.azurerm_monitor_diagnostic_setting.diagnostic_logs","module_address":"module.azfw_diag","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"diagnostic_logs","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"eventhub_authorization_rule_id":null,"eventhub_name":null,"metric":[{"category":"AllMetrics","enabled":false,"retention_policy":[]}],"name":"diag","partner_solution_id":null,"storage_account_id":null,"timeouts":null},"after_unknown":{"enabled_log":true,"id":true,"log":true,"log_analytics_destination_type":true,"log_analytics_workspace_id":true,"metric":[{"retention_policy":[]}],"target_resource_id":true},"before_sensitive":false,"after_sensitive":{"enabled_log":[],"log":[],"metric":[{"retention_policy":[]}]}}},{"address":"module.bastion.azurerm_bastion_host.bastion","module_address":"module.bastion","mode":"managed","type":"azurerm_bastion_host","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"copy_paste_enabled":true,"file_copy_enabled":false,"ip_configuration":[{"name":"configuration"}],"ip_connect_enabled":true,"kerberos_enabled":false,"location":"japaneast","name":"bastion","resource_group_name":"rg-idps-appgw-azfw-0511","scale_units":2,"shareable_link_enabled":true,"sku":"Standard","tags":null,"timeouts":null,"tunneling_enabled":true,"virtual_network_id":null},"after_unknown":{"dns_name":true,"id":true,"ip_configuration":[{"public_ip_address_id":true,"subnet_id":true}]},"before_sensitive":false,"after_sensitive":{"ip_configuration":[{}]}}},{"address":"module.bastion.azurerm_network_security_group.bastion","module_address":"module.bastion","mode":"managed","type":"azurerm_network_security_group","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","name":"nsg-bastion","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":true},"before_sensitive":false,"after_sensitive":{"security_rule":[]}}},{"address":"module.bastion.azurerm_network_security_rule.bastion-azurecloud-out","module_address":"module.bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-azurecloud-out","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"AzureCloud","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["443"],"direction":"Outbound","name":"AllowAzureCloudOutbound","network_security_group_name":"nsg-bastion","priority":130,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false]}}},{"address":"module.bastion.azurerm_network_security_rule.bastion-bastioncommunication-out","module_address":"module.bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-bastioncommunication-out","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["5701","8080"],"direction":"Outbound","name":"AllowBastionCommunication","network_security_group_name":"nsg-bastion","priority":140,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false,false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false,false]}}},{"address":"module.bastion.azurerm_network_security_rule.bastion-gsi-out","module_address":"module.bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gsi-out","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"Internet","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["80"],"direction":"Outbound","name":"AllowGetSesssionInformation","network_security_group_name":"nsg-bastion","priority":150,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false]}}},{"address":"module.bastion.azurerm_network_security_rule.bastion-gwm","module_address":"module.bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gwm","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowGatewayManagerInbound","network_security_group_name":"nsg-bastion","priority":130,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"GatewayManager","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.bastion.azurerm_network_security_rule.bastion-hc","module_address":"module.bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-hc","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["5701","8080"],"direction":"Inbound","name":"AllowBastionHostCommunication","network_security_group_name":"nsg-bastion","priority":150,"protocol":"*","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false,false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false,false]}}},{"address":"module.bastion.azurerm_network_security_rule.bastion-https","module_address":"module.bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-https","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowHttpsInbound","network_security_group_name":"nsg-bastion","priority":120,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"Internet","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.bastion.azurerm_network_security_rule.bastion-lb","module_address":"module.bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-lb","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowAzureLoadBalancerInbound","network_security_group_name":"nsg-bastion","priority":140,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"AzureLoadBalancer","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.bastion.azurerm_network_security_rule.bastion-sshrdp-out","module_address":"module.bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-sshrdp-out","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","3389"],"direction":"Outbound","name":"AllowSshRdpOutbound","network_security_group_name":"nsg-bastion","priority":120,"protocol":"*","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false,false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false,false]}}},{"address":"module.bastion.azurerm_public_ip.bastion","module_address":"module.bastion","mode":"managed","type":"azurerm_public_ip","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-bastion","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.bastion.azurerm_subnet_network_security_group_association.hub-bastion","module_address":"module.bastion","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"hub-bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_security_group_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.fe_azfw.azurerm_firewall.example","module_address":"module.fe_azfw","mode":"managed","type":"azurerm_firewall","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"dns_servers":null,"ip_configuration":[{"name":"configuration"}],"location":"japaneast","management_ip_configuration":[],"private_ip_ranges":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","sku_name":"AZFW_VNet","sku_tier":"Premium","tags":null,"timeouts":null,"virtual_hub":[],"zones":["1","2","3"]},"after_unknown":{"dns_proxy_enabled":true,"firewall_policy_id":true,"id":true,"ip_configuration":[{"private_ip_address":true,"public_ip_address_id":true,"subnet_id":true}],"management_ip_configuration":[],"name":true,"threat_intel_mode":true,"virtual_hub":[],"zones":[false,false,false]},"before_sensitive":false,"after_sensitive":{"ip_configuration":[{}],"management_ip_configuration":[],"virtual_hub":[],"zones":[false,false,false]}}},{"address":"module.fe_azfw.azurerm_firewall_policy.example","module_address":"module.fe_azfw","mode":"managed","type":"azurerm_firewall_policy","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auto_learn_private_ranges_enabled":null,"base_policy_id":null,"dns":[],"explicit_proxy":[],"identity":[],"insights":[],"intrusion_detection":[],"location":"japaneast","private_ip_ranges":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","sku":"Premium","sql_redirect_allowed":null,"tags":null,"threat_intelligence_allowlist":[],"threat_intelligence_mode":"Alert","timeouts":null,"tls_certificate":[]},"after_unknown":{"child_policies":true,"dns":[],"explicit_proxy":[],"firewalls":true,"id":true,"identity":[],"insights":[],"intrusion_detection":[],"name":true,"rule_collection_groups":true,"threat_intelligence_allowlist":[],"tls_certificate":[]},"before_sensitive":false,"after_sensitive":{"child_policies":[],"dns":[],"explicit_proxy":[],"firewalls":[],"identity":[],"insights":[],"intrusion_detection":[],"rule_collection_groups":[],"threat_intelligence_allowlist":[],"tls_certificate":[]}}},{"address":"module.fe_azfw.azurerm_firewall_policy_rule_collection_group.example","module_address":"module.fe_azfw","mode":"managed","type":"azurerm_firewall_policy_rule_collection_group","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"application_rule_collection":[{"action":"Allow","name":"AllowApplicationRuleCollection","priority":2000,"rule":[{"description":null,"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":["*"],"destination_urls":[],"http_headers":[],"name":"All","protocols":[{"port":80,"type":"Http"},{"port":8080,"type":"Http"},{"port":443,"type":"Https"}],"source_addresses":["*"],"source_ip_groups":[],"terminate_tls":false,"web_categories":[]}]}],"name":"RuleCollectionGroup","nat_rule_collection":[{"action":"Dnat","name":"TestDnatRule_SSH-SpokeVM","priority":500,"rule":[{"description":null,"destination_ports":["22"],"name":"SSH","protocols":["TCP"],"source_addresses":["*"],"source_ip_groups":null,"translated_address":"1.1.1.1","translated_fqdn":null,"translated_port":22}]}],"network_rule_collection":[{"action":"Allow","name":"AllowNetworkRuleCollection","priority":1000,"rule":[{"description":null,"destination_addresses":["*"],"destination_fqdns":[],"destination_ip_groups":null,"destination_ports":["*"],"name":"All","protocols":["TCP"],"source_addresses":["1.2.3.4"],"source_ip_groups":null}]}],"priority":1000,"timeouts":null},"after_unknown":{"application_rule_collection":[{"rule":[{"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":[false],"destination_urls":[],"http_headers":[],"protocols":[{},{},{}],"source_addresses":[false],"source_ip_groups":[],"web_categories":[]}]}],"firewall_policy_id":true,"id":true,"nat_rule_collection":[{"rule":[{"destination_address":true,"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}],"network_rule_collection":[{"rule":[{"destination_addresses":[false],"destination_fqdns":[],"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}]},"before_sensitive":false,"after_sensitive":{"application_rule_collection":[{"rule":[{"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":[false],"destination_urls":[],"http_headers":[],"protocols":[{},{},{}],"source_addresses":[false],"source_ip_groups":[],"web_categories":[]}]}],"nat_rule_collection":[{"rule":[{"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}],"network_rule_collection":[{"rule":[{"destination_addresses":[false],"destination_fqdns":[],"destination_ports":[false],"protocols":[false],"source_addresses":[false]}]}]}}},{"address":"module.fe_azfw.azurerm_public_ip.example","module_address":"module.fe_azfw","mode":"managed","type":"azurerm_public_ip","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":["1","2","3"]},"after_unknown":{"fqdn":true,"id":true,"ip_address":true,"name":true,"zones":[false,false,false]},"before_sensitive":false,"after_sensitive":{"zones":[false,false,false]}}},{"address":"module.fe_bastion.azurerm_bastion_host.bastion","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_bastion_host","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"copy_paste_enabled":true,"file_copy_enabled":false,"ip_configuration":[{"name":"configuration"}],"ip_connect_enabled":true,"kerberos_enabled":false,"location":"japaneast","name":"bastion-frontend","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","scale_units":2,"shareable_link_enabled":true,"sku":"Standard","tags":null,"timeouts":null,"tunneling_enabled":true,"virtual_network_id":null},"after_unknown":{"dns_name":true,"id":true,"ip_configuration":[{"public_ip_address_id":true,"subnet_id":true}]},"before_sensitive":false,"after_sensitive":{"ip_configuration":[{}]}}},{"address":"module.fe_bastion.azurerm_network_security_group.bastion","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_network_security_group","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","name":"nsg-bastion-frontend","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":true},"before_sensitive":false,"after_sensitive":{"security_rule":[]}}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-azurecloud-out","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-azurecloud-out","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"AzureCloud","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["443"],"direction":"Outbound","name":"AllowAzureCloudOutbound","network_security_group_name":"nsg-bastion-frontend","priority":130,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false]}}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-bastioncommunication-out","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-bastioncommunication-out","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["5701","8080"],"direction":"Outbound","name":"AllowBastionCommunication","network_security_group_name":"nsg-bastion-frontend","priority":140,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false,false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false,false]}}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-gsi-out","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gsi-out","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"Internet","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["80"],"direction":"Outbound","name":"AllowGetSesssionInformation","network_security_group_name":"nsg-bastion-frontend","priority":150,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false]}}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-gwm","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gwm","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowGatewayManagerInbound","network_security_group_name":"nsg-bastion-frontend","priority":130,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"GatewayManager","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-hc","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-hc","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["5701","8080"],"direction":"Inbound","name":"AllowBastionHostCommunication","network_security_group_name":"nsg-bastion-frontend","priority":150,"protocol":"*","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false,false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false,false]}}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-https","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-https","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowHttpsInbound","network_security_group_name":"nsg-bastion-frontend","priority":120,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"Internet","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-lb","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-lb","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Inbound","name":"AllowAzureLoadBalancerInbound","network_security_group_name":"nsg-bastion-frontend","priority":140,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"AzureLoadBalancer","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.fe_bastion.azurerm_network_security_rule.bastion-sshrdp-out","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-sshrdp-out","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":"","destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","3389"],"direction":"Outbound","name":"AllowSshRdpOutbound","network_security_group_name":"nsg-bastion-frontend","priority":120,"protocol":"*","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false,false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false,false]}}},{"address":"module.fe_bastion.azurerm_public_ip.bastion","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_public_ip","name":"bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-bastion-frontend","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.fe_bastion.azurerm_subnet_network_security_group_association.hub-bastion","module_address":"module.fe_bastion","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"hub-bastion","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_security_group_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.la.azurerm_log_analytics_solution.container","module_address":"module.la","mode":"managed","type":"azurerm_log_analytics_solution","name":"container","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","plan":[{"product":"OMSGallery/ContainerInsights","promotion_code":null,"publisher":"Microsoft"}],"resource_group_name":"rg-idps-appgw-azfw-0511","solution_name":"ContainerInsights","tags":null,"timeouts":null},"after_unknown":{"id":true,"plan":[{"name":true}],"workspace_name":true,"workspace_resource_id":true},"before_sensitive":false,"after_sensitive":{"plan":[{}]}}},{"address":"module.la.azurerm_log_analytics_solution.vms","module_address":"module.la","mode":"managed","type":"azurerm_log_analytics_solution","name":"vms","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","plan":[{"product":"OMSGallery/VMInsights","promotion_code":null,"publisher":"Microsoft"}],"resource_group_name":"rg-idps-appgw-azfw-0511","solution_name":"VMInsights","tags":null,"timeouts":null},"after_unknown":{"id":true,"plan":[{"name":true}],"workspace_name":true,"workspace_resource_id":true},"before_sensitive":false,"after_sensitive":{"plan":[{}]}}},{"address":"module.la.azurerm_log_analytics_workspace.log_analytics","module_address":"module.la","mode":"managed","type":"azurerm_log_analytics_workspace","name":"log_analytics","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allow_resource_only_permissions":true,"cmk_for_query_forced":null,"daily_quota_gb":-1,"data_collection_rule_id":null,"identity":[],"immediate_data_purge_on_30_days_enabled":null,"internet_ingestion_enabled":true,"internet_query_enabled":true,"local_authentication_disabled":false,"location":"japaneast","reservation_capacity_in_gb_per_day":null,"resource_group_name":"rg-idps-appgw-azfw-0511","retention_in_days":30,"tags":null,"timeouts":null},"after_unknown":{"id":true,"identity":[],"name":true,"primary_shared_key":true,"secondary_shared_key":true,"sku":true,"workspace_id":true},"before_sensitive":false,"after_sensitive":{"identity":[],"primary_shared_key":true,"secondary_shared_key":true}}},{"address":"module.vm_appgw[0].azurerm_dev_test_global_vm_shutdown_schedule.autoshutdown","module_address":"module.vm_appgw[0]","mode":"managed","type":"azurerm_dev_test_global_vm_shutdown_schedule","name":"autoshutdown","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"daily_recurrence_time":"0200","enabled":true,"location":"japaneast","notification_settings":[{"email":null,"enabled":false,"time_in_minutes":30,"webhook_url":null}],"tags":null,"timeouts":null,"timezone":"Tokyo Standard Time"},"after_unknown":{"id":true,"notification_settings":[{}],"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"notification_settings":[{}]}}},{"address":"module.vm_appgw[0].azurerm_linux_virtual_machine.linux","module_address":"module.vm_appgw[0]","mode":"managed","type":"azurerm_linux_virtual_machine","name":"linux","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"admin_password":"Password1!","admin_ssh_key":[{"public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCythmaDMBX8Eatx5mqlF0JJ1pNGXePUreGuuAe3yQb+bWbxQJRFuMpYBpKZjZesIUfA86qwaK+c+mD2Sw5GKKIOca6Jj228gYBEBaEzFYZy5Pc3IyZL/3q41OS4kQD27+xIneDGmUnZBXCiuqsXdrw8cSMY6/Cj1tn6UsB4eN1ZZ3AJsTjoZwJSqSmApvavlYl+nPaHlN3fZFF0vwomeLKF3KWahcgIhqxpK5hnjDHWHb0S3bcBwO7NeBIeZqdDAP3Zc17jbgBWKdKy73AZrSRKJh/f8Hvx6qBTRD/IomD+jYOLBPb/gDUYACOyKxB9szwmG/8wQY1dzZNGURCpL3v","username":"adminuser"}],"admin_username":"adminuser","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[{"storage_account_uri":null}],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":"I2Nsb3VkLWNvbmZpZwpwYWNrYWdlc191cGRhdGU6IHRydWUKcGFja2FnZXNfdXBncmFkZTogdHJ1ZQpwYWNrYWdlczoKICAtIG5naW54CiAgLSBub2RlanMKICAtIG5wbQpydW5jbWQ6CiAgLSBlY2hvICI8aDE+dm1hcHBndzA8L2gxPiIgfCB0ZWUgL3Zhci93d3cvaHRtbC9pbmRleC5uZ2lueC1kZWJpYW4uaHRtbAo=","dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":false,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"japaneast","max_bid_price":-1,"name":"vmappgw0","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Premium_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"rg-idps-appgw-azfw-0511","secret":[],"secure_boot_enabled":null,"size":"Standard_B2ms","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-focal","publisher":"Canonical","sku":"20_04-lts-gen2","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"after_unknown":{"additional_capabilities":[],"admin_ssh_key":[{}],"boot_diagnostics":[{}],"computer_name":true,"disk_controller_type":true,"gallery_application":[],"id":true,"identity":[],"network_interface_ids":true,"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true,"name":true}],"os_image_notification":[],"plan":[],"private_ip_address":true,"private_ip_addresses":true,"public_ip_address":true,"public_ip_addresses":true,"secret":[],"source_image_reference":[{}],"termination_notification":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":[{}],"boot_diagnostics":[{}],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}}},{"address":"module.vm_appgw[0].azurerm_network_interface.nic","module_address":"module.vm_appgw[0]","mode":"managed","type":"azurerm_network_interface","name":"nic","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"enable_accelerated_networking":false,"internal_dns_name_label":null,"ip_configuration":[{"name":"configuration","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"japaneast","name":"nic-vmappgw0","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"public_ip_address_id":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.vm_appgw[0].azurerm_network_interface_security_group_association.example","module_address":"module.vm_appgw[0]","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_interface_id":true,"network_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vm_appgw[0].azurerm_network_security_group.nsg","module_address":"module.vm_appgw[0]","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","name":"nsg-vmappgw0","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":true},"before_sensitive":false,"after_sensitive":{"security_rule":[]}}},{"address":"module.vm_appgw[0].azurerm_network_security_rule.nsg-rule","module_address":"module.vm_appgw[0]","mode":"managed","type":"azurerm_network_security_rule","name":"nsg-rule","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","80"],"direction":"Inbound","name":"remote_access","network_security_group_name":"nsg-vmappgw0","priority":100,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false,false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false,false]}}},{"address":"module.vm_appgw[0].azurerm_public_ip.pip","module_address":"module.vm_appgw[0]","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-vmappgw0","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vm_appgw[1].azurerm_dev_test_global_vm_shutdown_schedule.autoshutdown","module_address":"module.vm_appgw[1]","mode":"managed","type":"azurerm_dev_test_global_vm_shutdown_schedule","name":"autoshutdown","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"daily_recurrence_time":"0200","enabled":true,"location":"japaneast","notification_settings":[{"email":null,"enabled":false,"time_in_minutes":30,"webhook_url":null}],"tags":null,"timeouts":null,"timezone":"Tokyo Standard Time"},"after_unknown":{"id":true,"notification_settings":[{}],"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"notification_settings":[{}]}}},{"address":"module.vm_appgw[1].azurerm_linux_virtual_machine.linux","module_address":"module.vm_appgw[1]","mode":"managed","type":"azurerm_linux_virtual_machine","name":"linux","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"admin_password":"Password1!","admin_ssh_key":[{"public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCythmaDMBX8Eatx5mqlF0JJ1pNGXePUreGuuAe3yQb+bWbxQJRFuMpYBpKZjZesIUfA86qwaK+c+mD2Sw5GKKIOca6Jj228gYBEBaEzFYZy5Pc3IyZL/3q41OS4kQD27+xIneDGmUnZBXCiuqsXdrw8cSMY6/Cj1tn6UsB4eN1ZZ3AJsTjoZwJSqSmApvavlYl+nPaHlN3fZFF0vwomeLKF3KWahcgIhqxpK5hnjDHWHb0S3bcBwO7NeBIeZqdDAP3Zc17jbgBWKdKy73AZrSRKJh/f8Hvx6qBTRD/IomD+jYOLBPb/gDUYACOyKxB9szwmG/8wQY1dzZNGURCpL3v","username":"adminuser"}],"admin_username":"adminuser","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[{"storage_account_uri":null}],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":"I2Nsb3VkLWNvbmZpZwpwYWNrYWdlc191cGRhdGU6IHRydWUKcGFja2FnZXNfdXBncmFkZTogdHJ1ZQpwYWNrYWdlczoKICAtIG5naW54CiAgLSBub2RlanMKICAtIG5wbQpydW5jbWQ6CiAgLSBlY2hvICI8aDE+dm1hcHBndzE8L2gxPiIgfCB0ZWUgL3Zhci93d3cvaHRtbC9pbmRleC5uZ2lueC1kZWJpYW4uaHRtbAo=","dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":false,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"japaneast","max_bid_price":-1,"name":"vmappgw1","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Premium_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"rg-idps-appgw-azfw-0511","secret":[],"secure_boot_enabled":null,"size":"Standard_B2ms","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-focal","publisher":"Canonical","sku":"20_04-lts-gen2","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"after_unknown":{"additional_capabilities":[],"admin_ssh_key":[{}],"boot_diagnostics":[{}],"computer_name":true,"disk_controller_type":true,"gallery_application":[],"id":true,"identity":[],"network_interface_ids":true,"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true,"name":true}],"os_image_notification":[],"plan":[],"private_ip_address":true,"private_ip_addresses":true,"public_ip_address":true,"public_ip_addresses":true,"secret":[],"source_image_reference":[{}],"termination_notification":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":[{}],"boot_diagnostics":[{}],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}}},{"address":"module.vm_appgw[1].azurerm_network_interface.nic","module_address":"module.vm_appgw[1]","mode":"managed","type":"azurerm_network_interface","name":"nic","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"enable_accelerated_networking":false,"internal_dns_name_label":null,"ip_configuration":[{"name":"configuration","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"japaneast","name":"nic-vmappgw1","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"public_ip_address_id":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.vm_appgw[1].azurerm_network_interface_security_group_association.example","module_address":"module.vm_appgw[1]","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_interface_id":true,"network_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vm_appgw[1].azurerm_network_security_group.nsg","module_address":"module.vm_appgw[1]","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","name":"nsg-vmappgw1","resource_group_name":"rg-idps-appgw-azfw-0511","tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":true},"before_sensitive":false,"after_sensitive":{"security_rule":[]}}},{"address":"module.vm_appgw[1].azurerm_network_security_rule.nsg-rule","module_address":"module.vm_appgw[1]","mode":"managed","type":"azurerm_network_security_rule","name":"nsg-rule","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","80"],"direction":"Inbound","name":"remote_access","network_security_group_name":"nsg-vmappgw1","priority":100,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false,false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false,false]}}},{"address":"module.vm_appgw[1].azurerm_public_ip.pip","module_address":"module.vm_appgw[1]","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-vmappgw1","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.webserver.azurerm_dev_test_global_vm_shutdown_schedule.autoshutdown","module_address":"module.webserver","mode":"managed","type":"azurerm_dev_test_global_vm_shutdown_schedule","name":"autoshutdown","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"daily_recurrence_time":"0200","enabled":true,"location":"japaneast","notification_settings":[{"email":null,"enabled":false,"time_in_minutes":30,"webhook_url":null}],"tags":null,"timeouts":null,"timezone":"Tokyo Standard Time"},"after_unknown":{"id":true,"notification_settings":[{}],"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"notification_settings":[{}]}}},{"address":"module.webserver.azurerm_linux_virtual_machine.linux","module_address":"module.webserver","mode":"managed","type":"azurerm_linux_virtual_machine","name":"linux","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"admin_password":"Password1!","admin_ssh_key":[{"public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCythmaDMBX8Eatx5mqlF0JJ1pNGXePUreGuuAe3yQb+bWbxQJRFuMpYBpKZjZesIUfA86qwaK+c+mD2Sw5GKKIOca6Jj228gYBEBaEzFYZy5Pc3IyZL/3q41OS4kQD27+xIneDGmUnZBXCiuqsXdrw8cSMY6/Cj1tn6UsB4eN1ZZ3AJsTjoZwJSqSmApvavlYl+nPaHlN3fZFF0vwomeLKF3KWahcgIhqxpK5hnjDHWHb0S3bcBwO7NeBIeZqdDAP3Zc17jbgBWKdKy73AZrSRKJh/f8Hvx6qBTRD/IomD+jYOLBPb/gDUYACOyKxB9szwmG/8wQY1dzZNGURCpL3v","username":"adminuser"}],"admin_username":"adminuser","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[{"storage_account_uri":null}],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":"I2Nsb3VkLWNvbmZpZwogIHBhY2thZ2VfdXBncmFkZTogdHJ1ZQogIHBhY2thZ2VzOgogICAgLSBuZ2lueAo=","dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":false,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"japaneast","max_bid_price":-1,"name":"vmfrontend","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Premium_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","secret":[],"secure_boot_enabled":null,"size":"Standard_B2ms","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-focal","publisher":"Canonical","sku":"20_04-lts-gen2","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"after_unknown":{"additional_capabilities":[],"admin_ssh_key":[{}],"boot_diagnostics":[{}],"computer_name":true,"disk_controller_type":true,"gallery_application":[],"id":true,"identity":[],"network_interface_ids":true,"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true,"name":true}],"os_image_notification":[],"plan":[],"private_ip_address":true,"private_ip_addresses":true,"public_ip_address":true,"public_ip_addresses":true,"secret":[],"source_image_reference":[{}],"termination_notification":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":[{}],"boot_diagnostics":[{}],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}}},{"address":"module.webserver.azurerm_network_interface.nic","module_address":"module.webserver","mode":"managed","type":"azurerm_network_interface","name":"nic","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"enable_accelerated_networking":false,"internal_dns_name_label":null,"ip_configuration":[{"name":"configuration","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"japaneast","name":"nic-vmfrontend","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"public_ip_address_id":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.webserver.azurerm_network_interface_security_group_association.example","module_address":"module.webserver","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_interface_id":true,"network_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.webserver.azurerm_network_security_group.nsg","module_address":"module.webserver","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"japaneast","name":"nsg-vmfrontend","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":true},"before_sensitive":false,"after_sensitive":{"security_rule":[]}}},{"address":"module.webserver.azurerm_network_security_rule.nsg-rule","module_address":"module.webserver","mode":"managed","type":"azurerm_network_security_rule","name":"nsg-rule","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":null,"destination_port_ranges":["22","80"],"direction":"Inbound","name":"remote_access","network_security_group_name":"nsg-vmfrontend","priority":100,"protocol":"Tcp","resource_group_name":"rg-idps-appgw-azfw-0511-frontend","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"destination_port_ranges":[false,false],"id":true},"before_sensitive":false,"after_sensitive":{"destination_port_ranges":[false,false]}}},{"address":"module.webserver.azurerm_public_ip.pip","module_address":"module.webserver","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"japaneast","name":"pip-vmfrontend","public_ip_prefix_id":null,"resource_group_name":"rg-idps-appgw-azfw-0511-frontend","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}}],"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","expressions":{"features":[{}]}},"random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random"}},"root_module":{"resources":[{"address":"azurerm_application_gateway.network","mode":"managed","type":"azurerm_application_gateway","name":"network","provider_config_key":"azurerm","expressions":{"backend_address_pool":[{"fqdns":{"references":["module.vm_appgw"]},"name":{"references":["local.backend_address_pool_name_vm"]}}],"backend_http_settings":[{"cookie_based_affinity":{"constant_value":"Enabled"},"name":{"references":["local.http_setting_name"]},"path":{"constant_value":""},"pick_host_name_from_backend_address":{"constant_value":true},"port":{"constant_value":80},"protocol":{"constant_value":"Http"},"request_timeout":{"constant_value":60}},{"cookie_based_affinity":{"constant_value":"Disabled"},"name":{"references":["local.http_setting_name"]},"path":{"constant_value":"/"},"pick_host_name_from_backend_address":{"constant_value":true},"port":{"constant_value":80},"protocol":{"constant_value":"Http"},"request_timeout":{"constant_value":60}}],"frontend_ip_configuration":[{"name":{"references":["local.frontend_ip_configuration_name"]},"public_ip_address_id":{"references":["azurerm_public_ip.appgw.id","azurerm_public_ip.appgw"]}},{"name":{"references":["local.frontend_ip_configuration_private_name"]},"private_ip_address":{"references":["local.frontend_ip_private"]},"private_ip_address_allocation":{"constant_value":"Static"},"private_link_configuration_name":{"references":["local.private_link_configuration_name"]},"subnet_id":{"references":["azurerm_subnet.appgw.id","azurerm_subnet.appgw"]}}],"frontend_port":[{"name":{"references":["local.frontend_port_name"]},"port":{"constant_value":80}},{"name":{"references":["local.frontend_port_8080_name"]},"port":{"constant_value":8080}}],"gateway_ip_configuration":[{"name":{"constant_value":"my-gateway-ip-configuration"},"subnet_id":{"references":["azurerm_subnet.appgw.id","azurerm_subnet.appgw"]}}],"http_listener":[{"frontend_ip_configuration_name":{"references":["local.frontend_ip_configuration_name"]},"frontend_port_name":{"references":["local.frontend_port_name"]},"name":{"references":["local.listener_name"]},"protocol":{"constant_value":"Http"}},{"frontend_ip_configuration_name":{"references":["local.frontend_ip_configuration_private_name"]},"frontend_port_name":{"references":["local.frontend_port_8080_name"]},"name":{"references":["local.listener_name_private"]},"protocol":{"constant_value":"Http"}}],"location":{"references":["azurerm_resource_group.example.location","azurerm_resource_group.example"]},"name":{"constant_value":"appgw-example"},"private_link_configuration":[{"ip_configuration":[{"name":{"constant_value":"my-private-link-config-ip-config"},"primary":{"constant_value":true},"private_ip_address_allocation":{"constant_value":"Dynamic"},"subnet_id":{"references":["azurerm_subnet.pls.id","azurerm_subnet.pls"]}}],"name":{"references":["local.private_link_configuration_name"]}}],"request_routing_rule":[{"http_listener_name":{"references":["local.listener_name_private"]},"name":{"references":["local.request_routing_rule_private_name"]},"priority":{"constant_value":"1000"},"rule_type":{"constant_value":"PathBasedRouting"},"url_path_map_name":{"constant_value":"my-url-path-map"}}],"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"rewrite_rule_set":[{"name":{"constant_value":"add-x-forwarded-for-to-url"},"rewrite_rule":[{"condition":[{"ignore_case":{"constant_value":true},"negate":{"constant_value":false},"pattern":{"constant_value":"(\\d+\\.\\d+\\.\\d+\\.\\d+)"},"variable":{"constant_value":"http_req_X-Forwarded-For"}}],"name":{"constant_value":"NewRewrite"},"rule_sequence":{"constant_value":100},"url":[{"components":{"constant_value":"query_string_only"},"query_string":{"constant_value":"{var_query_string}\u0026c={http_req_X-Forwarded-For_1}"},"reroute":{"constant_value":false}}]}]}],"sku":[{"capacity":{"constant_value":2},"name":{"references":["local.sku_name"]},"tier":{"references":["local.sku_name"]}}],"url_path_map":[{"default_backend_address_pool_name":{"references":["local.backend_address_pool_name_vm"]},"default_backend_http_settings_name":{"references":["local.http_setting_name"]},"default_rewrite_rule_set_name":{"constant_value":"add-x-forwarded-for-to-url"},"name":{"constant_value":"my-url-path-map"},"path_rule":[{"backend_address_pool_name":{"references":["local.backend_address_pool_name_vm"]},"backend_http_settings_name":{"references":["local.http_setting_name"]},"name":{"constant_value":"my-path-rule"},"paths":{"constant_value":["/staging/*"]}}]}]},"schema_version":0},{"address":"azurerm_private_endpoint.example","mode":"managed","type":"azurerm_private_endpoint","name":"example","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.frontend.location","azurerm_resource_group.frontend"]},"name":{"constant_value":"pe-to-backend-appgw"},"private_service_connection":[{"is_manual_connection":{"constant_value":false},"name":{"constant_value":"example-privateserviceconnection"},"private_connection_resource_id":{"references":["azurerm_application_gateway.network.id","azurerm_application_gateway.network"]},"subresource_names":{"references":["local.frontend_ip_configuration_private_name"]}}],"resource_group_name":{"references":["azurerm_resource_group.frontend.name","azurerm_resource_group.frontend"]},"subnet_id":{"references":["azurerm_subnet.pe.id","azurerm_subnet.pe"]}},"schema_version":0},{"address":"azurerm_public_ip.appgw","mode":"managed","type":"azurerm_public_ip","name":"appgw","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["azurerm_resource_group.example.location","azurerm_resource_group.example"]},"name":{"constant_value":"pip-appgw"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"sku":{"constant_value":"Standard"},"zones":{"constant_value":["1","2","3"]}},"schema_version":0},{"address":"azurerm_resource_group.example","mode":"managed","type":"azurerm_resource_group","name":"example","provider_config_key":"azurerm","expressions":{"location":{"references":["var.rg.location","var.rg"]},"name":{"references":["var.rg.name","var.rg"]}},"schema_version":0},{"address":"azurerm_resource_group.frontend","mode":"managed","type":"azurerm_resource_group","name":"frontend","provider_config_key":"azurerm","expressions":{"location":{"references":["var.rg.location","var.rg"]},"name":{"references":["var.rg.name","var.rg"]}},"schema_version":0},{"address":"azurerm_route_table.appgw","mode":"managed","type":"azurerm_route_table","name":"appgw","provider_config_key":"azurerm","expressions":{"disable_bgp_route_propagation":{"constant_value":true},"location":{"references":["azurerm_resource_group.example.location","azurerm_resource_group.example"]},"name":{"constant_value":"rt-appgw"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"route":{"references":["module.azure_subnet_addrs.network_cidr_blocks[\"default\"]","module.azure_subnet_addrs.network_cidr_blocks","module.azure_subnet_addrs","module.azfw.private_ip_address","module.azfw"]}},"schema_version":0},{"address":"azurerm_route_table.azfw","mode":"managed","type":"azurerm_route_table","name":"azfw","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.example.location","azurerm_resource_group.example"]},"name":{"constant_value":"route-azfw"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"route":{"constant_value":[{"address_prefix":"0.0.0.0/0","name":"default","next_hop_in_ip_address":null,"next_hop_type":"Internet"}]}},"schema_version":0},{"address":"azurerm_route_table.default","mode":"managed","type":"azurerm_route_table","name":"default","provider_config_key":"azurerm","expressions":{"disable_bgp_route_propagation":{"constant_value":true},"location":{"references":["azurerm_resource_group.example.location","azurerm_resource_group.example"]},"name":{"constant_value":"rt-default"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"route":{"references":["module.azfw.private_ip_address","module.azfw","module.azure_subnet_addrs.network_cidr_blocks[\"appgw\"]","module.azure_subnet_addrs.network_cidr_blocks","module.azure_subnet_addrs","module.azfw.private_ip_address","module.azfw"]}},"schema_version":0},{"address":"azurerm_route_table.vm","mode":"managed","type":"azurerm_route_table","name":"vm","provider_config_key":"azurerm","expressions":{"disable_bgp_route_propagation":{"constant_value":false},"location":{"references":["azurerm_resource_group.frontend.location","azurerm_resource_group.frontend"]},"name":{"constant_value":"rt-fe-vm"},"resource_group_name":{"references":["azurerm_resource_group.frontend.name","azurerm_resource_group.frontend"]},"route":{"references":["module.fe_azfw.private_ip_address","module.fe_azfw","module.frontend_azure_subnet_addrs.network_cidr_blocks[\"pe\"]","module.frontend_azure_subnet_addrs.network_cidr_blocks","module.frontend_azure_subnet_addrs","module.fe_azfw.private_ip_address","module.fe_azfw"]}},"schema_version":0},{"address":"azurerm_subnet.appgw","mode":"managed","type":"azurerm_subnet","name":"appgw","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.azure_subnet_addrs.network_cidr_blocks[\"appgw\"]","module.azure_subnet_addrs.network_cidr_blocks","module.azure_subnet_addrs"]},"name":{"constant_value":"snet-appgw"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"virtual_network_name":{"references":["azurerm_virtual_network.example.name","azurerm_virtual_network.example"]}},"schema_version":0,"depends_on":["azurerm_subnet.azfw"]},{"address":"azurerm_subnet.azfw","mode":"managed","type":"azurerm_subnet","name":"azfw","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.azure_subnet_addrs.network_cidr_blocks[\"azfw\"]","module.azure_subnet_addrs.network_cidr_blocks","module.azure_subnet_addrs"]},"name":{"constant_value":"AzureFirewallSubnet"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"virtual_network_name":{"references":["azurerm_virtual_network.example.name","azurerm_virtual_network.example"]}},"schema_version":0,"depends_on":["azurerm_subnet.pls"]},{"address":"azurerm_subnet.bastion","mode":"managed","type":"azurerm_subnet","name":"bastion","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.azure_subnet_addrs.network_cidr_blocks[\"bastion\"]","module.azure_subnet_addrs.network_cidr_blocks","module.azure_subnet_addrs"]},"name":{"constant_value":"AzureBastionSubnet"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"virtual_network_name":{"references":["azurerm_virtual_network.example.name","azurerm_virtual_network.example"]}},"schema_version":0,"depends_on":["azurerm_subnet.default"]},{"address":"azurerm_subnet.default","mode":"managed","type":"azurerm_subnet","name":"default","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.azure_subnet_addrs.network_cidr_blocks[\"default\"]","module.azure_subnet_addrs.network_cidr_blocks","module.azure_subnet_addrs"]},"name":{"constant_value":"snet-default"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"virtual_network_name":{"references":["azurerm_virtual_network.example.name","azurerm_virtual_network.example"]}},"schema_version":0},{"address":"azurerm_subnet.default2","mode":"managed","type":"azurerm_subnet","name":"default2","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.azure_subnet_addrs.network_cidr_blocks[\"default2\"]","module.azure_subnet_addrs.network_cidr_blocks","module.azure_subnet_addrs"]},"name":{"constant_value":"snet-default-backend-appgw"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"virtual_network_name":{"references":["azurerm_virtual_network.example.name","azurerm_virtual_network.example"]}},"schema_version":0,"depends_on":["azurerm_subnet.appgw"]},{"address":"azurerm_subnet.fe_azfw","mode":"managed","type":"azurerm_subnet","name":"fe_azfw","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.frontend_azure_subnet_addrs.network_cidr_blocks[\"azfw\"]","module.frontend_azure_subnet_addrs.network_cidr_blocks","module.frontend_azure_subnet_addrs"]},"name":{"constant_value":"AzureFirewallSubnet"},"resource_group_name":{"references":["azurerm_resource_group.frontend.name","azurerm_resource_group.frontend"]},"virtual_network_name":{"references":["azurerm_virtual_network.frontend.name","azurerm_virtual_network.frontend"]}},"schema_version":0,"depends_on":["azurerm_subnet.fe_vm"]},{"address":"azurerm_subnet.fe_bastion","mode":"managed","type":"azurerm_subnet","name":"fe_bastion","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.frontend_azure_subnet_addrs.network_cidr_blocks[\"bastion\"]","module.frontend_azure_subnet_addrs.network_cidr_blocks","module.frontend_azure_subnet_addrs"]},"name":{"constant_value":"AzureBastionSubnet"},"resource_group_name":{"references":["azurerm_resource_group.frontend.name","azurerm_resource_group.frontend"]},"virtual_network_name":{"references":["azurerm_virtual_network.frontend.name","azurerm_virtual_network.frontend"]}},"schema_version":0,"depends_on":["azurerm_subnet.azfw"]},{"address":"azurerm_subnet.fe_vm","mode":"managed","type":"azurerm_subnet","name":"fe_vm","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.frontend_azure_subnet_addrs.network_cidr_blocks[\"vm\"]","module.frontend_azure_subnet_addrs.network_cidr_blocks","module.frontend_azure_subnet_addrs"]},"name":{"constant_value":"snet-vm"},"resource_group_name":{"references":["azurerm_resource_group.frontend.name","azurerm_resource_group.frontend"]},"virtual_network_name":{"references":["azurerm_virtual_network.frontend.name","azurerm_virtual_network.frontend"]}},"schema_version":0},{"address":"azurerm_subnet.pe","mode":"managed","type":"azurerm_subnet","name":"pe","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.frontend_azure_subnet_addrs.network_cidr_blocks[\"pe\"]","module.frontend_azure_subnet_addrs.network_cidr_blocks","module.frontend_azure_subnet_addrs"]},"name":{"constant_value":"snet-pe"},"resource_group_name":{"references":["azurerm_resource_group.frontend.name","azurerm_resource_group.frontend"]},"virtual_network_name":{"references":["azurerm_virtual_network.frontend.name","azurerm_virtual_network.frontend"]}},"schema_version":0,"depends_on":["azurerm_subnet.fe_vm"]},{"address":"azurerm_subnet.pls","mode":"managed","type":"azurerm_subnet","name":"pls","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["module.azure_subnet_addrs.network_cidr_blocks[\"pls\"]","module.azure_subnet_addrs.network_cidr_blocks","module.azure_subnet_addrs"]},"name":{"constant_value":"snet-pls"},"private_endpoint_network_policies_enabled":{"constant_value":false},"private_link_service_network_policies_enabled":{"constant_value":false},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"virtual_network_name":{"references":["azurerm_virtual_network.example.name","azurerm_virtual_network.example"]}},"schema_version":0,"depends_on":["azurerm_subnet.bastion"]},{"address":"azurerm_subnet_route_table_association.appgw","mode":"managed","type":"azurerm_subnet_route_table_association","name":"appgw","provider_config_key":"azurerm","expressions":{"route_table_id":{"references":["azurerm_route_table.appgw.id","azurerm_route_table.appgw"]},"subnet_id":{"references":["azurerm_subnet.appgw.id","azurerm_subnet.appgw"]}},"schema_version":0,"count_expression":{"references":["var.pattern"]}},{"address":"azurerm_subnet_route_table_association.azfw","mode":"managed","type":"azurerm_subnet_route_table_association","name":"azfw","provider_config_key":"azurerm","expressions":{"route_table_id":{"references":["azurerm_route_table.azfw.id","azurerm_route_table.azfw"]},"subnet_id":{"references":["azurerm_subnet.azfw.id","azurerm_subnet.azfw"]}},"schema_version":0},{"address":"azurerm_subnet_route_table_association.default","mode":"managed","type":"azurerm_subnet_route_table_association","name":"default","provider_config_key":"azurerm","expressions":{"route_table_id":{"references":["azurerm_route_table.default.id","azurerm_route_table.default"]},"subnet_id":{"references":["azurerm_subnet.default.id","azurerm_subnet.default"]}},"schema_version":0,"count_expression":{"references":["var.pattern"]}},{"address":"azurerm_subnet_route_table_association.fe_vm","mode":"managed","type":"azurerm_subnet_route_table_association","name":"fe_vm","provider_config_key":"azurerm","expressions":{"route_table_id":{"references":["azurerm_route_table.vm.id","azurerm_route_table.vm"]},"subnet_id":{"references":["azurerm_subnet.fe_vm.id","azurerm_subnet.fe_vm"]}},"schema_version":0,"count_expression":{"references":["var.pattern"]}},{"address":"azurerm_virtual_network.example","mode":"managed","type":"azurerm_virtual_network","name":"example","provider_config_key":"azurerm","expressions":{"address_space":{"references":["module.azure_subnet_addrs.base_cidr_block","module.azure_subnet_addrs"]},"location":{"references":["azurerm_resource_group.example.location","azurerm_resource_group.example"]},"name":{"constant_value":"vnet-example"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]}},"schema_version":0},{"address":"azurerm_virtual_network.frontend","mode":"managed","type":"azurerm_virtual_network","name":"frontend","provider_config_key":"azurerm","expressions":{"address_space":{"references":["module.frontend_azure_subnet_addrs.base_cidr_block","module.frontend_azure_subnet_addrs"]},"location":{"references":["azurerm_resource_group.frontend.location","azurerm_resource_group.frontend"]},"name":{"constant_value":"vnet-azfwprem"},"resource_group_name":{"references":["azurerm_resource_group.frontend.name","azurerm_resource_group.frontend"]}},"schema_version":0},{"address":"random_string.uniqstr","mode":"managed","type":"random_string","name":"uniqstr","provider_config_key":"random","expressions":{"keepers":{"references":["var.rg.name","var.rg"]},"length":{"constant_value":6},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":2},{"address":"data.azurerm_monitor_diagnostic_categories.appgw_diag_category","mode":"data","type":"azurerm_monitor_diagnostic_categories","name":"appgw_diag_category","provider_config_key":"azurerm","expressions":{"resource_id":{"references":["azurerm_application_gateway.network.id","azurerm_application_gateway.network"]}},"schema_version":0},{"address":"data.azurerm_monitor_diagnostic_categories.azfw_diag_category","mode":"data","type":"azurerm_monitor_diagnostic_categories","name":"azfw_diag_category","provider_config_key":"azurerm","expressions":{"resource_id":{"references":["module.azfw.id","module.azfw"]}},"schema_version":0}],"module_calls":{"afw_diag":{"source":"../modules/diagnostic_logs","expressions":{"diagnostic_logs":{"references":["data.azurerm_monitor_diagnostic_categories.azfw_diag_category.logs","data.azurerm_monitor_diagnostic_categories.azfw_diag_category"]},"log_analytics_workspace_id":{"references":["module.la.id","module.la"]},"name":{"constant_value":"diag"},"retention":{"constant_value":30},"target_resource_id":{"references":["module.fe_azfw.id","module.fe_azfw"]}},"module":{"resources":[{"address":"azurerm_monitor_diagnostic_setting.diagnostic_logs","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"diagnostic_logs","provider_config_key":"azurerm","expressions":{"log_analytics_workspace_id":{"references":["var.log_analytics_workspace_id"]},"metric":[{"category":{"constant_value":"AllMetrics"},"enabled":{"constant_value":false}}],"name":{"references":["var.name"]},"target_resource_id":{"references":["var.target_resource_id"]}},"schema_version":0}],"variables":{"diagnostic_logs":{"description":"The list of diagnostic logs that should be enabled"},"log_analytics_workspace_id":{"description":"The resource id of the Storage Account where the diagnostic logs will be stored"},"name":{"description":"The name of the diagnostic logs configuration"},"retention":{"description":"The retention time for all diagnostic logs"},"target_resource_id":{"description":"The resource id of the target resource for which diagnostic logs will be enabled"}}}},"appgw_diag":{"source":"../modules/diagnostic_logs","expressions":{"diagnostic_logs":{"references":["data.azurerm_monitor_diagnostic_categories.appgw_diag_category.logs","data.azurerm_monitor_diagnostic_categories.appgw_diag_category"]},"log_analytics_workspace_id":{"references":["module.la.id","module.la"]},"name":{"constant_value":"diag"},"retention":{"constant_value":30},"target_resource_id":{"references":["azurerm_application_gateway.network.id","azurerm_application_gateway.network"]}},"module":{"resources":[{"address":"azurerm_monitor_diagnostic_setting.diagnostic_logs","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"diagnostic_logs","provider_config_key":"azurerm","expressions":{"log_analytics_workspace_id":{"references":["var.log_analytics_workspace_id"]},"metric":[{"category":{"constant_value":"AllMetrics"},"enabled":{"constant_value":false}}],"name":{"references":["var.name"]},"target_resource_id":{"references":["var.target_resource_id"]}},"schema_version":0}],"variables":{"diagnostic_logs":{"description":"The list of diagnostic logs that should be enabled"},"log_analytics_workspace_id":{"description":"The resource id of the Storage Account where the diagnostic logs will be stored"},"name":{"description":"The name of the diagnostic logs configuration"},"retention":{"description":"The retention time for all diagnostic logs"},"target_resource_id":{"description":"The resource id of the target resource for which diagnostic logs will be enabled"}}}},"azfw":{"source":"../modules/azurefirewall-premium","expressions":{"id":{"constant_value":"example"},"rg":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example","azurerm_resource_group.example.location","azurerm_resource_group.example"]},"sku":{"constant_value":"Premium"},"subnet_id":{"references":["azurerm_subnet.azfw.id","azurerm_subnet.azfw"]}},"module":{"outputs":{"id":{"expression":{"references":["azurerm_firewall.example.id","azurerm_firewall.example"]}},"name":{"expression":{"references":["azurerm_firewall.example.name","azurerm_firewall.example"]}},"private_ip_address":{"expression":{"references":["azurerm_firewall.example.ip_configuration[0].private_ip_address","azurerm_firewall.example.ip_configuration[0]","azurerm_firewall.example.ip_configuration","azurerm_firewall.example"]}},"public_ip_address":{"expression":{"references":["azurerm_public_ip.example.ip_address","azurerm_public_ip.example"]}}},"resources":[{"address":"azurerm_firewall.example","mode":"managed","type":"azurerm_firewall","name":"example","provider_config_key":"azurerm","expressions":{"firewall_policy_id":{"references":["azurerm_firewall_policy.example.id","azurerm_firewall_policy.example"]},"ip_configuration":[{"name":{"constant_value":"configuration"},"public_ip_address_id":{"references":["azurerm_public_ip.example.id","azurerm_public_ip.example"]},"subnet_id":{"references":["var.subnet_id"]}}],"location":{"references":["var.rg.location","var.rg"]},"name":{"references":["var.id"]},"resource_group_name":{"references":["var.rg.name","var.rg"]},"sku_name":{"constant_value":"AZFW_VNet"},"sku_tier":{"references":["var.sku"]},"zones":{"references":["var.zones"]}},"schema_version":0},{"address":"azurerm_firewall_policy.example","mode":"managed","type":"azurerm_firewall_policy","name":"example","provider_config_key":"azurerm","expressions":{"location":{"references":["var.rg.location","var.rg"]},"name":{"references":["var.id"]},"resource_group_name":{"references":["var.rg.name","var.rg"]},"sku":{"references":["var.sku"]}},"schema_version":0},{"address":"azurerm_firewall_policy_rule_collection_group.example","mode":"managed","type":"azurerm_firewall_policy_rule_collection_group","name":"example","provider_config_key":"azurerm","expressions":{"firewall_policy_id":{"references":["azurerm_firewall_policy.example.id","azurerm_firewall_policy.example"]},"name":{"constant_value":"RuleCollectionGroup"},"priority":{"constant_value":1000}},"schema_version":0},{"address":"azurerm_public_ip.example","mode":"managed","type":"azurerm_public_ip","name":"example","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["var.rg.location","var.rg"]},"name":{"references":["local.firewall.name","local.firewall"]},"resource_group_name":{"references":["var.rg.name","var.rg"]},"sku":{"constant_value":"Standard"},"zones":{"references":["var.zones"]}},"schema_version":0}],"variables":{"azurefirewall_application_rule":{"default":[{"action":"Allow","name":"AllowApplicationRuleCollection","priority":2000,"rule":[{"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":["*"],"destination_urls":[],"name":"All","protocols":[{"port":80,"type":"Http"},{"port":443,"type":"Https"}],"source_addresses":["*"],"source_ip_groups":[],"terminate_tls":false,"web_categories":[]}]}]},"azurefirewall_nat_rule":{"default":[{"action":"Dnat","name":"TestDnatRule_SSH-SpokeVM","priority":500,"rule":[{"destination_ports":["22"],"name":"SSH","protocols":["TCP"],"source_addresses":["*"],"translated_address":"1.1.1.1","translated_port":"22"}]}]},"azurefirewall_network_rule":{"default":[{"action":"Allow","name":"AllowNetworkRuleCollection","priority":1000,"rule":[{"destination_addresses":["*"],"destination_fqdns":[],"destination_ports":["*"],"name":"All","protocols":["Any"],"source_addresses":["*"]}]}]},"id":{"default":"dev"},"name":{"default":"fw-example"},"rg":{},"sku":{"default":"Premium"},"subnet_id":{},"zones":{"default":["1","2","3"]}}}},"azfw_diag":{"source":"../modules/diagnostic_logs","expressions":{"diagnostic_logs":{"references":["data.azurerm_monitor_diagnostic_categories.azfw_diag_category.logs","data.azurerm_monitor_diagnostic_categories.azfw_diag_category"]},"log_analytics_workspace_id":{"references":["module.la.id","module.la"]},"name":{"constant_value":"diag"},"retention":{"constant_value":30},"target_resource_id":{"references":["module.azfw.id","module.azfw"]}},"module":{"resources":[{"address":"azurerm_monitor_diagnostic_setting.diagnostic_logs","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"diagnostic_logs","provider_config_key":"azurerm","expressions":{"log_analytics_workspace_id":{"references":["var.log_analytics_workspace_id"]},"metric":[{"category":{"constant_value":"AllMetrics"},"enabled":{"constant_value":false}}],"name":{"references":["var.name"]},"target_resource_id":{"references":["var.target_resource_id"]}},"schema_version":0}],"variables":{"diagnostic_logs":{"description":"The list of diagnostic logs that should be enabled"},"log_analytics_workspace_id":{"description":"The resource id of the Storage Account where the diagnostic logs will be stored"},"name":{"description":"The name of the diagnostic logs configuration"},"retention":{"description":"The retention time for all diagnostic logs"},"target_resource_id":{"description":"The resource id of the target resource for which diagnostic logs will be enabled"}}}},"azure_subnet_addrs":{"source":"hashicorp/subnets/cidr","expressions":{"base_cidr_block":{"references":["var.backend_base_cidr_block"]},"networks":{"constant_value":[{"name":"default","new_bits":8},{"name":"pls","new_bits":8},{"name":"bastion","new_bits":8},{"name":"azfw","new_bits":8},{"name":"appgw","new_bits":8},{"name":"default2","new_bits":8}]}},"module":{"outputs":{"base_cidr_block":{"expression":{"references":["var.base_cidr_block"]},"description":"Echoes back the base_cidr_block input variable value, for convenience if passing the result of this module elsewhere as an object."},"network_cidr_blocks":{"expression":{"references":["local.addrs_by_name"]},"description":"A map from network names to allocated address prefixes in CIDR notation."},"networks":{"expression":{"references":["local.network_objs"]},"description":"A list of objects corresponding to each of the objects in the input variable 'networks', each extended with a new attribute 'cidr_block' giving the network's allocated address prefix."}},"variables":{"base_cidr_block":{"description":"A network address prefix in CIDR notation that all of the requested subnetwork prefixes will be allocated within."},"networks":{"description":"A list of objects describing requested subnetwork prefixes. new_bits is the number of additional network prefix bits to add, in addition to the existing prefix on base_cidr_block."}}}},"bastion":{"source":"../modules/bastion/","expressions":{"location":{"references":["azurerm_resource_group.example.location","azurerm_resource_group.example"]},"name":{"constant_value":"bastion"},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"subnet_id":{"references":["azurerm_subnet.bastion.id","azurerm_subnet.bastion"]}},"module":{"resources":[{"address":"azurerm_bastion_host.bastion","mode":"managed","type":"azurerm_bastion_host","name":"bastion","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"constant_value":"configuration"},"public_ip_address_id":{"references":["azurerm_public_ip.bastion.id","azurerm_public_ip.bastion"]},"subnet_id":{"references":["var.subnet_id"]}}],"ip_connect_enabled":{"constant_value":true},"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]},"shareable_link_enabled":{"constant_value":true},"sku":{"constant_value":"Standard"},"tunneling_enabled":{"constant_value":true}},"schema_version":0,"depends_on":["azurerm_subnet_network_security_group_association.hub-bastion"]},{"address":"azurerm_network_security_group.bastion","mode":"managed","type":"azurerm_network_security_group","name":"bastion","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-azurecloud-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-azurecloud-out","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"AzureCloud"},"destination_port_ranges":{"constant_value":["443"]},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowAzureCloudOutbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":130},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"*"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-bastioncommunication-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-bastioncommunication-out","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"VirtualNetwork"},"destination_port_ranges":{"constant_value":["8080","5701"]},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowBastionCommunication"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":140},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"VirtualNetwork"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-gsi-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gsi-out","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"Internet"},"destination_port_ranges":{"constant_value":["80"]},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowGetSesssionInformation"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":150},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"*"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-gwm","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gwm","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"*"},"destination_application_security_group_ids":{"constant_value":[]},"destination_port_range":{"constant_value":"443"},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"AllowGatewayManagerInbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":130},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"GatewayManager"},"source_application_security_group_ids":{"constant_value":[]},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-hc","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-hc","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"VirtualNetwork"},"destination_port_ranges":{"constant_value":["8080","5701"]},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"AllowBastionHostCommunication"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":150},"protocol":{"constant_value":"*"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"VirtualNetwork"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-https","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-https","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"*"},"destination_port_range":{"constant_value":"443"},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"AllowHttpsInbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":120},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"Internet"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-lb","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-lb","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"*"},"destination_port_range":{"constant_value":"443"},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"AllowAzureLoadBalancerInbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":140},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"AzureLoadBalancer"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-sshrdp-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-sshrdp-out","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"VirtualNetwork"},"destination_port_ranges":{"constant_value":["22","3389"]},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowSshRdpOutbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":120},"protocol":{"constant_value":"*"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"*"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_public_ip.bastion","mode":"managed","type":"azurerm_public_ip","name":"bastion","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Standard"}},"schema_version":0},{"address":"azurerm_subnet_network_security_group_association.hub-bastion","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"hub-bastion","provider_config_key":"azurerm","expressions":{"network_security_group_id":{"references":["azurerm_network_security_group.bastion.id","azurerm_network_security_group.bastion"]},"subnet_id":{"references":["var.subnet_id"]}},"schema_version":0,"depends_on":["azurerm_network_security_rule.bastion-azurecloud-out","azurerm_network_security_rule.bastion-bastioncommunication-out","azurerm_network_security_rule.bastion-gsi-out","azurerm_network_security_rule.bastion-gwm","azurerm_network_security_rule.bastion-https","azurerm_network_security_rule.bastion-hc","azurerm_network_security_rule.bastion-lb","azurerm_network_security_rule.bastion-sshrdp-out"]}],"variables":{"location":{},"name":{},"resource_group_name":{},"subnet_id":{}}}},"fe_azfw":{"source":"../modules/azurefirewall-premium","expressions":{"azurefirewall_application_rule":{"constant_value":[{"action":"Allow","name":"AllowApplicationRuleCollection","priority":2000,"rule":[{"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":["*"],"destination_urls":[],"name":"All","protocols":[{"port":80,"type":"Http"},{"port":8080,"type":"Http"},{"port":443,"type":"Https"}],"source_addresses":["*"],"source_ip_groups":[],"terminate_tls":false,"web_categories":[]}]}]},"azurefirewall_network_rule":{"constant_value":[{"action":"Allow","name":"AllowNetworkRuleCollection","priority":1000,"rule":[{"destination_addresses":["*"],"destination_fqdns":[],"destination_ports":["*"],"name":"All","protocols":["TCP"],"source_addresses":["1.2.3.4"]}]}]},"id":{"references":["random_string.uniqstr.result","random_string.uniqstr"]},"rg":{"references":["azurerm_resource_group.frontend"]},"sku":{"constant_value":"Premium"},"subnet_id":{"references":["azurerm_subnet.fe_azfw.id","azurerm_subnet.fe_azfw"]}},"module":{"outputs":{"id":{"expression":{"references":["azurerm_firewall.example.id","azurerm_firewall.example"]}},"name":{"expression":{"references":["azurerm_firewall.example.name","azurerm_firewall.example"]}},"private_ip_address":{"expression":{"references":["azurerm_firewall.example.ip_configuration[0].private_ip_address","azurerm_firewall.example.ip_configuration[0]","azurerm_firewall.example.ip_configuration","azurerm_firewall.example"]}},"public_ip_address":{"expression":{"references":["azurerm_public_ip.example.ip_address","azurerm_public_ip.example"]}}},"resources":[{"address":"azurerm_firewall.example","mode":"managed","type":"azurerm_firewall","name":"example","provider_config_key":"azurerm","expressions":{"firewall_policy_id":{"references":["azurerm_firewall_policy.example.id","azurerm_firewall_policy.example"]},"ip_configuration":[{"name":{"constant_value":"configuration"},"public_ip_address_id":{"references":["azurerm_public_ip.example.id","azurerm_public_ip.example"]},"subnet_id":{"references":["var.subnet_id"]}}],"location":{"references":["var.rg.location","var.rg"]},"name":{"references":["var.id"]},"resource_group_name":{"references":["var.rg.name","var.rg"]},"sku_name":{"constant_value":"AZFW_VNet"},"sku_tier":{"references":["var.sku"]},"zones":{"references":["var.zones"]}},"schema_version":0},{"address":"azurerm_firewall_policy.example","mode":"managed","type":"azurerm_firewall_policy","name":"example","provider_config_key":"azurerm","expressions":{"location":{"references":["var.rg.location","var.rg"]},"name":{"references":["var.id"]},"resource_group_name":{"references":["var.rg.name","var.rg"]},"sku":{"references":["var.sku"]}},"schema_version":0},{"address":"azurerm_firewall_policy_rule_collection_group.example","mode":"managed","type":"azurerm_firewall_policy_rule_collection_group","name":"example","provider_config_key":"azurerm","expressions":{"firewall_policy_id":{"references":["azurerm_firewall_policy.example.id","azurerm_firewall_policy.example"]},"name":{"constant_value":"RuleCollectionGroup"},"priority":{"constant_value":1000}},"schema_version":0},{"address":"azurerm_public_ip.example","mode":"managed","type":"azurerm_public_ip","name":"example","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["var.rg.location","var.rg"]},"name":{"references":["local.firewall.name","local.firewall"]},"resource_group_name":{"references":["var.rg.name","var.rg"]},"sku":{"constant_value":"Standard"},"zones":{"references":["var.zones"]}},"schema_version":0}],"variables":{"azurefirewall_application_rule":{"default":[{"action":"Allow","name":"AllowApplicationRuleCollection","priority":2000,"rule":[{"destination_addresses":[],"destination_fqdn_tags":[],"destination_fqdns":["*"],"destination_urls":[],"name":"All","protocols":[{"port":80,"type":"Http"},{"port":443,"type":"Https"}],"source_addresses":["*"],"source_ip_groups":[],"terminate_tls":false,"web_categories":[]}]}]},"azurefirewall_nat_rule":{"default":[{"action":"Dnat","name":"TestDnatRule_SSH-SpokeVM","priority":500,"rule":[{"destination_ports":["22"],"name":"SSH","protocols":["TCP"],"source_addresses":["*"],"translated_address":"1.1.1.1","translated_port":"22"}]}]},"azurefirewall_network_rule":{"default":[{"action":"Allow","name":"AllowNetworkRuleCollection","priority":1000,"rule":[{"destination_addresses":["*"],"destination_fqdns":[],"destination_ports":["*"],"name":"All","protocols":["Any"],"source_addresses":["*"]}]}]},"id":{"default":"dev"},"name":{"default":"fw-example"},"rg":{},"sku":{"default":"Premium"},"subnet_id":{},"zones":{"default":["1","2","3"]}}}},"fe_bastion":{"source":"../modules/bastion/","expressions":{"location":{"references":["azurerm_resource_group.frontend.location","azurerm_resource_group.frontend"]},"name":{"constant_value":"bastion-frontend"},"resource_group_name":{"references":["azurerm_resource_group.frontend.name","azurerm_resource_group.frontend"]},"subnet_id":{"references":["azurerm_subnet.fe_bastion.id","azurerm_subnet.fe_bastion"]}},"module":{"resources":[{"address":"azurerm_bastion_host.bastion","mode":"managed","type":"azurerm_bastion_host","name":"bastion","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"constant_value":"configuration"},"public_ip_address_id":{"references":["azurerm_public_ip.bastion.id","azurerm_public_ip.bastion"]},"subnet_id":{"references":["var.subnet_id"]}}],"ip_connect_enabled":{"constant_value":true},"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]},"shareable_link_enabled":{"constant_value":true},"sku":{"constant_value":"Standard"},"tunneling_enabled":{"constant_value":true}},"schema_version":0,"depends_on":["azurerm_subnet_network_security_group_association.hub-bastion"]},{"address":"azurerm_network_security_group.bastion","mode":"managed","type":"azurerm_network_security_group","name":"bastion","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-azurecloud-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-azurecloud-out","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"AzureCloud"},"destination_port_ranges":{"constant_value":["443"]},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowAzureCloudOutbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":130},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"*"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-bastioncommunication-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-bastioncommunication-out","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"VirtualNetwork"},"destination_port_ranges":{"constant_value":["8080","5701"]},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowBastionCommunication"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":140},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"VirtualNetwork"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-gsi-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gsi-out","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"Internet"},"destination_port_ranges":{"constant_value":["80"]},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowGetSesssionInformation"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":150},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"*"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-gwm","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-gwm","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"*"},"destination_application_security_group_ids":{"constant_value":[]},"destination_port_range":{"constant_value":"443"},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"AllowGatewayManagerInbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":130},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"GatewayManager"},"source_application_security_group_ids":{"constant_value":[]},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-hc","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-hc","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"VirtualNetwork"},"destination_port_ranges":{"constant_value":["8080","5701"]},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"AllowBastionHostCommunication"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":150},"protocol":{"constant_value":"*"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"VirtualNetwork"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-https","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-https","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"*"},"destination_port_range":{"constant_value":"443"},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"AllowHttpsInbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":120},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"Internet"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-lb","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-lb","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"*"},"destination_port_range":{"constant_value":"443"},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"AllowAzureLoadBalancerInbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":140},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"AzureLoadBalancer"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.bastion-sshrdp-out","mode":"managed","type":"azurerm_network_security_rule","name":"bastion-sshrdp-out","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"description":{"constant_value":""},"destination_address_prefix":{"constant_value":"VirtualNetwork"},"destination_port_ranges":{"constant_value":["22","3389"]},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowSshRdpOutbound"},"network_security_group_name":{"references":["azurerm_network_security_group.bastion.name","azurerm_network_security_group.bastion"]},"priority":{"constant_value":120},"protocol":{"constant_value":"*"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"*"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_public_ip.bastion","mode":"managed","type":"azurerm_public_ip","name":"bastion","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Standard"}},"schema_version":0},{"address":"azurerm_subnet_network_security_group_association.hub-bastion","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"hub-bastion","provider_config_key":"azurerm","expressions":{"network_security_group_id":{"references":["azurerm_network_security_group.bastion.id","azurerm_network_security_group.bastion"]},"subnet_id":{"references":["var.subnet_id"]}},"schema_version":0,"depends_on":["azurerm_network_security_rule.bastion-azurecloud-out","azurerm_network_security_rule.bastion-bastioncommunication-out","azurerm_network_security_rule.bastion-gsi-out","azurerm_network_security_rule.bastion-gwm","azurerm_network_security_rule.bastion-https","azurerm_network_security_rule.bastion-hc","azurerm_network_security_rule.bastion-lb","azurerm_network_security_rule.bastion-sshrdp-out"]}],"variables":{"location":{},"name":{},"resource_group_name":{},"subnet_id":{}}}},"frontend_azure_subnet_addrs":{"source":"hashicorp/subnets/cidr","expressions":{"base_cidr_block":{"references":["var.frontend_base_cidr_block"]},"networks":{"constant_value":[{"name":"vm","new_bits":8},{"name":"azfw","new_bits":8},{"name":"pe","new_bits":8},{"name":"bastion","new_bits":8}]}},"module":{"outputs":{"base_cidr_block":{"expression":{"references":["var.base_cidr_block"]},"description":"Echoes back the base_cidr_block input variable value, for convenience if passing the result of this module elsewhere as an object."},"network_cidr_blocks":{"expression":{"references":["local.addrs_by_name"]},"description":"A map from network names to allocated address prefixes in CIDR notation."},"networks":{"expression":{"references":["local.network_objs"]},"description":"A list of objects corresponding to each of the objects in the input variable 'networks', each extended with a new attribute 'cidr_block' giving the network's allocated address prefix."}},"variables":{"base_cidr_block":{"description":"A network address prefix in CIDR notation that all of the requested subnetwork prefixes will be allocated within."},"networks":{"description":"A list of objects describing requested subnetwork prefixes. new_bits is the number of additional network prefix bits to add, in addition to the existing prefix on base_cidr_block."}}}},"la":{"source":"../modules/log_analytics","expressions":{"location":{"references":["azurerm_resource_group.example.location","azurerm_resource_group.example"]},"name":{"references":["random_string.uniqstr.result","random_string.uniqstr"]},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]}},"module":{"outputs":{"id":{"expression":{"references":["azurerm_log_analytics_workspace.log_analytics.id","azurerm_log_analytics_workspace.log_analytics"]}},"workspace_id":{"expression":{"references":["azurerm_log_analytics_workspace.log_analytics.workspace_id","azurerm_log_analytics_workspace.log_analytics"]}}},"resources":[{"address":"azurerm_log_analytics_solution.container","mode":"managed","type":"azurerm_log_analytics_solution","name":"container","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_log_analytics_workspace.log_analytics.location","azurerm_log_analytics_workspace.log_analytics"]},"plan":[{"product":{"constant_value":"OMSGallery/ContainerInsights"},"publisher":{"constant_value":"Microsoft"}}],"resource_group_name":{"references":["azurerm_log_analytics_workspace.log_analytics.resource_group_name","azurerm_log_analytics_workspace.log_analytics"]},"solution_name":{"constant_value":"ContainerInsights"},"workspace_name":{"references":["azurerm_log_analytics_workspace.log_analytics.name","azurerm_log_analytics_workspace.log_analytics"]},"workspace_resource_id":{"references":["azurerm_log_analytics_workspace.log_analytics.id","azurerm_log_analytics_workspace.log_analytics"]}},"schema_version":1},{"address":"azurerm_log_analytics_solution.vms","mode":"managed","type":"azurerm_log_analytics_solution","name":"vms","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_log_analytics_workspace.log_analytics.location","azurerm_log_analytics_workspace.log_analytics"]},"plan":[{"product":{"constant_value":"OMSGallery/VMInsights"},"publisher":{"constant_value":"Microsoft"}}],"resource_group_name":{"references":["azurerm_log_analytics_workspace.log_analytics.resource_group_name","azurerm_log_analytics_workspace.log_analytics"]},"solution_name":{"constant_value":"VMInsights"},"workspace_name":{"references":["azurerm_log_analytics_workspace.log_analytics.name","azurerm_log_analytics_workspace.log_analytics"]},"workspace_resource_id":{"references":["azurerm_log_analytics_workspace.log_analytics.id","azurerm_log_analytics_workspace.log_analytics"]}},"schema_version":1},{"address":"azurerm_log_analytics_workspace.log_analytics","mode":"managed","type":"azurerm_log_analytics_workspace","name":"log_analytics","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]},"retention_in_days":{"references":["var.retention"]},"sku":{"references":["var.sku"]}},"schema_version":3}],"variables":{"location":{"description":"Azure region of the Log Analytics workspace"},"name":{"description":"The name of the Log Analytics workspace"},"resource_group_name":{"description":"Name of the Log Analytics workspace resource group"},"retention":{"default":30,"description":"The retention time of the Log Analytics workspace"},"sku":{"default":null,"description":"The SKU of the Log Analytics workspace"}}}},"vm_appgw":{"source":"../modules/vm-linux/","expressions":{"admin_username":{"constant_value":"adminuser"},"custom_data":{"references":["count.index"]},"location":{"references":["azurerm_resource_group.example.location","azurerm_resource_group.example"]},"name":{"references":["count.index"]},"public_key":{"references":["var.ssh_public_key"]},"resource_group_name":{"references":["azurerm_resource_group.example.name","azurerm_resource_group.example"]},"subnet_id":{"references":["azurerm_subnet.default.id","azurerm_subnet.default"]}},"count_expression":{"references":["var.numberOfVMs"]},"module":{"outputs":{"id":{"expression":{"references":["azurerm_linux_virtual_machine.linux.id","azurerm_linux_virtual_machine.linux"]}},"ip_configuration_name":{"expression":{"references":["azurerm_network_interface.nic.ip_configuration[0].name","azurerm_network_interface.nic.ip_configuration[0]","azurerm_network_interface.nic.ip_configuration","azurerm_network_interface.nic"]}},"network_interface_id":{"expression":{"references":["azurerm_network_interface.nic.id","azurerm_network_interface.nic"]}},"network_interface_ipconfiguration":{"expression":{"references":["azurerm_network_interface.nic.ip_configuration","azurerm_network_interface.nic"]}},"nic_id":{"expression":{"references":["azurerm_network_interface.nic.id","azurerm_network_interface.nic"]}},"private_ip_address":{"expression":{"references":["azurerm_network_interface.nic.private_ip_address","azurerm_network_interface.nic"]}}},"resources":[{"address":"azurerm_dev_test_global_vm_shutdown_schedule.autoshutdown","mode":"managed","type":"azurerm_dev_test_global_vm_shutdown_schedule","name":"autoshutdown","provider_config_key":"azurerm","expressions":{"daily_recurrence_time":{"constant_value":"0200"},"enabled":{"constant_value":true},"location":{"references":["azurerm_linux_virtual_machine.linux.location","azurerm_linux_virtual_machine.linux"]},"notification_settings":[{"enabled":{"constant_value":false}}],"timezone":{"constant_value":"Tokyo Standard Time"},"virtual_machine_id":{"references":["azurerm_linux_virtual_machine.linux.id","azurerm_linux_virtual_machine.linux"]}},"schema_version":0},{"address":"azurerm_linux_virtual_machine.linux","mode":"managed","type":"azurerm_linux_virtual_machine","name":"linux","provider_config_key":"azurerm","expressions":{"admin_password":{"references":["var.admin_password"]},"admin_username":{"references":["var.admin_username"]},"availability_set_id":{"references":["var.availability_set_id"]},"boot_diagnostics":[{"storage_account_uri":{"constant_value":null}}],"custom_data":{"references":["var.custom_data","var.custom_data"]},"disable_password_authentication":{"constant_value":false},"location":{"references":["var.location"]},"name":{"references":["var.name"]},"network_interface_ids":{"references":["azurerm_network_interface.nic.id","azurerm_network_interface.nic"]},"os_disk":[{"caching":{"constant_value":"ReadWrite"},"storage_account_type":{"constant_value":"Premium_LRS"}}],"resource_group_name":{"references":["var.resource_group_name"]},"size":{"references":["var.vm_size"]},"source_image_reference":[{"offer":{"references":["var.source_image_reference.offer","var.source_image_reference"]},"publisher":{"references":["var.source_image_reference.publisher","var.source_image_reference"]},"sku":{"references":["var.source_image_reference.sku","var.source_image_reference"]},"version":{"references":["var.source_image_reference.version","var.source_image_reference"]}}],"zone":{"references":["var.zone"]}},"schema_version":0},{"address":"azurerm_network_interface.nic","mode":"managed","type":"azurerm_network_interface","name":"nic","provider_config_key":"azurerm","expressions":{"enable_accelerated_networking":{"references":["var.enable_accelerated_networking"]},"ip_configuration":[{"name":{"constant_value":"configuration"},"private_ip_address":{"references":["var.private_ip_address_allocation","var.private_ip_address"]},"private_ip_address_allocation":{"references":["var.private_ip_address_allocation"]},"public_ip_address_id":{"references":["azurerm_public_ip.pip.id","azurerm_public_ip.pip"]},"subnet_id":{"references":["var.subnet_id"]}}],"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_network_interface_security_group_association.example","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"example","provider_config_key":"azurerm","expressions":{"network_interface_id":{"references":["azurerm_network_interface.nic.id","azurerm_network_interface.nic"]},"network_security_group_id":{"references":["azurerm_network_security_group.nsg.id","azurerm_network_security_group.nsg"]}},"schema_version":0},{"address":"azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_network_security_rule.nsg-rule","mode":"managed","type":"azurerm_network_security_rule","name":"nsg-rule","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"destination_address_prefix":{"constant_value":"*"},"destination_port_ranges":{"constant_value":["22","80"]},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"remote_access"},"network_security_group_name":{"references":["azurerm_network_security_group.nsg.name","azurerm_network_security_group.nsg"]},"priority":{"constant_value":100},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"references":["var.source_address_prefix"]},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_public_ip.pip","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Standard"}},"schema_version":0}],"variables":{"admin_password":{"default":"Password1!"},"admin_username":{},"availability_set_id":{"default":null},"custom_data":{"default":""},"enable_accelerated_networking":{"default":false},"location":{},"name":{},"private_ip_address":{"default":null},"private_ip_address_allocation":{"default":"Dynamic"},"public_key":{"default":null},"resource_group_name":{},"source_address_prefix":{"default":"*"},"source_image_reference":{"default":{"offer":"0001-com-ubuntu-server-focal","publisher":"Canonical","sku":"20_04-lts-gen2","version":"latest"}},"subnet_id":{},"vm_size":{"default":"Standard_B2ms"},"zone":{"default":null}}}},"webserver":{"source":"../modules/vm-linux/","expressions":{"admin_username":{"constant_value":"adminuser"},"custom_data":{"constant_value":"#cloud-config\n  package_upgrade: true\n  packages:\n    - nginx\n"},"location":{"references":["azurerm_resource_group.frontend.location","azurerm_resource_group.frontend"]},"name":{"constant_value":"vmfrontend"},"public_key":{"references":["var.ssh_public_key"]},"resource_group_name":{"references":["azurerm_resource_group.frontend.name","azurerm_resource_group.frontend"]},"subnet_id":{"references":["azurerm_subnet.fe_vm.id","azurerm_subnet.fe_vm"]}},"module":{"outputs":{"id":{"expression":{"references":["azurerm_linux_virtual_machine.linux.id","azurerm_linux_virtual_machine.linux"]}},"ip_configuration_name":{"expression":{"references":["azurerm_network_interface.nic.ip_configuration[0].name","azurerm_network_interface.nic.ip_configuration[0]","azurerm_network_interface.nic.ip_configuration","azurerm_network_interface.nic"]}},"network_interface_id":{"expression":{"references":["azurerm_network_interface.nic.id","azurerm_network_interface.nic"]}},"network_interface_ipconfiguration":{"expression":{"references":["azurerm_network_interface.nic.ip_configuration","azurerm_network_interface.nic"]}},"nic_id":{"expression":{"references":["azurerm_network_interface.nic.id","azurerm_network_interface.nic"]}},"private_ip_address":{"expression":{"references":["azurerm_network_interface.nic.private_ip_address","azurerm_network_interface.nic"]}}},"resources":[{"address":"azurerm_dev_test_global_vm_shutdown_schedule.autoshutdown","mode":"managed","type":"azurerm_dev_test_global_vm_shutdown_schedule","name":"autoshutdown","provider_config_key":"azurerm","expressions":{"daily_recurrence_time":{"constant_value":"0200"},"enabled":{"constant_value":true},"location":{"references":["azurerm_linux_virtual_machine.linux.location","azurerm_linux_virtual_machine.linux"]},"notification_settings":[{"enabled":{"constant_value":false}}],"timezone":{"constant_value":"Tokyo Standard Time"},"virtual_machine_id":{"references":["azurerm_linux_virtual_machine.linux.id","azurerm_linux_virtual_machine.linux"]}},"schema_version":0},{"address":"azurerm_linux_virtual_machine.linux","mode":"managed","type":"azurerm_linux_virtual_machine","name":"linux","provider_config_key":"azurerm","expressions":{"admin_password":{"references":["var.admin_password"]},"admin_username":{"references":["var.admin_username"]},"availability_set_id":{"references":["var.availability_set_id"]},"boot_diagnostics":[{"storage_account_uri":{"constant_value":null}}],"custom_data":{"references":["var.custom_data","var.custom_data"]},"disable_password_authentication":{"constant_value":false},"location":{"references":["var.location"]},"name":{"references":["var.name"]},"network_interface_ids":{"references":["azurerm_network_interface.nic.id","azurerm_network_interface.nic"]},"os_disk":[{"caching":{"constant_value":"ReadWrite"},"storage_account_type":{"constant_value":"Premium_LRS"}}],"resource_group_name":{"references":["var.resource_group_name"]},"size":{"references":["var.vm_size"]},"source_image_reference":[{"offer":{"references":["var.source_image_reference.offer","var.source_image_reference"]},"publisher":{"references":["var.source_image_reference.publisher","var.source_image_reference"]},"sku":{"references":["var.source_image_reference.sku","var.source_image_reference"]},"version":{"references":["var.source_image_reference.version","var.source_image_reference"]}}],"zone":{"references":["var.zone"]}},"schema_version":0},{"address":"azurerm_network_interface.nic","mode":"managed","type":"azurerm_network_interface","name":"nic","provider_config_key":"azurerm","expressions":{"enable_accelerated_networking":{"references":["var.enable_accelerated_networking"]},"ip_configuration":[{"name":{"constant_value":"configuration"},"private_ip_address":{"references":["var.private_ip_address_allocation","var.private_ip_address"]},"private_ip_address_allocation":{"references":["var.private_ip_address_allocation"]},"public_ip_address_id":{"references":["azurerm_public_ip.pip.id","azurerm_public_ip.pip"]},"subnet_id":{"references":["var.subnet_id"]}}],"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_network_interface_security_group_association.example","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"example","provider_config_key":"azurerm","expressions":{"network_interface_id":{"references":["azurerm_network_interface.nic.id","azurerm_network_interface.nic"]},"network_security_group_id":{"references":["azurerm_network_security_group.nsg.id","azurerm_network_security_group.nsg"]}},"schema_version":0},{"address":"azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_network_security_rule.nsg-rule","mode":"managed","type":"azurerm_network_security_rule","name":"nsg-rule","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"destination_address_prefix":{"constant_value":"*"},"destination_port_ranges":{"constant_value":["22","80"]},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"remote_access"},"network_security_group_name":{"references":["azurerm_network_security_group.nsg.name","azurerm_network_security_group.nsg"]},"priority":{"constant_value":100},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"references":["var.source_address_prefix"]},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_public_ip.pip","mode":"managed","type":"azurerm_public_ip","name":"pip","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["var.location"]},"name":{"references":["var.name"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Standard"}},"schema_version":0}],"variables":{"admin_password":{"default":"Password1!"},"admin_username":{},"availability_set_id":{"default":null},"custom_data":{"default":""},"enable_accelerated_networking":{"default":false},"location":{},"name":{},"private_ip_address":{"default":null},"private_ip_address_allocation":{"default":"Dynamic"},"public_key":{"default":null},"resource_group_name":{},"source_address_prefix":{"default":"*"},"source_image_reference":{"default":{"offer":"0001-com-ubuntu-server-focal","publisher":"Canonical","sku":"20_04-lts-gen2","version":"latest"}},"subnet_id":{},"vm_size":{"default":"Standard_B2ms"},"zone":{"default":null}}}}},"variables":{"backend_base_cidr_block":{"default":"172.16.0.0/16"},"frontend_base_cidr_block":{"default":"10.254.0.0/16"},"numberOfVMs":{"default":2},"pattern":{"default":"AppGW-with-PLS"},"rg":{},"ssh_public_key":{}}}},"relevant_attributes":[{"resource":"module.azfw.azurerm_public_ip.example","attribute":["id"]},{"resource":"module.vm_appgw[0].azurerm_linux_virtual_machine.linux","attribute":["location"]},{"resource":"module.webserver.azurerm_network_interface.nic","attribute":["id"]},{"resource":"module.vm_appgw.azurerm_network_interface.nic","attribute":["ip_configuration"]},{"resource":"module.vm_appgw.azurerm_linux_virtual_machine.linux","attribute":["id"]},{"resource":"data.azurerm_monitor_diagnostic_categories.appgw_diag_category","attribute":["logs"]},{"resource":"azurerm_resource_group.example","attribute":["location"]},{"resource":"module.vm_appgw[1].azurerm_network_security_group.nsg","attribute":["name"]},{"resource":"azurerm_route_table.vm","attribute":["id"]},{"resource":"module.bastion.azurerm_network_security_group.bastion","attribute":["id"]},{"resource":"module.webserver.azurerm_linux_virtual_machine.linux","attribute":["location"]},{"resource":"module.vm_appgw[0].azurerm_network_interface.nic","attribute":["ip_configuration"]},{"resource":"module.vm_appgw[0].azurerm_network_interface.nic","attribute":["ip_configuration",0,"name"]},{"resource":"azurerm_subnet.bastion","attribute":["id"]},{"resource":"module.la.azurerm_log_analytics_workspace.log_analytics","attribute":["id"]},{"resource":"module.fe_azfw.azurerm_public_ip.example","attribute":["id"]},{"resource":"module.vm_appgw[1].azurerm_network_security_group.nsg","attribute":["id"]},{"resource":"azurerm_route_table.azfw","attribute":["id"]},{"resource":"module.vm_appgw.azurerm_network_interface.nic","attribute":["ip_configuration",0,"name"]},{"resource":"module.webserver.azurerm_network_security_group.nsg","attribute":["id"]},{"resource":"azurerm_subnet.azfw","attribute":["id"]},{"resource":"module.fe_bastion.azurerm_network_security_group.bastion","attribute":["id"]},{"resource":"module.vm_appgw[0].azurerm_linux_virtual_machine.linux","attribute":["id"]},{"resource":"module.vm_appgw[1].azurerm_linux_virtual_machine.linux","attribute":["id"]},{"resource":"module.vm_appgw[0].azurerm_network_security_group.nsg","attribute":["name"]},{"resource":"module.bastion.azurerm_network_security_group.bastion","attribute":["name"]},{"resource":"module.vm_appgw[1].azurerm_public_ip.pip","attribute":["id"]},{"resource":"azurerm_public_ip.appgw","attribute":["id"]},{"resource":"module.la.azurerm_log_analytics_workspace.log_analytics","attribute":["workspace_id"]},{"resource":"random_string.uniqstr","attribute":["result"]},{"resource":"module.fe_azfw.azurerm_firewall_policy.example","attribute":["id"]},{"resource":"module.webserver.azurerm_linux_virtual_machine.linux","attribute":["id"]},{"resource":"module.webserver.azurerm_network_security_group.nsg","attribute":["name"]},{"resource":"module.fe_bastion.azurerm_network_security_group.bastion","attribute":["name"]},{"resource":"module.la.azurerm_log_analytics_workspace.log_analytics","attribute":["name"]},{"resource":"module.vm_appgw[1].azurerm_network_interface.nic","attribute":["ip_configuration",0,"name"]},{"resource":"module.vm_appgw[1].azurerm_network_interface.nic","attribute":["ip_configuration"]},{"resource":"module.azfw.azurerm_firewall.example","attribute":["name"]},{"resource":"azurerm_subnet.fe_azfw","attribute":["id"]},{"resource":"module.azfw.azurerm_firewall_policy.example","attribute":["id"]},{"resource":"azurerm_subnet.pe","attribute":["id"]},{"resource":"module.webserver.azurerm_network_interface.nic","attribute":["private_ip_address"]},{"resource":"module.vm_appgw.azurerm_network_interface.nic","attribute":["id"]},{"resource":"azurerm_resource_group.frontend","attribute":["location"]},{"resource":"azurerm_application_gateway.network","attribute":["id"]},{"resource":"data.azurerm_monitor_diagnostic_categories.azfw_diag_category","attribute":["logs"]},{"resource":"module.vm_appgw[1].azurerm_network_interface.nic","attribute":["private_ip_address"]},{"resource":"module.la.azurerm_log_analytics_workspace.log_analytics","attribute":["location"]},{"resource":"module.vm_appgw[0].azurerm_network_security_group.nsg","attribute":["id"]},{"resource":"module.vm_appgw[1].azurerm_linux_virtual_machine.linux","attribute":["location"]},{"resource":"azurerm_resource_group.example","attribute":["name"]},{"resource":"module.webserver.azurerm_network_interface.nic","attribute":["ip_configuration",0,"name"]},{"resource":"module.fe_azfw.azurerm_firewall.example","attribute":["name"]},{"resource":"module.fe_azfw.azurerm_firewall.example","attribute":["ip_configuration",0,"private_ip_address"]},{"resource":"azurerm_resource_group.frontend","attribute":["name"]},{"resource":"module.la.azurerm_log_analytics_workspace.log_analytics","attribute":["resource_group_name"]},{"resource":"module.webserver.azurerm_network_interface.nic","attribute":["ip_configuration"]},{"resource":"module.vm_appgw[0].azurerm_network_interface.nic","attribute":["id"]},{"resource":"azurerm_subnet.pls","attribute":["id"]},{"resource":"module.vm_appgw[0].azurerm_network_interface.nic","attribute":["private_ip_address"]},{"resource":"module.azfw.azurerm_firewall.example","attribute":["ip_configuration",0,"private_ip_address"]},{"resource":"azurerm_subnet.default","attribute":["id"]},{"resource":"module.webserver.azurerm_public_ip.pip","attribute":["id"]},{"resource":"module.vm_appgw[0].azurerm_public_ip.pip","attribute":["id"]},{"resource":"module.azfw.azurerm_public_ip.example","attribute":["ip_address"]},{"resource":"azurerm_subnet.fe_bastion","attribute":["id"]},{"resource":"azurerm_resource_group.frontend","attribute":[]},{"resource":"module.vm_appgw.azurerm_public_ip.pip","attribute":["id"]},{"resource":"module.fe_bastion.azurerm_public_ip.bastion","attribute":["id"]},{"resource":"azurerm_subnet.appgw","attribute":["id"]},{"resource":"module.vm_appgw.azurerm_network_interface.nic","attribute":["private_ip_address"]},{"resource":"module.bastion.azurerm_public_ip.bastion","attribute":["id"]},{"resource":"azurerm_virtual_network.frontend","attribute":["name"]},{"resource":"module.fe_azfw.azurerm_public_ip.example","attribute":["ip_address"]},{"resource":"azurerm_subnet.fe_vm","attribute":["id"]},{"resource":"module.azfw.azurerm_firewall.example","attribute":["id"]},{"resource":"azurerm_virtual_network.example","attribute":["name"]},{"resource":"module.vm_appgw[1].azurerm_network_interface.nic","attribute":["id"]},{"resource":"module.fe_azfw.azurerm_firewall.example","attribute":["id"]}],"checks":[{"address":{"kind":"var","name":"pattern","to_display":"var.pattern"},"status":"pass","instances":[{"address":{"to_display":"var.pattern"},"status":"pass"}]}],"timestamp":"2024-08-17T00:01:05Z","applyable":true,"complete":true,"errored":false}
