{"format_version":"1.2","terraform_version":"1.9.4","variables":{"address_space":{"value":["10.0.0.0/16"]},"admin_password":{"value":"Password1234!"},"admin_username":{"value":"adminuser"},"contact_email":{"value":"adminemailadrress@gmail.com"},"contact_phone":{"value":"+2340800000000"},"db_subnet_id":{"value":"db_subnet_id"},"environment":{"value":"Production"},"location":{"value":"southafricanorth"},"resource_group_name":{"value":"my-resource-group"},"sql_db_name":{"value":"zenpaysqldb"},"sql_server_name":{"value":"zenpaysqlserver"},"vnet_name":{"value":"zenpay-vnet"},"web_subnet_id":{"value":"web_subnet_id"}},"planned_values":{"outputs":{"appgw_id":{"sensitive":false},"appgw_public_ip_id":{"sensitive":false},"appgw_subnet_address_prefixes":{"sensitive":false,"type":["list","string"],"value":["10.0.3.0/24"]},"appgw_subnet_id":{"sensitive":false},"appgw_subnet_name":{"sensitive":false,"type":"string","value":"appgw-subnet"},"avset_id":{"sensitive":false},"backend_pool_id":{"sensitive":false},"db_nic_id":{"sensitive":false},"db_nsg_id":{"sensitive":false},"db_subnet_address_prefixes":{"sensitive":false,"type":["list","string"],"value":["10.0.2.0/24"]},"db_subnet_id":{"sensitive":false},"db_subnet_name":{"sensitive":false,"type":"string","value":"db-subnet"},"db_vm_id":{"sensitive":false},"lb_rule_id":{"sensitive":false},"load_balancer_id":{"sensitive":false},"log_analytics_workspace_id":{"sensitive":false},"probe_id":{"sensitive":false},"resource_group_location":{"sensitive":false,"type":"string","value":"South Africa North"},"resource_group_name":{"sensitive":false,"type":"string","value":"zenpayrg"},"security_contact_email":{"sensitive":false,"type":"string","value":"adminemailadrress@gmail.com"},"sql_db_name":{"sensitive":false,"type":"string","value":"zenpaysqldb"},"sql_server_name":{"sensitive":false,"type":"string","value":"zenpaysqlserver"},"web_nic_ids":{"sensitive":false},"web_nsg_id":{"sensitive":false},"web_subnet_address_prefixes":{"sensitive":false,"type":["list","string"],"value":["10.0.1.0/24"]},"web_subnet_id":{"sensitive":false},"web_subnet_name":{"sensitive":false,"type":"string","value":"web-subnet"},"web_vm_ids":{"sensitive":false},"zenpay_vnet_id":{"sensitive":false},"zenpay_vnet_name":{"sensitive":false,"type":"string","value":"zenpay-vnet"}},"root_module":{"child_modules":[{"resources":[{"address":"module.appgw_subnet.azurerm_subnet.web","mode":"managed","type":"azurerm_subnet","name":"web","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.0.3.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"appgw-subnet","resource_group_name":"my-resource-group","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"zenpay-vnet"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}}],"address":"module.appgw_subnet"},{"resources":[{"address":"module.applicationgateway.azurerm_application_gateway.zenpay_appgw","mode":"managed","type":"azurerm_application_gateway","name":"zenpay_appgw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[],"name":"appgw-backend-pool"}],"backend_http_settings":[{"affinity_cookie_name":"","authentication_certificate":[],"connection_draining":[],"cookie_based_affinity":"Disabled","host_name":"","name":"appgw-backend-http-settings","path":"","pick_host_name_from_backend_address":false,"port":80,"probe_name":"","protocol":"Http","request_timeout":30,"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"enable_http2":null,"fips_enabled":null,"firewall_policy_id":null,"force_firewall_policy_association":null,"frontend_ip_configuration":[{"name":"appgw-frontend-ip","private_ip_address_allocation":"Dynamic","private_link_configuration_name":null,"subnet_id":null}],"frontend_port":[{"name":"appgw-http-port","port":80}],"gateway_ip_configuration":[{"name":"appgw-ip-configuration"}],"global":[],"http_listener":[{"custom_error_configuration":[],"firewall_policy_id":"","frontend_ip_configuration_name":"appgw-frontend-ip","frontend_port_name":"appgw-http-port","host_name":"","host_names":[],"name":"appgw-http-listener","protocol":"Http","require_sni":null,"ssl_certificate_name":"","ssl_profile_name":""}],"identity":[],"location":"southafricanorth","name":"zenpay-appgw","private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{"backend_address_pool_name":"appgw-backend-pool","backend_http_settings_name":"appgw-backend-http-settings","http_listener_name":"appgw-http-listener","name":"appgw-routing-rule","priority":1,"redirect_configuration_name":"","rewrite_rule_set_name":"","rule_type":"Basic","url_path_map_name":""}],"resource_group_name":"my-resource-group","rewrite_rule_set":[],"sku":[{"capacity":2,"name":"Standard_v2","tier":"Standard_v2"}],"ssl_certificate":[],"ssl_profile":[],"tags":null,"timeouts":null,"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[],"zones":null},"sensitive_values":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[]}],"backend_http_settings":[{"authentication_certificate":[],"connection_draining":[],"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"frontend_ip_configuration":[{}],"frontend_port":[{}],"gateway_ip_configuration":[{}],"global":[],"http_listener":[{"custom_error_configuration":[],"host_names":[]}],"identity":[],"private_endpoint_connection":[],"private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{}],"rewrite_rule_set":[],"sku":[{}],"ssl_certificate":[],"ssl_policy":[],"ssl_profile":[],"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[]}},{"address":"module.applicationgateway.azurerm_public_ip.appgw_pip","mode":"managed","type":"azurerm_public_ip","name":"appgw_pip","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"southafricanorth","name":"appgw-pip","public_ip_prefix_id":null,"resource_group_name":"my-resource-group","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}}],"address":"module.applicationgateway"},{"resources":[{"address":"module.db_nsg.azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"southafricanorth","name":"db-nsg","resource_group_name":"my-resource-group","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"1433","destination_port_ranges":[],"direction":"Inbound","name":"allow-sql","priority":100,"protocol":"Tcp","source_address_prefix":"10.0.1.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"sensitive_values":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}],"address":"module.db_nsg"},{"resources":[{"address":"module.db_subnet.azurerm_subnet.web","mode":"managed","type":"azurerm_subnet","name":"web","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.0.2.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"db-subnet","resource_group_name":"my-resource-group","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"zenpay-vnet"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}}],"address":"module.db_subnet"},{"resources":[{"address":"module.keyvault_backup.azurerm_backup_policy_vm.vm_backup_policy","mode":"managed","type":"azurerm_backup_policy_vm","name":"vm_backup_policy","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"backup":[{"frequency":"Daily","hour_duration":null,"hour_interval":null,"time":"23:00","weekdays":null}],"instant_restore_resource_group":[],"name":"vm-backup-policy","policy_type":"V1","recovery_vault_name":"zenpayrecoveryvault","resource_group_name":"my-resource-group","retention_daily":[{"count":10}],"retention_monthly":[{"count":7,"days":null,"include_last_days":false,"weekdays":["Sunday","Wednesday"],"weeks":["First","Last"]}],"retention_weekly":[{"count":42,"weekdays":["Friday","Saturday","Sunday","Wednesday"]}],"retention_yearly":[],"tiering_policy":[],"timeouts":null,"timezone":"UTC"},"sensitive_values":{"backup":[{}],"instant_restore_resource_group":[],"retention_daily":[{}],"retention_monthly":[{"weekdays":[false,false],"weeks":[false,false]}],"retention_weekly":[{"weekdays":[false,false,false,false]}],"retention_yearly":[],"tiering_policy":[]}},{"address":"module.keyvault_backup.azurerm_key_vault.zenpay_key_vault","mode":"managed","type":"azurerm_key_vault","name":"zenpay_key_vault","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"access_policy":[{"application_id":null,"certificate_permissions":null,"key_permissions":["Get","List"],"object_id":"62e5370a-2bf4-4734-8511-cc798825f062","secret_permissions":["Get","List"],"storage_permissions":null,"tenant_id":"e66e77b4-5724-44d7-8721-06df160450ce"}],"enable_rbac_authorization":null,"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"southafricanorth","name":"zenpayzpkeyvault","public_network_access_enabled":true,"purge_protection_enabled":null,"resource_group_name":"my-resource-group","sku_name":"standard","soft_delete_retention_days":90,"tags":null,"tenant_id":"e66e77b4-5724-44d7-8721-06df160450ce","timeouts":null},"sensitive_values":{"access_policy":[{"key_permissions":[false,false],"secret_permissions":[false,false]}],"contact":[],"network_acls":[]}},{"address":"module.keyvault_backup.azurerm_recovery_services_vault.zenpay_recovery_vault","mode":"managed","type":"azurerm_recovery_services_vault","name":"zenpay_recovery_vault","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"classic_vmware_replication_enabled":null,"cross_region_restore_enabled":false,"encryption":[],"identity":[],"location":"southafricanorth","monitoring":[],"name":"zenpayrecoveryvault","public_network_access_enabled":true,"resource_group_name":"my-resource-group","sku":"Standard","soft_delete_enabled":true,"storage_mode_type":"GeoRedundant","tags":null,"timeouts":null},"sensitive_values":{"encryption":[],"identity":[],"monitoring":[]}}],"address":"module.keyvault_backup"},{"resources":[{"address":"module.loadbalancer.azurerm_lb.web_lb","mode":"managed","type":"azurerm_lb","name":"web_lb","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"edge_zone":null,"frontend_ip_configuration":[{"name":"web-lb-frontend","zones":null}],"location":"southafricanorth","name":"web-lb","resource_group_name":"my-resource-group","sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null},"sensitive_values":{"frontend_ip_configuration":[{"inbound_nat_rules":[],"load_balancer_rules":[],"outbound_rules":[]}],"private_ip_addresses":[]}},{"address":"module.loadbalancer.azurerm_lb_backend_address_pool.web_lb_backend","mode":"managed","type":"azurerm_lb_backend_address_pool","name":"web_lb_backend","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"web-lb-backend","synchronous_mode":null,"timeouts":null,"tunnel_interface":[],"virtual_network_id":null},"sensitive_values":{"backend_ip_configurations":[],"inbound_nat_rules":[],"load_balancing_rules":[],"outbound_rules":[],"tunnel_interface":[]}},{"address":"module.loadbalancer.azurerm_lb_probe.web_lb_probe","mode":"managed","type":"azurerm_lb_probe","name":"web_lb_probe","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"interval_in_seconds":15,"name":"http-probe","number_of_probes":2,"port":80,"probe_threshold":1,"protocol":"Http","request_path":"/","timeouts":null},"sensitive_values":{"load_balancer_rules":[]}},{"address":"module.loadbalancer.azurerm_lb_rule.web_lb_rule","mode":"managed","type":"azurerm_lb_rule","name":"web_lb_rule","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"backend_port":80,"disable_outbound_snat":false,"enable_floating_ip":false,"enable_tcp_reset":null,"frontend_ip_configuration_name":"web-lb-frontend","frontend_port":80,"name":"http-rule","protocol":"Tcp","timeouts":null},"sensitive_values":{"backend_address_pool_ids":[]}},{"address":"module.loadbalancer.azurerm_public_ip.web_lb_pip","mode":"managed","type":"azurerm_public_ip","name":"web_lb_pip","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"southafricanorth","name":"web-lb-pip","public_ip_prefix_id":null,"resource_group_name":"my-resource-group","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}}],"address":"module.loadbalancer"},{"resources":[{"address":"module.security.azurerm_log_analytics_workspace.securitypostlog","mode":"managed","type":"azurerm_log_analytics_workspace","name":"securitypostlog","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":3,"values":{"allow_resource_only_permissions":true,"cmk_for_query_forced":null,"daily_quota_gb":-1,"data_collection_rule_id":null,"identity":[],"immediate_data_purge_on_30_days_enabled":null,"internet_ingestion_enabled":true,"internet_query_enabled":true,"local_authentication_disabled":false,"location":"southafricanorth","name":"security-posture-log-analytics","reservation_capacity_in_gb_per_day":null,"resource_group_name":"my-resource-group","retention_in_days":30,"sku":"PerGB2018","tags":null,"timeouts":null},"sensitive_values":{"identity":[],"primary_shared_key":true,"secondary_shared_key":true}},{"address":"module.security.azurerm_security_center_auto_provisioning.auto_provisioning","mode":"managed","type":"azurerm_security_center_auto_provisioning","name":"auto_provisioning","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"auto_provision":"On","timeouts":null},"sensitive_values":{}},{"address":"module.security.azurerm_security_center_contact.security_contact","mode":"managed","type":"azurerm_security_center_contact","name":"security_contact","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"alert_notifications":true,"alerts_to_admins":true,"email":"adminemailadrress@gmail.com","name":"default1","phone":"+2340800000000","timeouts":null},"sensitive_values":{}},{"address":"module.security.azurerm_security_center_workspace.securityposturews","mode":"managed","type":"azurerm_security_center_workspace","name":"securityposturews","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"scope":"zenpayrg","timeouts":null},"sensitive_values":{}}],"address":"module.security"},{"resources":[{"address":"module.sql.azurerm_sql_database.zenpaysqldb","mode":"managed","type":"azurerm_sql_database","name":"zenpaysqldb","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"create_mode":"Default","edition":"Standard","import":[],"location":"southafricanorth","name":"zenpaysqldb","read_scale":false,"requested_service_objective_name":"S0","resource_group_name":"my-resource-group","server_name":"zenpaysqlserver","tags":null,"timeouts":null,"zone_redundant":null},"sensitive_values":{"import":[],"threat_detection_policy":[]}},{"address":"module.sql.azurerm_sql_firewall_rule.allow_azure_services","mode":"managed","type":"azurerm_sql_firewall_rule","name":"allow_azure_services","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"end_ip_address":"0.0.0.0","name":"AllowAzureServices","resource_group_name":"my-resource-group","server_name":"zenpaysqlserver","start_ip_address":"0.0.0.0","timeouts":null},"sensitive_values":{}},{"address":"module.sql.azurerm_sql_server.zenpaysqlserver","mode":"managed","type":"azurerm_sql_server","name":"zenpaysqlserver","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"administrator_login":"adminuser","administrator_login_password":"Password1234!","connection_policy":"Default","identity":[],"location":"southafricanorth","name":"zenpaysqlserver","resource_group_name":"my-resource-group","tags":{"environment":"Production"},"timeouts":null,"version":"12.0"},"sensitive_values":{"administrator_login_password":true,"identity":[],"tags":{},"threat_detection_policy":[]}}],"address":"module.sql"},{"resources":[{"address":"module.virtualmachines.azurerm_availability_set.avset","mode":"managed","type":"azurerm_availability_set","name":"avset","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"southafricanorth","managed":true,"name":"web-avset","platform_fault_domain_count":2,"platform_update_domain_count":5,"proximity_placement_group_id":null,"resource_group_name":"my-resource-group","tags":null,"timeouts":null},"sensitive_values":{}},{"address":"module.virtualmachines.azurerm_network_interface.db_nic","mode":"managed","type":"azurerm_network_interface","name":"db_nic","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"dbnic-ip","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"southafricanorth","name":"dbnic","resource_group_name":"my-resource-group","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.virtualmachines.azurerm_network_interface.web_nic[0]","mode":"managed","type":"azurerm_network_interface","name":"web_nic","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"webnic0-ip","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"southafricanorth","name":"webnic0","resource_group_name":"my-resource-group","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.virtualmachines.azurerm_network_interface.web_nic[1]","mode":"managed","type":"azurerm_network_interface","name":"web_nic","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"webnic1-ip","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"southafricanorth","name":"webnic1","resource_group_name":"my-resource-group","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.virtualmachines.azurerm_virtual_machine.db_vm","mode":"managed","type":"azurerm_virtual_machine","name":"db_vm","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":false,"identity":[],"location":"southafricanorth","name":"dbvm","os_profile":[{"admin_password":"Password1234!","admin_username":"adminuser","computer_name":"hostname-db"}],"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"enable_automatic_upgrades":false,"provision_vm_agent":false,"timezone":"","winrm":[]}],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"my-resource-group","storage_image_reference":[{"id":"","offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","disk_size_gb":256,"image_uri":null,"managed_disk_type":"Premium_LRS","name":"db_os_disk","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D4s_v3","zones":null},"sensitive_values":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":true,"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"winrm":[]}],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}},{"address":"module.virtualmachines.azurerm_virtual_machine.web_vm[0]","mode":"managed","type":"azurerm_virtual_machine","name":"web_vm","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":false,"identity":[],"location":"southafricanorth","name":"webvm0","os_profile":[{"admin_password":"Password1234!","admin_username":"adminuser","computer_name":"hostname0"}],"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"enable_automatic_upgrades":false,"provision_vm_agent":false,"timezone":"","winrm":[]}],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"my-resource-group","storage_image_reference":[{"id":"","offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","disk_size_gb":128,"image_uri":null,"managed_disk_type":"Premium_LRS","name":"web_os_disk0","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D2s_v3","zones":null},"sensitive_values":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":true,"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"winrm":[]}],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}},{"address":"module.virtualmachines.azurerm_virtual_machine.web_vm[1]","mode":"managed","type":"azurerm_virtual_machine","name":"web_vm","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":false,"identity":[],"location":"southafricanorth","name":"webvm1","os_profile":[{"admin_password":"Password1234!","admin_username":"adminuser","computer_name":"hostname1"}],"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"enable_automatic_upgrades":false,"provision_vm_agent":false,"timezone":"","winrm":[]}],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"my-resource-group","storage_image_reference":[{"id":"","offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","disk_size_gb":128,"image_uri":null,"managed_disk_type":"Premium_LRS","name":"web_os_disk1","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D2s_v3","zones":null},"sensitive_values":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":true,"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"winrm":[]}],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}}],"address":"module.virtualmachines"},{"resources":[{"address":"module.virtualnetwork.azurerm_virtual_network.zenpay_vnet","mode":"managed","type":"azurerm_virtual_network","name":"zenpay_vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.0.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"southafricanorth","name":"zenpay-vnet","resource_group_name":"my-resource-group","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}],"address":"module.virtualnetwork"},{"resources":[{"address":"module.web_nsg.azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"southafricanorth","name":"web-nsg","resource_group_name":"my-resource-group","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"443","destination_port_ranges":[],"direction":"Inbound","name":"allow-https","priority":110,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"80","destination_port_ranges":[],"direction":"Inbound","name":"allow-http","priority":100,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"sensitive_values":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}],"address":"module.web_nsg"},{"resources":[{"address":"module.web_subnet.azurerm_subnet.web","mode":"managed","type":"azurerm_subnet","name":"web","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.0.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"web-subnet","resource_group_name":"my-resource-group","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"zenpay-vnet"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}}],"address":"module.web_subnet"},{"resources":[{"address":"module.zenpay_resource_group.azurerm_resource_group.zenpayrg","mode":"managed","type":"azurerm_resource_group","name":"zenpayrg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"southafricanorth","managed_by":null,"name":"zenpayrg","tags":null,"timeouts":null},"sensitive_values":{}}],"address":"module.zenpay_resource_group"}]}},"resource_changes":[{"address":"module.appgw_subnet.azurerm_subnet.web","module_address":"module.appgw_subnet","mode":"managed","type":"azurerm_subnet","name":"web","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.0.3.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"appgw-subnet","resource_group_name":"my-resource-group","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"zenpay-vnet"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.applicationgateway.azurerm_application_gateway.zenpay_appgw","module_address":"module.applicationgateway","mode":"managed","type":"azurerm_application_gateway","name":"zenpay_appgw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[],"name":"appgw-backend-pool"}],"backend_http_settings":[{"affinity_cookie_name":"","authentication_certificate":[],"connection_draining":[],"cookie_based_affinity":"Disabled","host_name":"","name":"appgw-backend-http-settings","path":"","pick_host_name_from_backend_address":false,"port":80,"probe_name":"","protocol":"Http","request_timeout":30,"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"enable_http2":null,"fips_enabled":null,"firewall_policy_id":null,"force_firewall_policy_association":null,"frontend_ip_configuration":[{"name":"appgw-frontend-ip","private_ip_address_allocation":"Dynamic","private_link_configuration_name":null,"subnet_id":null}],"frontend_port":[{"name":"appgw-http-port","port":80}],"gateway_ip_configuration":[{"name":"appgw-ip-configuration"}],"global":[],"http_listener":[{"custom_error_configuration":[],"firewall_policy_id":"","frontend_ip_configuration_name":"appgw-frontend-ip","frontend_port_name":"appgw-http-port","host_name":"","host_names":[],"name":"appgw-http-listener","protocol":"Http","require_sni":null,"ssl_certificate_name":"","ssl_profile_name":""}],"identity":[],"location":"southafricanorth","name":"zenpay-appgw","private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{"backend_address_pool_name":"appgw-backend-pool","backend_http_settings_name":"appgw-backend-http-settings","http_listener_name":"appgw-http-listener","name":"appgw-routing-rule","priority":1,"redirect_configuration_name":"","rewrite_rule_set_name":"","rule_type":"Basic","url_path_map_name":""}],"resource_group_name":"my-resource-group","rewrite_rule_set":[],"sku":[{"capacity":2,"name":"Standard_v2","tier":"Standard_v2"}],"ssl_certificate":[],"ssl_profile":[],"tags":null,"timeouts":null,"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[],"zones":null},"after_unknown":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"id":true,"ip_addresses":[]}],"backend_http_settings":[{"authentication_certificate":[],"connection_draining":[],"id":true,"probe_id":true,"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"frontend_ip_configuration":[{"id":true,"private_ip_address":true,"private_link_configuration_id":true,"public_ip_address_id":true}],"frontend_port":[{"id":true}],"gateway_ip_configuration":[{"id":true,"subnet_id":true}],"global":[],"http_listener":[{"custom_error_configuration":[],"frontend_ip_configuration_id":true,"frontend_port_id":true,"host_names":[],"id":true,"ssl_certificate_id":true,"ssl_profile_id":true}],"id":true,"identity":[],"private_endpoint_connection":true,"private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{"backend_address_pool_id":true,"backend_http_settings_id":true,"http_listener_id":true,"id":true,"redirect_configuration_id":true,"rewrite_rule_set_id":true,"url_path_map_id":true}],"rewrite_rule_set":[],"sku":[{}],"ssl_certificate":[],"ssl_policy":true,"ssl_profile":[],"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[]},"before_sensitive":false,"after_sensitive":{"authentication_certificate":[],"autoscale_configuration":[],"backend_address_pool":[{"fqdns":[],"ip_addresses":[]}],"backend_http_settings":[{"authentication_certificate":[],"connection_draining":[],"trusted_root_certificate_names":[]}],"custom_error_configuration":[],"frontend_ip_configuration":[{}],"frontend_port":[{}],"gateway_ip_configuration":[{}],"global":[],"http_listener":[{"custom_error_configuration":[],"host_names":[]}],"identity":[],"private_endpoint_connection":[],"private_link_configuration":[],"probe":[],"redirect_configuration":[],"request_routing_rule":[{}],"rewrite_rule_set":[],"sku":[{}],"ssl_certificate":[],"ssl_policy":[],"ssl_profile":[],"trusted_client_certificate":[],"trusted_root_certificate":[],"url_path_map":[],"waf_configuration":[]}}},{"address":"module.applicationgateway.azurerm_public_ip.appgw_pip","module_address":"module.applicationgateway","mode":"managed","type":"azurerm_public_ip","name":"appgw_pip","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"southafricanorth","name":"appgw-pip","public_ip_prefix_id":null,"resource_group_name":"my-resource-group","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.db_nsg.azurerm_network_security_group.nsg","module_address":"module.db_nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"southafricanorth","name":"db-nsg","resource_group_name":"my-resource-group","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"1433","destination_port_ranges":[],"direction":"Inbound","name":"allow-sql","priority":100,"protocol":"Tcp","source_address_prefix":"10.0.1.0/24","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]},"before_sensitive":false,"after_sensitive":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}},{"address":"module.db_subnet.azurerm_subnet.web","module_address":"module.db_subnet","mode":"managed","type":"azurerm_subnet","name":"web","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.0.2.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"db-subnet","resource_group_name":"my-resource-group","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"zenpay-vnet"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.keyvault_backup.azurerm_backup_policy_vm.vm_backup_policy","module_address":"module.keyvault_backup","mode":"managed","type":"azurerm_backup_policy_vm","name":"vm_backup_policy","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"backup":[{"frequency":"Daily","hour_duration":null,"hour_interval":null,"time":"23:00","weekdays":null}],"instant_restore_resource_group":[],"name":"vm-backup-policy","policy_type":"V1","recovery_vault_name":"zenpayrecoveryvault","resource_group_name":"my-resource-group","retention_daily":[{"count":10}],"retention_monthly":[{"count":7,"days":null,"include_last_days":false,"weekdays":["Sunday","Wednesday"],"weeks":["First","Last"]}],"retention_weekly":[{"count":42,"weekdays":["Friday","Saturday","Sunday","Wednesday"]}],"retention_yearly":[],"tiering_policy":[],"timeouts":null,"timezone":"UTC"},"after_unknown":{"backup":[{}],"id":true,"instant_restore_resource_group":[],"instant_restore_retention_days":true,"retention_daily":[{}],"retention_monthly":[{"weekdays":[false,false],"weeks":[false,false]}],"retention_weekly":[{"weekdays":[false,false,false,false]}],"retention_yearly":[],"tiering_policy":[]},"before_sensitive":false,"after_sensitive":{"backup":[{}],"instant_restore_resource_group":[],"retention_daily":[{}],"retention_monthly":[{"weekdays":[false,false],"weeks":[false,false]}],"retention_weekly":[{"weekdays":[false,false,false,false]}],"retention_yearly":[],"tiering_policy":[]}}},{"address":"module.keyvault_backup.azurerm_key_vault.zenpay_key_vault","module_address":"module.keyvault_backup","mode":"managed","type":"azurerm_key_vault","name":"zenpay_key_vault","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access_policy":[{"application_id":null,"certificate_permissions":null,"key_permissions":["Get","List"],"object_id":"62e5370a-2bf4-4734-8511-cc798825f062","secret_permissions":["Get","List"],"storage_permissions":null,"tenant_id":"e66e77b4-5724-44d7-8721-06df160450ce"}],"enable_rbac_authorization":null,"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"southafricanorth","name":"zenpayzpkeyvault","public_network_access_enabled":true,"purge_protection_enabled":null,"resource_group_name":"my-resource-group","sku_name":"standard","soft_delete_retention_days":90,"tags":null,"tenant_id":"e66e77b4-5724-44d7-8721-06df160450ce","timeouts":null},"after_unknown":{"access_policy":[{"key_permissions":[false,false],"secret_permissions":[false,false]}],"contact":true,"id":true,"network_acls":true,"vault_uri":true},"before_sensitive":false,"after_sensitive":{"access_policy":[{"key_permissions":[false,false],"secret_permissions":[false,false]}],"contact":[],"network_acls":[]}}},{"address":"module.keyvault_backup.azurerm_recovery_services_vault.zenpay_recovery_vault","module_address":"module.keyvault_backup","mode":"managed","type":"azurerm_recovery_services_vault","name":"zenpay_recovery_vault","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"classic_vmware_replication_enabled":null,"cross_region_restore_enabled":false,"encryption":[],"identity":[],"location":"southafricanorth","monitoring":[],"name":"zenpayrecoveryvault","public_network_access_enabled":true,"resource_group_name":"my-resource-group","sku":"Standard","soft_delete_enabled":true,"storage_mode_type":"GeoRedundant","tags":null,"timeouts":null},"after_unknown":{"encryption":[],"id":true,"identity":[],"immutability":true,"monitoring":[]},"before_sensitive":false,"after_sensitive":{"encryption":[],"identity":[],"monitoring":[]}}},{"address":"module.loadbalancer.azurerm_lb.web_lb","module_address":"module.loadbalancer","mode":"managed","type":"azurerm_lb","name":"web_lb","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"edge_zone":null,"frontend_ip_configuration":[{"name":"web-lb-frontend","zones":null}],"location":"southafricanorth","name":"web-lb","resource_group_name":"my-resource-group","sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null},"after_unknown":{"frontend_ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"id":true,"inbound_nat_rules":true,"load_balancer_rules":true,"outbound_rules":true,"private_ip_address":true,"private_ip_address_allocation":true,"private_ip_address_version":true,"public_ip_address_id":true,"public_ip_prefix_id":true,"subnet_id":true}],"id":true,"private_ip_address":true,"private_ip_addresses":true},"before_sensitive":false,"after_sensitive":{"frontend_ip_configuration":[{"inbound_nat_rules":[],"load_balancer_rules":[],"outbound_rules":[]}],"private_ip_addresses":[]}}},{"address":"module.loadbalancer.azurerm_lb_backend_address_pool.web_lb_backend","module_address":"module.loadbalancer","mode":"managed","type":"azurerm_lb_backend_address_pool","name":"web_lb_backend","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"web-lb-backend","synchronous_mode":null,"timeouts":null,"tunnel_interface":[],"virtual_network_id":null},"after_unknown":{"backend_ip_configurations":true,"id":true,"inbound_nat_rules":true,"load_balancing_rules":true,"loadbalancer_id":true,"outbound_rules":true,"tunnel_interface":[]},"before_sensitive":false,"after_sensitive":{"backend_ip_configurations":[],"inbound_nat_rules":[],"load_balancing_rules":[],"outbound_rules":[],"tunnel_interface":[]}}},{"address":"module.loadbalancer.azurerm_lb_probe.web_lb_probe","module_address":"module.loadbalancer","mode":"managed","type":"azurerm_lb_probe","name":"web_lb_probe","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"interval_in_seconds":15,"name":"http-probe","number_of_probes":2,"port":80,"probe_threshold":1,"protocol":"Http","request_path":"/","timeouts":null},"after_unknown":{"id":true,"load_balancer_rules":true,"loadbalancer_id":true},"before_sensitive":false,"after_sensitive":{"load_balancer_rules":[]}}},{"address":"module.loadbalancer.azurerm_lb_rule.web_lb_rule","module_address":"module.loadbalancer","mode":"managed","type":"azurerm_lb_rule","name":"web_lb_rule","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"backend_port":80,"disable_outbound_snat":false,"enable_floating_ip":false,"enable_tcp_reset":null,"frontend_ip_configuration_name":"web-lb-frontend","frontend_port":80,"name":"http-rule","protocol":"Tcp","timeouts":null},"after_unknown":{"backend_address_pool_ids":true,"frontend_ip_configuration_id":true,"id":true,"idle_timeout_in_minutes":true,"load_distribution":true,"loadbalancer_id":true,"probe_id":true},"before_sensitive":false,"after_sensitive":{"backend_address_pool_ids":[]}}},{"address":"module.loadbalancer.azurerm_public_ip.web_lb_pip","module_address":"module.loadbalancer","mode":"managed","type":"azurerm_public_ip","name":"web_lb_pip","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"southafricanorth","name":"web-lb-pip","public_ip_prefix_id":null,"resource_group_name":"my-resource-group","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.security.azurerm_log_analytics_workspace.securitypostlog","module_address":"module.security","mode":"managed","type":"azurerm_log_analytics_workspace","name":"securitypostlog","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allow_resource_only_permissions":true,"cmk_for_query_forced":null,"daily_quota_gb":-1,"data_collection_rule_id":null,"identity":[],"immediate_data_purge_on_30_days_enabled":null,"internet_ingestion_enabled":true,"internet_query_enabled":true,"local_authentication_disabled":false,"location":"southafricanorth","name":"security-posture-log-analytics","reservation_capacity_in_gb_per_day":null,"resource_group_name":"my-resource-group","retention_in_days":30,"sku":"PerGB2018","tags":null,"timeouts":null},"after_unknown":{"id":true,"identity":[],"primary_shared_key":true,"secondary_shared_key":true,"workspace_id":true},"before_sensitive":false,"after_sensitive":{"identity":[],"primary_shared_key":true,"secondary_shared_key":true}}},{"address":"module.security.azurerm_security_center_auto_provisioning.auto_provisioning","module_address":"module.security","mode":"managed","type":"azurerm_security_center_auto_provisioning","name":"auto_provisioning","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auto_provision":"On","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.security.azurerm_security_center_contact.security_contact","module_address":"module.security","mode":"managed","type":"azurerm_security_center_contact","name":"security_contact","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"alert_notifications":true,"alerts_to_admins":true,"email":"adminemailadrress@gmail.com","name":"default1","phone":"+2340800000000","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.security.azurerm_security_center_workspace.securityposturews","module_address":"module.security","mode":"managed","type":"azurerm_security_center_workspace","name":"securityposturews","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"scope":"zenpayrg","timeouts":null},"after_unknown":{"id":true,"workspace_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.sql.azurerm_sql_database.zenpaysqldb","module_address":"module.sql","mode":"managed","type":"azurerm_sql_database","name":"zenpaysqldb","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"create_mode":"Default","edition":"Standard","import":[],"location":"southafricanorth","name":"zenpaysqldb","read_scale":false,"requested_service_objective_name":"S0","resource_group_name":"my-resource-group","server_name":"zenpaysqlserver","tags":null,"timeouts":null,"zone_redundant":null},"after_unknown":{"collation":true,"creation_date":true,"default_secondary_location":true,"elastic_pool_name":true,"encryption":true,"id":true,"import":[],"max_size_bytes":true,"max_size_gb":true,"requested_service_objective_id":true,"restore_point_in_time":true,"source_database_deletion_date":true,"source_database_id":true,"threat_detection_policy":true},"before_sensitive":false,"after_sensitive":{"import":[],"threat_detection_policy":[]}}},{"address":"module.sql.azurerm_sql_firewall_rule.allow_azure_services","module_address":"module.sql","mode":"managed","type":"azurerm_sql_firewall_rule","name":"allow_azure_services","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"end_ip_address":"0.0.0.0","name":"AllowAzureServices","resource_group_name":"my-resource-group","server_name":"zenpaysqlserver","start_ip_address":"0.0.0.0","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.sql.azurerm_sql_server.zenpaysqlserver","module_address":"module.sql","mode":"managed","type":"azurerm_sql_server","name":"zenpaysqlserver","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"administrator_login":"adminuser","administrator_login_password":"Password1234!","connection_policy":"Default","identity":[],"location":"southafricanorth","name":"zenpaysqlserver","resource_group_name":"my-resource-group","tags":{"environment":"Production"},"timeouts":null,"version":"12.0"},"after_unknown":{"fully_qualified_domain_name":true,"id":true,"identity":[],"tags":{},"threat_detection_policy":true},"before_sensitive":false,"after_sensitive":{"administrator_login_password":true,"identity":[],"tags":{},"threat_detection_policy":[]}}},{"address":"module.virtualmachines.azurerm_availability_set.avset","module_address":"module.virtualmachines","mode":"managed","type":"azurerm_availability_set","name":"avset","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"southafricanorth","managed":true,"name":"web-avset","platform_fault_domain_count":2,"platform_update_domain_count":5,"proximity_placement_group_id":null,"resource_group_name":"my-resource-group","tags":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.virtualmachines.azurerm_network_interface.db_nic","module_address":"module.virtualmachines","mode":"managed","type":"azurerm_network_interface","name":"db_nic","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"dbnic-ip","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"southafricanorth","name":"dbnic","resource_group_name":"my-resource-group","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_accelerated_networking":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.virtualmachines.azurerm_network_interface.web_nic[0]","module_address":"module.virtualmachines","mode":"managed","type":"azurerm_network_interface","name":"web_nic","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"webnic0-ip","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"southafricanorth","name":"webnic0","resource_group_name":"my-resource-group","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_accelerated_networking":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.virtualmachines.azurerm_network_interface.web_nic[1]","module_address":"module.virtualmachines","mode":"managed","type":"azurerm_network_interface","name":"web_nic","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"webnic1-ip","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4","public_ip_address_id":null}],"location":"southafricanorth","name":"webnic1","resource_group_name":"my-resource-group","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_accelerated_networking":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.virtualmachines.azurerm_virtual_machine.db_vm","module_address":"module.virtualmachines","mode":"managed","type":"azurerm_virtual_machine","name":"db_vm","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":false,"identity":[],"location":"southafricanorth","name":"dbvm","os_profile":[{"admin_password":"Password1234!","admin_username":"adminuser","computer_name":"hostname-db"}],"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"enable_automatic_upgrades":false,"provision_vm_agent":false,"timezone":"","winrm":[]}],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"my-resource-group","storage_image_reference":[{"id":"","offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","disk_size_gb":256,"image_uri":null,"managed_disk_type":"Premium_LRS","name":"db_os_disk","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D4s_v3","zones":null},"after_unknown":{"additional_capabilities":[],"availability_set_id":true,"boot_diagnostics":[],"id":true,"identity":[],"license_type":true,"network_interface_ids":true,"os_profile":[{"custom_data":true}],"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"winrm":[]}],"plan":[],"storage_data_disk":true,"storage_image_reference":[{}],"storage_os_disk":[{"managed_disk_id":true,"os_type":true}]},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":true,"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"winrm":[]}],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}}},{"address":"module.virtualmachines.azurerm_virtual_machine.web_vm[0]","module_address":"module.virtualmachines","mode":"managed","type":"azurerm_virtual_machine","name":"web_vm","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":false,"identity":[],"location":"southafricanorth","name":"webvm0","os_profile":[{"admin_password":"Password1234!","admin_username":"adminuser","computer_name":"hostname0"}],"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"enable_automatic_upgrades":false,"provision_vm_agent":false,"timezone":"","winrm":[]}],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"my-resource-group","storage_image_reference":[{"id":"","offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","disk_size_gb":128,"image_uri":null,"managed_disk_type":"Premium_LRS","name":"web_os_disk0","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D2s_v3","zones":null},"after_unknown":{"additional_capabilities":[],"availability_set_id":true,"boot_diagnostics":[],"id":true,"identity":[],"license_type":true,"network_interface_ids":true,"os_profile":[{"custom_data":true}],"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"winrm":[]}],"plan":[],"storage_data_disk":true,"storage_image_reference":[{}],"storage_os_disk":[{"managed_disk_id":true,"os_type":true}]},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":true,"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"winrm":[]}],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}}},{"address":"module.virtualmachines.azurerm_virtual_machine.web_vm[1]","module_address":"module.virtualmachines","mode":"managed","type":"azurerm_virtual_machine","name":"web_vm","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"boot_diagnostics":[],"delete_data_disks_on_termination":false,"delete_os_disk_on_termination":false,"identity":[],"location":"southafricanorth","name":"webvm1","os_profile":[{"admin_password":"Password1234!","admin_username":"adminuser","computer_name":"hostname1"}],"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"enable_automatic_upgrades":false,"provision_vm_agent":false,"timezone":"","winrm":[]}],"plan":[],"primary_network_interface_id":null,"proximity_placement_group_id":null,"resource_group_name":"my-resource-group","storage_image_reference":[{"id":"","offer":"WindowsServer","publisher":"MicrosoftWindowsServer","sku":"2019-Datacenter","version":"latest"}],"storage_os_disk":[{"caching":"ReadWrite","create_option":"FromImage","disk_size_gb":128,"image_uri":null,"managed_disk_type":"Premium_LRS","name":"web_os_disk1","vhd_uri":null,"write_accelerator_enabled":false}],"tags":null,"timeouts":null,"vm_size":"Standard_D2s_v3","zones":null},"after_unknown":{"additional_capabilities":[],"availability_set_id":true,"boot_diagnostics":[],"id":true,"identity":[],"license_type":true,"network_interface_ids":true,"os_profile":[{"custom_data":true}],"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"winrm":[]}],"plan":[],"storage_data_disk":true,"storage_image_reference":[{}],"storage_os_disk":[{"managed_disk_id":true,"os_type":true}]},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"boot_diagnostics":[],"identity":[],"network_interface_ids":[],"os_profile":true,"os_profile_linux_config":[],"os_profile_secrets":[],"os_profile_windows_config":[{"additional_unattend_config":[],"winrm":[]}],"plan":[],"storage_data_disk":[],"storage_image_reference":[{}],"storage_os_disk":[{}]}}},{"address":"module.virtualnetwork.azurerm_virtual_network.zenpay_vnet","module_address":"module.virtualnetwork","mode":"managed","type":"azurerm_virtual_network","name":"zenpay_vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.0.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"southafricanorth","name":"zenpay-vnet","resource_group_name":"my-resource-group","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"encryption":[],"guid":true,"id":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}},{"address":"module.web_nsg.azurerm_network_security_group.nsg","module_address":"module.web_nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"southafricanorth","name":"web-nsg","resource_group_name":"my-resource-group","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"443","destination_port_ranges":[],"direction":"Inbound","name":"allow-https","priority":110,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"80","destination_port_ranges":[],"direction":"Inbound","name":"allow-http","priority":100,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]},"before_sensitive":false,"after_sensitive":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}},{"address":"module.web_subnet.azurerm_subnet.web","module_address":"module.web_subnet","mode":"managed","type":"azurerm_subnet","name":"web","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.0.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"web-subnet","resource_group_name":"my-resource-group","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"zenpay-vnet"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.zenpay_resource_group.azurerm_resource_group.zenpayrg","module_address":"module.zenpay_resource_group","mode":"managed","type":"azurerm_resource_group","name":"zenpayrg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"southafricanorth","managed_by":null,"name":"zenpayrg","tags":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}}],"output_changes":{"appgw_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"appgw_public_ip_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"appgw_subnet_address_prefixes":{"actions":["create"],"before":null,"after":["10.0.3.0/24"],"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"appgw_subnet_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"appgw_subnet_name":{"actions":["create"],"before":null,"after":"appgw-subnet","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"avset_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"backend_pool_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"db_nic_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"db_nsg_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"db_subnet_address_prefixes":{"actions":["create"],"before":null,"after":["10.0.2.0/24"],"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"db_subnet_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"db_subnet_name":{"actions":["create"],"before":null,"after":"db-subnet","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"db_vm_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"lb_rule_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"load_balancer_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"log_analytics_workspace_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"probe_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"resource_group_location":{"actions":["create"],"before":null,"after":"South Africa North","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"resource_group_name":{"actions":["create"],"before":null,"after":"zenpayrg","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"security_contact_email":{"actions":["create"],"before":null,"after":"adminemailadrress@gmail.com","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"sql_db_name":{"actions":["create"],"before":null,"after":"zenpaysqldb","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"sql_server_name":{"actions":["create"],"before":null,"after":"zenpaysqlserver","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"web_nic_ids":{"actions":["create"],"before":null,"after":[null,null],"after_unknown":[true,true],"before_sensitive":false,"after_sensitive":false},"web_nsg_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"web_subnet_address_prefixes":{"actions":["create"],"before":null,"after":["10.0.1.0/24"],"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"web_subnet_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"web_subnet_name":{"actions":["create"],"before":null,"after":"web-subnet","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"web_vm_ids":{"actions":["create"],"before":null,"after":[null,null],"after_unknown":[true,true],"before_sensitive":false,"after_sensitive":false},"zenpay_vnet_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"zenpay_vnet_name":{"actions":["create"],"before":null,"after":"zenpay-vnet","after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.9.4","values":{"outputs":{"appgw_subnet_address_prefixes":{"sensitive":false,"value":["10.0.3.0/24"],"type":["list","string"]},"appgw_subnet_name":{"sensitive":false,"value":"appgw-subnet","type":"string"},"db_subnet_address_prefixes":{"sensitive":false,"value":["10.0.2.0/24"],"type":["list","string"]},"db_subnet_name":{"sensitive":false,"value":"db-subnet","type":"string"},"resource_group_location":{"sensitive":false,"value":"South Africa North","type":"string"},"resource_group_name":{"sensitive":false,"value":"zenpayrg","type":"string"},"security_contact_email":{"sensitive":false,"value":"adminemailadrress@gmail.com","type":"string"},"sql_db_name":{"sensitive":false,"value":"zenpaysqldb","type":"string"},"sql_server_name":{"sensitive":false,"value":"zenpaysqlserver","type":"string"},"web_subnet_address_prefixes":{"sensitive":false,"value":["10.0.1.0/24"],"type":["list","string"]},"web_subnet_name":{"sensitive":false,"value":"web-subnet","type":"string"},"zenpay_vnet_name":{"sensitive":false,"value":"zenpay-vnet","type":"string"}},"root_module":{"resources":[{"address":"data.azurerm_client_config.owner","mode":"data","type":"azurerm_client_config","name":"owner","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"04b07795-8ddb-461a-bbee-02f9e1bf7b46","id":"Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9NjJlNTM3MGEtMmJmNC00NzM0LTg1MTEtY2M3OTg4MjVmMDYyO3N1YnNjcmlwdGlvbklkPTFiNzQxNGEzLWIwMzQtNGY3Yi05NzA4LTM1N2YxZGRlY2Q3YTt0ZW5hbnRJZD1lNjZlNzdiNC01NzI0LTQ0ZDctODcyMS0wNmRmMTYwNDUwY2U=","object_id":"62e5370a-2bf4-4734-8511-cc798825f062","subscription_id":"1b7414a3-b034-4f7b-9708-357f1ddecd7a","tenant_id":"e66e77b4-5724-44d7-8721-06df160450ce","timeouts":null},"sensitive_values":{}}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","expressions":{"features":[{}]}}},"root_module":{"outputs":{"appgw_id":{"expression":{"references":["module.applicationgateway.appgw_id","module.applicationgateway"]}},"appgw_public_ip_id":{"expression":{"references":["module.applicationgateway.appgw_public_ip_id","module.applicationgateway"]}},"appgw_subnet_address_prefixes":{"expression":{"references":["module.appgw_subnet.address_prefixes","module.appgw_subnet"]}},"appgw_subnet_id":{"expression":{"references":["module.appgw_subnet.subnet_id","module.appgw_subnet"]}},"appgw_subnet_name":{"expression":{"references":["module.appgw_subnet.subnet_name","module.appgw_subnet"]}},"avset_id":{"expression":{"references":["module.virtualmachines.avset_id","module.virtualmachines"]},"description":"The ID of the availability set"},"backend_pool_id":{"expression":{"references":["module.loadbalancer.backend_pool_id","module.loadbalancer"]},"description":"The ID of the load balancer backend address pool"},"db_nic_id":{"expression":{"references":["module.virtualmachines.db_nic_id","module.virtualmachines"]},"description":"The ID of the database network interface"},"db_nsg_id":{"expression":{"references":["module.db_nsg.nsg_id","module.db_nsg"]}},"db_subnet_address_prefixes":{"expression":{"references":["module.db_subnet.address_prefixes","module.db_subnet"]}},"db_subnet_id":{"expression":{"references":["module.db_subnet.subnet_id","module.db_subnet"]}},"db_subnet_name":{"expression":{"references":["module.db_subnet.subnet_name","module.db_subnet"]}},"db_vm_id":{"expression":{"references":["module.virtualmachines.db_vm_id","module.virtualmachines"]},"description":"The ID of the database virtual machine"},"lb_rule_id":{"expression":{"references":["module.loadbalancer.lb_rule_id","module.loadbalancer"]},"description":"The ID of the load balancer rule"},"load_balancer_id":{"expression":{"references":["module.loadbalancer.load_balancer_id","module.loadbalancer"]},"description":"The ID of the load balancer"},"log_analytics_workspace_id":{"expression":{"references":["module.security.log_analytics_workspace_id","module.security"]},"description":"The ID of the Log Analytics Workspace created for security posture."},"probe_id":{"expression":{"references":["module.loadbalancer.probe_id","module.loadbalancer"]},"description":"The ID of the load balancer probe"},"resource_group_location":{"expression":{"references":["module.zenpay_resource_group.resource_group_location","module.zenpay_resource_group"]},"description":"The location of the created resource group"},"resource_group_name":{"expression":{"references":["module.zenpay_resource_group.resource_group_name","module.zenpay_resource_group"]},"description":"The name of the created resource group"},"security_contact_email":{"expression":{"references":["module.security.security_contact_email","module.security"]},"description":"The email address of the security contact."},"sql_db_name":{"expression":{"references":["module.sql.sql_db_name","module.sql"]},"description":"The name of the SQL Database."},"sql_server_name":{"expression":{"references":["module.sql.sql_server_name","module.sql"]},"description":"The name of the SQL Server."},"web_nic_ids":{"expression":{"references":["module.virtualmachines.web_nic_ids","module.virtualmachines"]},"description":"The IDs of the web network interfaces"},"web_nsg_id":{"expression":{"references":["module.web_nsg.nsg_id","module.web_nsg"]}},"web_subnet_address_prefixes":{"expression":{"references":["module.web_subnet.address_prefixes","module.web_subnet"]}},"web_subnet_id":{"expression":{"references":["module.web_subnet.subnet_id","module.web_subnet"]}},"web_subnet_name":{"expression":{"references":["module.web_subnet.subnet_name","module.web_subnet"]}},"web_vm_ids":{"expression":{"references":["module.virtualmachines.web_vm_ids","module.virtualmachines"]},"description":"The IDs of the web virtual machines"},"zenpay_vnet_id":{"expression":{"references":["module.virtualnetwork.vnet_id","module.virtualnetwork"]}},"zenpay_vnet_name":{"expression":{"references":["module.virtualnetwork.vnet_name","module.virtualnetwork"]}}},"resources":[{"address":"data.azurerm_client_config.owner","mode":"data","type":"azurerm_client_config","name":"owner","provider_config_key":"azurerm","schema_version":0}],"module_calls":{"appgw_subnet":{"source":"./modules/subnet","expressions":{"address_prefixes":{"constant_value":["10.0.3.0/24"]},"resource_group_name":{"references":["var.resource_group_name"]},"subnet_name":{"constant_value":"appgw-subnet"},"virtual_network_name":{"references":["module.virtualnetwork.vnet_name","module.virtualnetwork"]}},"module":{"outputs":{"address_prefixes":{"expression":{"references":["azurerm_subnet.web.address_prefixes","azurerm_subnet.web"]},"description":"The address prefixes of the subnet"},"subnet_id":{"expression":{"references":["azurerm_subnet.web.id","azurerm_subnet.web"]},"description":"The ID of the subnet"},"subnet_name":{"expression":{"references":["azurerm_subnet.web.name","azurerm_subnet.web"]},"description":"The name of the subnet"}},"resources":[{"address":"azurerm_subnet.web","mode":"managed","type":"azurerm_subnet","name":"web","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.address_prefixes"]},"name":{"references":["var.subnet_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"virtual_network_name":{"references":["var.virtual_network_name"]}},"schema_version":0}],"variables":{"address_prefixes":{"description":"The address prefixes for the subnet"},"resource_group_name":{"description":"The name of the resource group where the subnet will be created"},"subnet_name":{"description":"The name of the subnet"},"virtual_network_name":{"description":"The name of the virtual network to which the subnet belongs"}}}},"applicationgateway":{"source":"./modules/applicationgateway","expressions":{"appgw_capacity":{"constant_value":2},"appgw_name":{"constant_value":"zenpay-appgw"},"appgw_pip_name":{"constant_value":"appgw-pip"},"appgw_subnet_id":{"references":["module.appgw_subnet.subnet_id","module.appgw_subnet"]},"location":{"references":["var.location"]},"resource_group_name":{"references":["var.resource_group_name"]}},"module":{"outputs":{"appgw_id":{"expression":{"references":["azurerm_application_gateway.zenpay_appgw.id","azurerm_application_gateway.zenpay_appgw"]}},"appgw_public_ip_id":{"expression":{"references":["azurerm_public_ip.appgw_pip.id","azurerm_public_ip.appgw_pip"]}}},"resources":[{"address":"azurerm_application_gateway.zenpay_appgw","mode":"managed","type":"azurerm_application_gateway","name":"zenpay_appgw","provider_config_key":"azurerm","expressions":{"backend_address_pool":[{"name":{"constant_value":"appgw-backend-pool"}}],"backend_http_settings":[{"cookie_based_affinity":{"constant_value":"Disabled"},"name":{"constant_value":"appgw-backend-http-settings"},"port":{"constant_value":80},"protocol":{"constant_value":"Http"}}],"frontend_ip_configuration":[{"name":{"constant_value":"appgw-frontend-ip"},"public_ip_address_id":{"references":["azurerm_public_ip.appgw_pip.id","azurerm_public_ip.appgw_pip"]}}],"frontend_port":[{"name":{"constant_value":"appgw-http-port"},"port":{"constant_value":80}}],"gateway_ip_configuration":[{"name":{"constant_value":"appgw-ip-configuration"},"subnet_id":{"references":["var.appgw_subnet_id"]}}],"http_listener":[{"frontend_ip_configuration_name":{"constant_value":"appgw-frontend-ip"},"frontend_port_name":{"constant_value":"appgw-http-port"},"name":{"constant_value":"appgw-http-listener"},"protocol":{"constant_value":"Http"}}],"location":{"references":["var.location"]},"name":{"references":["var.appgw_name"]},"request_routing_rule":[{"backend_address_pool_name":{"constant_value":"appgw-backend-pool"},"backend_http_settings_name":{"constant_value":"appgw-backend-http-settings"},"http_listener_name":{"constant_value":"appgw-http-listener"},"name":{"constant_value":"appgw-routing-rule"},"priority":{"constant_value":1},"rule_type":{"constant_value":"Basic"}}],"resource_group_name":{"references":["var.resource_group_name"]},"sku":[{"capacity":{"references":["var.appgw_capacity"]},"name":{"constant_value":"Standard_v2"},"tier":{"constant_value":"Standard_v2"}}]},"schema_version":0},{"address":"azurerm_public_ip.appgw_pip","mode":"managed","type":"azurerm_public_ip","name":"appgw_pip","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["var.location"]},"name":{"references":["var.appgw_pip_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Standard"}},"schema_version":0}],"variables":{"appgw_capacity":{"description":"The capacity of the Application Gateway."},"appgw_name":{"description":"The name of the Application Gateway."},"appgw_pip_name":{"description":"The name of the public IP for Application Gateway."},"appgw_subnet_id":{"description":"The subnet ID for the Application Gateway."},"location":{"description":"The location where the resources will be created."},"resource_group_name":{"description":"The name of the resource group."}}}},"db_nsg":{"source":"./modules/network_security_group","expressions":{"location":{"constant_value":"southafricanorth"},"nsg_name":{"constant_value":"db-nsg"},"resource_group_name":{"references":["var.resource_group_name"]},"security_rules":{"constant_value":[{"access":"Allow","destination_address_prefix":"*","destination_port_range":"1433","direction":"Inbound","name":"allow-sql","priority":100,"protocol":"Tcp","source_address_prefix":"10.0.1.0/24","source_port_range":"*"}]}},"module":{"outputs":{"nsg_id":{"expression":{"references":["azurerm_network_security_group.nsg.id","azurerm_network_security_group.nsg"]},"description":"The ID of the Network Security Group"},"nsg_name":{"expression":{"references":["azurerm_network_security_group.nsg.name","azurerm_network_security_group.nsg"]},"description":"The name of the Network Security Group"}},"resources":[{"address":"azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.nsg_name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0}],"variables":{"location":{"description":"The location where the NSG will be created"},"nsg_name":{"description":"The name of the Network Security Group"},"resource_group_name":{"description":"The name of the resource group where the NSG will be created"},"security_rules":{"description":"A list of security rules to apply to the NSG"}}}},"db_subnet":{"source":"./modules/subnet","expressions":{"address_prefixes":{"constant_value":["10.0.2.0/24"]},"resource_group_name":{"references":["var.resource_group_name"]},"subnet_name":{"constant_value":"db-subnet"},"virtual_network_name":{"references":["module.virtualnetwork.vnet_name","module.virtualnetwork"]}},"module":{"outputs":{"address_prefixes":{"expression":{"references":["azurerm_subnet.web.address_prefixes","azurerm_subnet.web"]},"description":"The address prefixes of the subnet"},"subnet_id":{"expression":{"references":["azurerm_subnet.web.id","azurerm_subnet.web"]},"description":"The ID of the subnet"},"subnet_name":{"expression":{"references":["azurerm_subnet.web.name","azurerm_subnet.web"]},"description":"The name of the subnet"}},"resources":[{"address":"azurerm_subnet.web","mode":"managed","type":"azurerm_subnet","name":"web","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.address_prefixes"]},"name":{"references":["var.subnet_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"virtual_network_name":{"references":["var.virtual_network_name"]}},"schema_version":0}],"variables":{"address_prefixes":{"description":"The address prefixes for the subnet"},"resource_group_name":{"description":"The name of the resource group where the subnet will be created"},"subnet_name":{"description":"The name of the subnet"},"virtual_network_name":{"description":"The name of the virtual network to which the subnet belongs"}}}},"keyvault_backup":{"source":"./modules/keyvault_backup","expressions":{"backup_frequency":{"constant_value":"Daily"},"backup_policy_name":{"constant_value":"vm-backup-policy"},"backup_time":{"constant_value":"23:00"},"key_vault_name":{"constant_value":"zenpayzpkeyvault"},"location":{"references":["var.location"]},"object_id":{"references":["data.azurerm_client_config.owner.object_id","data.azurerm_client_config.owner"]},"recovery_vault_name":{"constant_value":"zenpayrecoveryvault"},"resource_group_name":{"references":["var.resource_group_name"]},"retention_daily_count":{"constant_value":10},"retention_monthly_count":{"constant_value":7},"retention_monthly_days":{"constant_value":["Sunday","Wednesday"]},"retention_monthly_weeks":{"constant_value":["First","Last"]},"retention_weekly_count":{"constant_value":42},"retention_weekly_days":{"constant_value":["Sunday","Wednesday","Friday","Saturday"]},"tenant_id":{"references":["data.azurerm_client_config.owner.tenant_id","data.azurerm_client_config.owner"]},"timezone":{"constant_value":"UTC"}},"module":{"outputs":{"backup_policy_id":{"expression":{"references":["azurerm_backup_policy_vm.vm_backup_policy.id","azurerm_backup_policy_vm.vm_backup_policy"]},"description":"The ID of the VM backup policy."},"key_vault_id":{"expression":{"references":["azurerm_key_vault.zenpay_key_vault.id","azurerm_key_vault.zenpay_key_vault"]},"description":"The ID of the Azure Key Vault."},"recovery_vault_id":{"expression":{"references":["azurerm_recovery_services_vault.zenpay_recovery_vault.id","azurerm_recovery_services_vault.zenpay_recovery_vault"]},"description":"The ID of the Recovery Services Vault."}},"resources":[{"address":"azurerm_backup_policy_vm.vm_backup_policy","mode":"managed","type":"azurerm_backup_policy_vm","name":"vm_backup_policy","provider_config_key":"azurerm","expressions":{"backup":[{"frequency":{"references":["var.backup_frequency"]},"time":{"references":["var.backup_time"]}}],"name":{"references":["var.backup_policy_name"]},"recovery_vault_name":{"references":["azurerm_recovery_services_vault.zenpay_recovery_vault.name","azurerm_recovery_services_vault.zenpay_recovery_vault"]},"resource_group_name":{"references":["var.resource_group_name"]},"retention_daily":[{"count":{"references":["var.retention_daily_count"]}}],"retention_monthly":[{"count":{"references":["var.retention_monthly_count"]},"weekdays":{"references":["var.retention_monthly_days"]},"weeks":{"references":["var.retention_monthly_weeks"]}}],"retention_weekly":[{"count":{"references":["var.retention_weekly_count"]},"weekdays":{"references":["var.retention_weekly_days"]}}],"timezone":{"references":["var.timezone"]}},"schema_version":0},{"address":"azurerm_key_vault.zenpay_key_vault","mode":"managed","type":"azurerm_key_vault","name":"zenpay_key_vault","provider_config_key":"azurerm","expressions":{"access_policy":{"references":["var.object_id","var.tenant_id"]},"location":{"references":["var.location"]},"name":{"references":["var.key_vault_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku_name":{"constant_value":"standard"},"tenant_id":{"references":["var.tenant_id"]}},"schema_version":2},{"address":"azurerm_recovery_services_vault.zenpay_recovery_vault","mode":"managed","type":"azurerm_recovery_services_vault","name":"zenpay_recovery_vault","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.recovery_vault_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Standard"}},"schema_version":0}],"variables":{"backup_frequency":{"description":"Frequency of the backup."},"backup_policy_name":{"description":"Name of the VM backup policy."},"backup_time":{"description":"Time of the backup."},"key_vault_name":{"description":"Name of the Azure Key Vault."},"location":{"description":"Location for all resources."},"object_id":{"description":"Object ID for the Azure client."},"recovery_vault_name":{"description":"Name of the Azure Recovery Services Vault."},"resource_group_name":{"description":"Name of the resource group."},"retention_daily_count":{"description":"Retention count for daily backups."},"retention_monthly_count":{"description":"Retention count for monthly backups."},"retention_monthly_days":{"description":"Days of the week for monthly backups."},"retention_monthly_weeks":{"description":"Weeks of the month for monthly backups."},"retention_weekly_count":{"description":"Retention count for weekly backups."},"retention_weekly_days":{"description":"Days of the week for weekly backups."},"tenant_id":{"description":"Tenant ID for Azure."},"timezone":{"description":"Timezone for backup policy."}}}},"loadbalancer":{"source":"./modules/loadbalancer","expressions":{"location":{"references":["var.location"]},"resource_group_name":{"references":["var.resource_group_name"]}},"module":{"outputs":{"backend_pool_id":{"expression":{"references":["azurerm_lb_backend_address_pool.web_lb_backend.id","azurerm_lb_backend_address_pool.web_lb_backend"]},"description":"The ID of the load balancer backend address pool"},"lb_rule_id":{"expression":{"references":["azurerm_lb_rule.web_lb_rule.id","azurerm_lb_rule.web_lb_rule"]},"description":"The ID of the load balancer rule"},"load_balancer_id":{"expression":{"references":["azurerm_lb.web_lb.id","azurerm_lb.web_lb"]},"description":"The ID of the load balancer"},"probe_id":{"expression":{"references":["azurerm_lb_probe.web_lb_probe.id","azurerm_lb_probe.web_lb_probe"]},"description":"The ID of the load balancer probe"},"public_ip_id":{"expression":{"references":["azurerm_public_ip.web_lb_pip.id","azurerm_public_ip.web_lb_pip"]},"description":"The ID of the public IP address"}},"resources":[{"address":"azurerm_lb.web_lb","mode":"managed","type":"azurerm_lb","name":"web_lb","provider_config_key":"azurerm","expressions":{"frontend_ip_configuration":[{"name":{"constant_value":"web-lb-frontend"},"public_ip_address_id":{"references":["azurerm_public_ip.web_lb_pip.id","azurerm_public_ip.web_lb_pip"]}}],"location":{"references":["var.location"]},"name":{"constant_value":"web-lb"},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Standard"}},"schema_version":0},{"address":"azurerm_lb_backend_address_pool.web_lb_backend","mode":"managed","type":"azurerm_lb_backend_address_pool","name":"web_lb_backend","provider_config_key":"azurerm","expressions":{"loadbalancer_id":{"references":["azurerm_lb.web_lb.id","azurerm_lb.web_lb"]},"name":{"constant_value":"web-lb-backend"}},"schema_version":0},{"address":"azurerm_lb_probe.web_lb_probe","mode":"managed","type":"azurerm_lb_probe","name":"web_lb_probe","provider_config_key":"azurerm","expressions":{"interval_in_seconds":{"constant_value":15},"loadbalancer_id":{"references":["azurerm_lb.web_lb.id","azurerm_lb.web_lb"]},"name":{"constant_value":"http-probe"},"number_of_probes":{"constant_value":2},"port":{"constant_value":80},"protocol":{"constant_value":"Http"},"request_path":{"constant_value":"/"}},"schema_version":0},{"address":"azurerm_lb_rule.web_lb_rule","mode":"managed","type":"azurerm_lb_rule","name":"web_lb_rule","provider_config_key":"azurerm","expressions":{"backend_address_pool_ids":{"references":["azurerm_lb_backend_address_pool.web_lb_backend.id","azurerm_lb_backend_address_pool.web_lb_backend"]},"backend_port":{"constant_value":80},"frontend_ip_configuration_name":{"references":["azurerm_lb.web_lb.frontend_ip_configuration[0].name","azurerm_lb.web_lb.frontend_ip_configuration[0]","azurerm_lb.web_lb.frontend_ip_configuration","azurerm_lb.web_lb"]},"frontend_port":{"constant_value":80},"loadbalancer_id":{"references":["azurerm_lb.web_lb.id","azurerm_lb.web_lb"]},"name":{"constant_value":"http-rule"},"probe_id":{"references":["azurerm_lb_probe.web_lb_probe.id","azurerm_lb_probe.web_lb_probe"]},"protocol":{"constant_value":"Tcp"}},"schema_version":0},{"address":"azurerm_public_ip.web_lb_pip","mode":"managed","type":"azurerm_public_ip","name":"web_lb_pip","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["var.location"]},"name":{"constant_value":"web-lb-pip"},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Standard"}},"schema_version":0}],"variables":{"location":{"description":"The location/region where resources will be created"},"resource_group_name":{"description":"The name of the resource group in which resources will be created"}}}},"security":{"source":"./modules/security","expressions":{"contact_email":{"references":["var.contact_email"]},"contact_phone":{"references":["var.contact_phone"]},"location":{"references":["var.location"]},"resource_group_id":{"references":["module.zenpay_resource_group.resource_group_name","module.zenpay_resource_group"]},"resource_group_name":{"references":["var.resource_group_name"]}},"module":{"outputs":{"log_analytics_workspace_id":{"expression":{"references":["azurerm_log_analytics_workspace.securitypostlog.id","azurerm_log_analytics_workspace.securitypostlog"]},"description":"The ID of the Log Analytics Workspace created for security posture."},"security_contact_email":{"expression":{"references":["azurerm_security_center_contact.security_contact.email","azurerm_security_center_contact.security_contact"]},"description":"The email address of the security contact."}},"resources":[{"address":"azurerm_log_analytics_workspace.securitypostlog","mode":"managed","type":"azurerm_log_analytics_workspace","name":"securitypostlog","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.log_analytics_workspace_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"retention_in_days":{"references":["var.retention_in_days"]},"sku":{"constant_value":"PerGB2018"}},"schema_version":3},{"address":"azurerm_security_center_auto_provisioning.auto_provisioning","mode":"managed","type":"azurerm_security_center_auto_provisioning","name":"auto_provisioning","provider_config_key":"azurerm","expressions":{"auto_provision":{"constant_value":"On"}},"schema_version":1},{"address":"azurerm_security_center_contact.security_contact","mode":"managed","type":"azurerm_security_center_contact","name":"security_contact","provider_config_key":"azurerm","expressions":{"alert_notifications":{"constant_value":true},"alerts_to_admins":{"constant_value":true},"email":{"references":["var.contact_email"]},"phone":{"references":["var.contact_phone"]}},"schema_version":0},{"address":"azurerm_security_center_workspace.securityposturews","mode":"managed","type":"azurerm_security_center_workspace","name":"securityposturews","provider_config_key":"azurerm","expressions":{"scope":{"references":["var.resource_group_id"]},"workspace_id":{"references":["azurerm_log_analytics_workspace.securitypostlog.id","azurerm_log_analytics_workspace.securitypostlog"]}},"schema_version":0}],"variables":{"contact_email":{"description":"The email address for security contact."},"contact_phone":{"description":"The phone number for security contact."},"location":{"description":"The location where resources will be deployed."},"log_analytics_workspace_name":{"default":"security-posture-log-analytics","description":"The name of the Log Analytics Workspace."},"resource_group_id":{"description":"The ID of the resource group."},"resource_group_name":{"description":"The name of the resource group."},"retention_in_days":{"default":30,"description":"The number of days to retain log data in the Log Analytics Workspace."}}}},"sql":{"source":"./modules/sql","expressions":{"admin_password":{"references":["var.admin_password"]},"admin_username":{"references":["var.admin_username"]},"environment":{"references":["var.environment"]},"location":{"references":["var.location"]},"resource_group_name":{"references":["var.resource_group_name"]},"sql_db_name":{"references":["var.sql_db_name"]},"sql_server_name":{"references":["var.sql_server_name"]}},"module":{"outputs":{"sql_db_name":{"expression":{"references":["azurerm_sql_database.zenpaysqldb.name","azurerm_sql_database.zenpaysqldb"]},"description":"The name of the SQL Database."},"sql_server_name":{"expression":{"references":["azurerm_sql_server.zenpaysqlserver.name","azurerm_sql_server.zenpaysqlserver"]},"description":"The name of the SQL Server."}},"resources":[{"address":"azurerm_sql_database.zenpaysqldb","mode":"managed","type":"azurerm_sql_database","name":"zenpaysqldb","provider_config_key":"azurerm","expressions":{"edition":{"constant_value":"Standard"},"location":{"references":["var.location"]},"name":{"references":["var.sql_db_name"]},"requested_service_objective_name":{"constant_value":"S0"},"resource_group_name":{"references":["var.resource_group_name"]},"server_name":{"references":["azurerm_sql_server.zenpaysqlserver.name","azurerm_sql_server.zenpaysqlserver"]}},"schema_version":0},{"address":"azurerm_sql_firewall_rule.allow_azure_services","mode":"managed","type":"azurerm_sql_firewall_rule","name":"allow_azure_services","provider_config_key":"azurerm","expressions":{"end_ip_address":{"constant_value":"0.0.0.0"},"name":{"constant_value":"AllowAzureServices"},"resource_group_name":{"references":["var.resource_group_name"]},"server_name":{"references":["azurerm_sql_server.zenpaysqlserver.name","azurerm_sql_server.zenpaysqlserver"]},"start_ip_address":{"constant_value":"0.0.0.0"}},"schema_version":0},{"address":"azurerm_sql_server.zenpaysqlserver","mode":"managed","type":"azurerm_sql_server","name":"zenpaysqlserver","provider_config_key":"azurerm","expressions":{"administrator_login":{"references":["var.admin_username"]},"administrator_login_password":{"references":["var.admin_password"]},"location":{"references":["var.location"]},"name":{"references":["var.sql_server_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"tags":{"references":["var.environment"]},"version":{"constant_value":"12.0"}},"schema_version":0}],"variables":{"admin_password":{"description":"The administrator password for the SQL Server.","sensitive":true},"admin_username":{"description":"The administrator username for the SQL Server."},"environment":{"description":"The environment tag for the resources."},"location":{"description":"The location where the resources will be created."},"resource_group_name":{"description":"The name of the resource group."},"sql_db_name":{"description":"The name of the SQL Database."},"sql_server_name":{"description":"The name of the SQL Server."}}}},"virtualmachines":{"source":"./modules/virtualmachines","expressions":{"admin_password":{"references":["var.admin_password"]},"admin_username":{"references":["var.admin_username"]},"db_subnet_id":{"references":["module.db_subnet.subnet_id","module.db_subnet"]},"location":{"references":["var.location"]},"resource_group_name":{"references":["var.resource_group_name"]},"web_nic_count":{"constant_value":2},"web_subnet_id":{"references":["module.web_subnet.subnet_id","module.web_subnet"]},"web_vm_count":{"constant_value":2}},"module":{"outputs":{"avset_id":{"expression":{"references":["azurerm_availability_set.avset.id","azurerm_availability_set.avset"]},"description":"The ID of the availability set"},"db_nic_id":{"expression":{"references":["azurerm_network_interface.db_nic.id","azurerm_network_interface.db_nic"]},"description":"The ID of the database network interface"},"db_vm_id":{"expression":{"references":["azurerm_virtual_machine.db_vm.id","azurerm_virtual_machine.db_vm"]},"description":"The ID of the database virtual machine"},"web_nic_ids":{"expression":{"references":["azurerm_network_interface.web_nic"]},"description":"The IDs of the web network interfaces"},"web_vm_ids":{"expression":{"references":["azurerm_virtual_machine.web_vm"]},"description":"The IDs of the web virtual machines"}},"resources":[{"address":"azurerm_availability_set.avset","mode":"managed","type":"azurerm_availability_set","name":"avset","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"constant_value":"web-avset"},"platform_fault_domain_count":{"constant_value":2},"platform_update_domain_count":{"constant_value":5},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_network_interface.db_nic","mode":"managed","type":"azurerm_network_interface","name":"db_nic","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"constant_value":"dbnic-ip"},"private_ip_address_allocation":{"constant_value":"Dynamic"},"subnet_id":{"references":["var.db_subnet_id"]}}],"location":{"references":["var.location"]},"name":{"constant_value":"dbnic"},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_network_interface.web_nic","mode":"managed","type":"azurerm_network_interface","name":"web_nic","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"references":["count.index"]},"private_ip_address_allocation":{"constant_value":"Dynamic"},"subnet_id":{"references":["var.web_subnet_id"]}}],"location":{"references":["var.location"]},"name":{"references":["count.index"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0,"count_expression":{"references":["var.web_nic_count"]}},{"address":"azurerm_virtual_machine.db_vm","mode":"managed","type":"azurerm_virtual_machine","name":"db_vm","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"constant_value":"dbvm"},"network_interface_ids":{"references":["azurerm_network_interface.db_nic.id","azurerm_network_interface.db_nic"]},"os_profile":[{"admin_password":{"references":["var.admin_password"]},"admin_username":{"references":["var.admin_username"]},"computer_name":{"constant_value":"hostname-db"}}],"os_profile_windows_config":[{}],"resource_group_name":{"references":["var.resource_group_name"]},"storage_image_reference":[{"offer":{"constant_value":"WindowsServer"},"publisher":{"constant_value":"MicrosoftWindowsServer"},"sku":{"constant_value":"2019-Datacenter"},"version":{"constant_value":"latest"}}],"storage_os_disk":[{"caching":{"constant_value":"ReadWrite"},"create_option":{"constant_value":"FromImage"},"disk_size_gb":{"constant_value":256},"managed_disk_type":{"constant_value":"Premium_LRS"},"name":{"constant_value":"db_os_disk"}}],"vm_size":{"constant_value":"Standard_D4s_v3"}},"schema_version":0},{"address":"azurerm_virtual_machine.web_vm","mode":"managed","type":"azurerm_virtual_machine","name":"web_vm","provider_config_key":"azurerm","expressions":{"availability_set_id":{"references":["azurerm_availability_set.avset.id","azurerm_availability_set.avset"]},"location":{"references":["var.location"]},"name":{"references":["count.index"]},"network_interface_ids":{"references":["azurerm_network_interface.web_nic","count.index"]},"os_profile":[{"admin_password":{"references":["var.admin_password"]},"admin_username":{"references":["var.admin_username"]},"computer_name":{"references":["count.index"]}}],"os_profile_windows_config":[{}],"resource_group_name":{"references":["var.resource_group_name"]},"storage_image_reference":[{"offer":{"constant_value":"WindowsServer"},"publisher":{"constant_value":"MicrosoftWindowsServer"},"sku":{"constant_value":"2019-Datacenter"},"version":{"constant_value":"latest"}}],"storage_os_disk":[{"caching":{"constant_value":"ReadWrite"},"create_option":{"constant_value":"FromImage"},"disk_size_gb":{"constant_value":128},"managed_disk_type":{"constant_value":"Premium_LRS"},"name":{"references":["count.index"]}}],"vm_size":{"constant_value":"Standard_D2s_v3"}},"schema_version":0,"count_expression":{"references":["var.web_vm_count"]}}],"variables":{"admin_password":{"description":"The admin password for the virtual machines"},"admin_username":{"description":"The admin username for the virtual machines"},"db_subnet_id":{"description":"The ID of the subnet for the database network interface"},"location":{"description":"The location where the resources will be created"},"resource_group_name":{"description":"The name of the resource group where the resources will be created"},"web_nic_count":{"description":"Number of web network interfaces to create"},"web_subnet_id":{"description":"The ID of the subnet for web network interfaces"},"web_vm_count":{"description":"Number of web virtual machines to create"}}}},"virtualnetwork":{"source":"./modules/virtualnetwork","expressions":{"address_space":{"references":["var.address_space"]},"location":{"references":["var.location"]},"resource_group_name":{"references":["var.resource_group_name"]},"vnet_name":{"references":["var.vnet_name"]}},"module":{"outputs":{"vnet_address_space":{"expression":{"references":["azurerm_virtual_network.zenpay_vnet.address_space","azurerm_virtual_network.zenpay_vnet"]},"description":"The address space of the virtual network"},"vnet_id":{"expression":{"references":["azurerm_virtual_network.zenpay_vnet.id","azurerm_virtual_network.zenpay_vnet"]},"description":"The ID of the virtual network"},"vnet_name":{"expression":{"references":["azurerm_virtual_network.zenpay_vnet.name","azurerm_virtual_network.zenpay_vnet"]},"description":"The name of the virtual network"}},"resources":[{"address":"azurerm_virtual_network.zenpay_vnet","mode":"managed","type":"azurerm_virtual_network","name":"zenpay_vnet","provider_config_key":"azurerm","expressions":{"address_space":{"references":["var.address_space"]},"location":{"references":["var.location"]},"name":{"references":["var.vnet_name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0}],"variables":{"address_space":{"description":"The address space for the virtual network"},"location":{"description":"The location of the virtual network"},"resource_group_name":{"description":"The name of the resource group where the virtual network will be created"},"vnet_name":{"description":"The name of the virtual network"}}}},"web_nsg":{"source":"./modules/network_security_group","expressions":{"location":{"constant_value":"southafricanorth"},"nsg_name":{"constant_value":"web-nsg"},"resource_group_name":{"references":["var.resource_group_name"]},"security_rules":{"constant_value":[{"access":"Allow","destination_address_prefix":"*","destination_port_range":"80","direction":"Inbound","name":"allow-http","priority":100,"protocol":"Tcp","source_address_prefix":"*","source_port_range":"*"},{"access":"Allow","destination_address_prefix":"*","destination_port_range":"443","direction":"Inbound","name":"allow-https","priority":110,"protocol":"Tcp","source_address_prefix":"*","source_port_range":"*"}]}},"module":{"outputs":{"nsg_id":{"expression":{"references":["azurerm_network_security_group.nsg.id","azurerm_network_security_group.nsg"]},"description":"The ID of the Network Security Group"},"nsg_name":{"expression":{"references":["azurerm_network_security_group.nsg.name","azurerm_network_security_group.nsg"]},"description":"The name of the Network Security Group"}},"resources":[{"address":"azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.nsg_name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0}],"variables":{"location":{"description":"The location where the NSG will be created"},"nsg_name":{"description":"The name of the Network Security Group"},"resource_group_name":{"description":"The name of the resource group where the NSG will be created"},"security_rules":{"description":"A list of security rules to apply to the NSG"}}}},"web_subnet":{"source":"./modules/subnet","expressions":{"address_prefixes":{"constant_value":["10.0.1.0/24"]},"resource_group_name":{"references":["var.resource_group_name"]},"subnet_name":{"constant_value":"web-subnet"},"virtual_network_name":{"references":["module.virtualnetwork.vnet_name","module.virtualnetwork"]}},"module":{"outputs":{"address_prefixes":{"expression":{"references":["azurerm_subnet.web.address_prefixes","azurerm_subnet.web"]},"description":"The address prefixes of the subnet"},"subnet_id":{"expression":{"references":["azurerm_subnet.web.id","azurerm_subnet.web"]},"description":"The ID of the subnet"},"subnet_name":{"expression":{"references":["azurerm_subnet.web.name","azurerm_subnet.web"]},"description":"The name of the subnet"}},"resources":[{"address":"azurerm_subnet.web","mode":"managed","type":"azurerm_subnet","name":"web","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.address_prefixes"]},"name":{"references":["var.subnet_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"virtual_network_name":{"references":["var.virtual_network_name"]}},"schema_version":0}],"variables":{"address_prefixes":{"description":"The address prefixes for the subnet"},"resource_group_name":{"description":"The name of the resource group where the subnet will be created"},"subnet_name":{"description":"The name of the subnet"},"virtual_network_name":{"description":"The name of the virtual network to which the subnet belongs"}}}},"zenpay_resource_group":{"source":"./modules/resource-group","expressions":{"location":{"constant_value":"South Africa North"},"name":{"constant_value":"zenpayrg"}},"module":{"outputs":{"resource_group_location":{"expression":{"references":["var.location"]},"description":"The location of the created resource group"},"resource_group_name":{"expression":{"references":["azurerm_resource_group.zenpayrg.name","azurerm_resource_group.zenpayrg"]},"description":"The name of the created resource group"}},"resources":[{"address":"azurerm_resource_group.zenpayrg","mode":"managed","type":"azurerm_resource_group","name":"zenpayrg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.name"]}},"schema_version":0}],"variables":{"location":{"default":"South Africa North","description":"The location where the resource group will be created"},"name":{"description":"The name of the resource group"}}}}},"variables":{"address_space":{"description":"The address space for the virtual network"},"admin_password":{"description":"The admin password for the virtual machines"},"admin_username":{"description":"The admin username for the virtual machines"},"contact_email":{"description":"The email address for security contact."},"contact_phone":{"description":"The phone number for security contact."},"db_subnet_id":{"description":"The ID of the subnet for the database network interface"},"environment":{"default":"Production","description":"The environment tag for the resources."},"location":{"description":"The location of the virtual network"},"resource_group_name":{"description":"The name of the resource group for the zenpay network"},"sql_db_name":{"default":"zenpaysqldb","description":"The name of the SQL Database."},"sql_server_name":{"default":"zenpaysqlserver","description":"The name of the SQL Server."},"vnet_name":{"description":"The name of the virtual network"},"web_subnet_id":{"description":"The ID of the subnet for web network interfaces"}}}},"relevant_attributes":[{"resource":"module.web_subnet.azurerm_subnet.web","attribute":["id"]},{"resource":"module.loadbalancer.azurerm_lb_rule.web_lb_rule","attribute":["id"]},{"resource":"module.virtualmachines.azurerm_virtual_machine.web_vm","attribute":[]},{"resource":"module.db_nsg.azurerm_network_security_group.nsg","attribute":["name"]},{"resource":"module.zenpay_resource_group.azurerm_resource_group.zenpayrg","attribute":["name"]},{"resource":"module.db_subnet.azurerm_subnet.web","attribute":["address_prefixes"]},{"resource":"module.loadbalancer.azurerm_lb.web_lb","attribute":["id"]},{"resource":"module.virtualmachines.azurerm_network_interface.db_nic","attribute":["id"]},{"resource":"module.db_nsg.azurerm_network_security_group.nsg","attribute":["id"]},{"resource":"module.web_subnet.azurerm_subnet.web","attribute":["name"]},{"resource":"module.virtualmachines.azurerm_virtual_machine.db_vm","attribute":["id"]},{"resource":"module.loadbalancer.azurerm_public_ip.web_lb_pip","attribute":["id"]},{"resource":"module.virtualnetwork.azurerm_virtual_network.zenpay_vnet","attribute":["id"]},{"resource":"module.web_nsg.azurerm_network_security_group.nsg","attribute":["id"]},{"resource":"module.keyvault_backup.azurerm_recovery_services_vault.zenpay_recovery_vault","attribute":["id"]},{"resource":"data.azurerm_client_config.owner","attribute":["object_id"]},{"resource":"module.virtualmachines.azurerm_availability_set.avset","attribute":["id"]},{"resource":"module.loadbalancer.azurerm_lb.web_lb","attribute":["frontend_ip_configuration",0,"name"]},{"resource":"module.web_subnet.azurerm_subnet.web","attribute":["address_prefixes"]},{"resource":"module.appgw_subnet.azurerm_subnet.web","attribute":["name"]},{"resource":"module.sql.azurerm_sql_database.zenpaysqldb","attribute":["name"]},{"resource":"module.applicationgateway.azurerm_application_gateway.zenpay_appgw","attribute":["id"]},{"resource":"data.azurerm_client_config.owner","attribute":["tenant_id"]},{"resource":"module.loadbalancer.azurerm_lb_probe.web_lb_probe","attribute":["id"]},{"resource":"module.security.azurerm_log_analytics_workspace.securitypostlog","attribute":["id"]},{"resource":"module.virtualnetwork.azurerm_virtual_network.zenpay_vnet","attribute":["name"]},{"resource":"module.appgw_subnet.azurerm_subnet.web","attribute":["address_prefixes"]},{"resource":"module.appgw_subnet.azurerm_subnet.web","attribute":["id"]},{"resource":"module.db_subnet.azurerm_subnet.web","attribute":["id"]},{"resource":"module.sql.azurerm_sql_server.zenpaysqlserver","attribute":["name"]},{"resource":"module.security.azurerm_security_center_contact.security_contact","attribute":["email"]},{"resource":"module.db_subnet.azurerm_subnet.web","attribute":["name"]},{"resource":"module.keyvault_backup.azurerm_backup_policy_vm.vm_backup_policy","attribute":["id"]},{"resource":"module.virtualnetwork.azurerm_virtual_network.zenpay_vnet","attribute":["address_space"]},{"resource":"module.loadbalancer.azurerm_lb_backend_address_pool.web_lb_backend","attribute":["id"]},{"resource":"module.virtualmachines.azurerm_network_interface.web_nic","attribute":[]},{"resource":"module.applicationgateway.azurerm_public_ip.appgw_pip","attribute":["id"]},{"resource":"module.web_nsg.azurerm_network_security_group.nsg","attribute":["name"]},{"resource":"module.keyvault_backup.azurerm_key_vault.zenpay_key_vault","attribute":["id"]},{"resource":"module.keyvault_backup.azurerm_recovery_services_vault.zenpay_recovery_vault","attribute":["name"]}],"timestamp":"2024-08-16T23:56:41Z","applyable":true,"complete":true,"errored":false}
