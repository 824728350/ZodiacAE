{
    "output": [
        {
            "url": {
                "description": "URL to the application gateway",
                "value": "http://${azurerm_public_ip.example.ip_address}"
            }
        }
    ],
    "resource": [
        {
            "azurerm_application_gateway": {
                "example": {
                    "autoscale_configuration": [
                        {
                            "max_capacity": 3,
                            "min_capacity": 2
                        }
                    ],
                    "backend_address_pool": [
                        {
                            "fqdns": [],
                            "ip_addresses": [
                                "${azurerm_private_endpoint.example.private_service_connection[0].private_ip_address}"
                            ],
                            "name": "pool-app-service"
                        }
                    ],
                    "backend_http_settings": [
                        {
                            "affinity_cookie_name": null,
                            "connection_draining": [
                                {
                                    "drain_timeout_sec": "30",
                                    "enabled": "false"
                                }
                            ],
                            "cookie_based_affinity": "Disabled",
                            "host_name": "${azurerm_linux_web_app.example.default_hostname}",
                            "name": "backendsetting-001",
                            "path": "/",
                            "port": "443",
                            "probe_name": "probe-001",
                            "protocol": "Https",
                            "request_timeout": "30"
                        }
                    ],
                    "enable_http2": true,
                    "fips_enabled": false,
                    "firewall_policy_id": "${resource.azurerm_web_application_firewall_policy.example.id}",
                    "force_firewall_policy_association": true,
                    "frontend_ip_configuration": [
                        {
                            "name": "frontendipconfig-public",
                            "public_ip_address_id": "${azurerm_public_ip.example.id}"
                        },
                        {
                            "name": "frontendipconfig-private",
                            "private_ip_address": "10.0.0.68",
                            "private_ip_address_allocation": "Static",
                            "subnet_id": "${local.subnets[\"agw\"].id}"
                        }
                    ],
                    "frontend_port": [
                        {
                            "name": "port1",
                            "port": "80"
                        }
                    ],
                    "gateway_ip_configuration": [
                        {
                            "name": "gatewayipconfig",
                            "subnet_id": "${local.subnets[\"agw\"].id}"
                        }
                    ],
                    "http_listener": [
                        {
                            "frontend_ip_configuration_name": "frontendipconfig-public",
                            "frontend_port_name": "port1",
                            "host_names": [],
                            "name": "listener-001",
                            "protocol": "Http",
                            "require_sni": false
                        }
                    ],
                    "location": "${local.region}",
                    "name": "agw-${local.name}-001",
                    "probe": [
                        {
                            "interval": 30,
                            "match": [
                                {
                                    "body": "",
                                    "status_code": [
                                        "200-399"
                                    ]
                                }
                            ],
                            "minimum_servers": 0,
                            "name": "probe-001",
                            "path": "/",
                            "pick_host_name_from_backend_http_settings": true,
                            "port": 443,
                            "protocol": "Https",
                            "timeout": 30,
                            "unhealthy_threshold": 3
                        }
                    ],
                    "request_routing_rule": [
                        {
                            "backend_address_pool_name": "pool-app-service",
                            "backend_http_settings_name": "backendsetting-001",
                            "http_listener_name": "listener-001",
                            "name": "rule-001",
                            "priority": 10,
                            "rule_type": "Basic"
                        }
                    ],
                    "resource_group_name": "${azurerm_resource_group.example.name}",
                    "sku": [
                        {
                            "name": "WAF_v2",
                            "tier": "WAF_v2"
                        }
                    ],
                    "ssl_policy": [
                        {
                            "policy_name": "AppGwSslPolicy20170401S",
                            "policy_type": "Predefined"
                        }
                    ],
                    "zones": [
                        "1",
                        "2",
                        "3"
                    ]
                }
            }
        }
    ]
}